{"version":3,"sources":["../../../../../../assets/cc-common/cc-slot-base-test/dynamicLoadingAssets/assets/cc-common/cc-slot-base-test/dynamicLoadingAssets/SlotTestSymbol.js"],"names":["cc","Class","extends","Component","properties","background","Sprite","mask","Node","paylineMask","table","payline","symbolPayline","onLoad","node","start","emit","loadBackground","loadConfig","loader","load","errors","spriteFrame","SpriteFrame","config","projectConfig","generateDebug","thiz","DEBUG","symbolWidth","symbolHeight","project","spin","spinClick","stop","stopClick","dat","require","gui","GUI","autoPlace","JSON","preset","debug","add","Object","keys","onChange","value","width","WIDTH","height","HEIGHT","SYMBOL_WIDTH","SYMBOL_HEIGHT","SYMBOL_NAME_LIST","LIST","removeAllChildren","x","TABLE_X","y","TABLE_Y","replaceSymbols","assets","replaceBlurSymbols","blurAssets","document","body","childNodes","length","style","zIndex","console","log","active","playAllAnimation","symbols","getComponentsInChildren","forEach","it","changeToSymbol","symbol","instantiate","setParent","getComponent","getSymbolName","playAnimation","position","convertToNodeSpaceAR","parent","convertToWorldSpaceAR"],"mappings":";;;;;;AAAA;;AAEA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAYL,GAAGM,MADP;AAERC,cAAMP,GAAGQ,IAFD;AAGRC,qBAAaT,GAAGQ,IAHR;AAIRE,eAAOV,GAAGQ,IAJF;AAKRG,iBAASX,GAAGQ,IALJ;AAMRI,uBAAeZ,GAAGQ;AANV,KAHP;;AAYLK,UAZK,oBAYI;AACL,aAAKC,IAAL,CAAUF,aAAV,GAA0B,KAAKA,aAA/B;AACH,KAdI;AAgBLG,SAhBK,mBAgBG;AACJ,aAAKD,IAAL,CAAUE,IAAV,CAAe,MAAf;AACA,aAAKC,cAAL;AACA,aAAKC,UAAL;AACH,KApBI;AAsBLD,kBAtBK,4BAsBY;AAAA;;AACbjB,WAAGmB,MAAH,CAAUC,IAAV,CAAe,gDAAf,EAAiE,UAACC,MAAD,EAAShB,UAAT,EAAwB;AACrF,kBAAKA,UAAL,CAAgBiB,WAAhB,GAA8B,IAAItB,GAAGuB,WAAP,CAAmBlB,UAAnB,CAA9B;AACH,SAFD;AAGH,KA1BI;AA4BLa,cA5BK,wBA4BQ;AAAA;;AACTlB,WAAGmB,MAAH,CAAUC,IAAV,CAAe,6CAAf,EAA8D,UAACC,MAAD,EAASG,MAAT,EAAoB;AAC9E,mBAAKC,aAAL,GAAqBD,MAArB;AACA,mBAAKE,aAAL;AACH,SAHD;AAIH,KAjCI;AAmCLA,iBAnCK,2BAmCW;AAAA;;AACZ,YAAIC,OAAO,IAAX;AACA,YAAMC,QAAQ,SAARA,KAAQ,GAAY;AACtB,iBAAKC,WAAL,GAAmB,GAAnB;AACA,iBAAKC,YAAL,GAAoB,GAApB;AACA,iBAAKC,OAAL,GAAe,OAAf;AACA,iBAAKC,IAAL,GAAY,YAAK;AACbL,qBAAKM,SAAL;AACH,aAFD,EAGA,KAAKC,IAAL,GAAY,YAAI;AACZP,qBAAKQ,SAAL;AACH,aALD;AAMH,SAVD;AAWA,YAAMC,MAAMC,QAAQ,SAAR,CAAZ;AACA,aAAKC,GAAL,GAAW,IAAIF,IAAIG,GAAR,CAAY;AACnBC,uBAAW,IADQ;AAEnBpB,kBAAMqB,IAFa;AAGnBC,oBAAQ;AAHW,SAAZ,CAAX;;AAMA,aAAKC,KAAL,GAAa,IAAIf,KAAJ,EAAb;AACA,YAAIG,UAAU,KAAKO,GAAL,CAASM,GAAT,CAAa,KAAKD,KAAlB,EAAyB,SAAzB,EAAoCE,OAAOC,IAAP,CAAY,KAAKrB,aAAjB,CAApC,CAAd;AACAM,gBAAQgB,QAAR,CAAiB,UAACC,KAAD,EAAS;AACtB,mBAAKzC,IAAL,CAAU0C,KAAV,GAAkB,OAAKxB,aAAL,CAAmBuB,KAAnB,EAA0BE,KAA1B,GAAkC,CAApD;AACA,mBAAK3C,IAAL,CAAU4C,MAAV,GAAmB,OAAK1B,aAAL,CAAmBuB,KAAnB,EAA0BI,MAA1B,GAAmC,CAAtD;AACA,mBAAK3C,WAAL,CAAiBwC,KAAjB,GAAyB,OAAKxB,aAAL,CAAmBuB,KAAnB,EAA0BE,KAA1B,GAAkC,CAA3D;AACA,mBAAKzC,WAAL,CAAiB0C,MAAjB,GAA0B,OAAK1B,aAAL,CAAmBuB,KAAnB,EAA0BI,MAA1B,GAAmC,CAA7D;AACA,mBAAKtC,IAAL,CAAUU,MAAV,CAAiB6B,YAAjB,GAAgC,OAAK5B,aAAL,CAAmBuB,KAAnB,EAA0BE,KAA1D;AACA,mBAAKpC,IAAL,CAAUU,MAAV,CAAiB8B,aAAjB,GAAiC,OAAK7B,aAAL,CAAmBuB,KAAnB,EAA0BI,MAA3D;AACA,mBAAKtC,IAAL,CAAUU,MAAV,CAAiB+B,gBAAjB,GAAoC,OAAK9B,aAAL,CAAmBuB,KAAnB,EAA0BQ,IAA9D;AACA,mBAAK9C,KAAL,CAAW+C,iBAAX;AACA,mBAAK/C,KAAL,CAAWgD,CAAX,GAAe,OAAKjC,aAAL,CAAmBuB,KAAnB,EAA0BW,OAAzC;AACA,mBAAKjD,KAAL,CAAWkD,CAAX,GAAe,OAAKnC,aAAL,CAAmBuB,KAAnB,EAA0Ba,OAAzC;AACA,mBAAKlD,OAAL,CAAa+C,CAAb,GAAiB,OAAKjC,aAAL,CAAmBuB,KAAnB,EAA0BW,OAA3C;AACA,mBAAKhD,OAAL,CAAaiD,CAAb,GAAiB,OAAKnC,aAAL,CAAmBuB,KAAnB,EAA0Ba,OAA3C;AACA,mBAAK/C,IAAL,CAAUE,IAAV,CAAe,MAAf;AACA,mBAAKF,IAAL,CAAUE,IAAV,CAAe,oBAAf,EAAqC,OAAKS,aAAL,CAAmBuB,KAAnB,EAA0BQ,IAA/D;AACA,mBAAKM,cAAL,CAAoB,OAAKhD,IAAL,CAAUiD,MAA9B;AACA,mBAAKC,kBAAL,CAAwB,OAAKlD,IAAL,CAAUmD,UAAlC;AACH,SAjBD;AAkBA,aAAK3B,GAAL,CAASM,GAAT,CAAa,KAAKD,KAAlB,EAAyB,MAAzB;AACA,aAAKL,GAAL,CAASM,GAAT,CAAa,KAAKD,KAAlB,EAAyB,MAAzB;AACAuB,iBAASC,IAAT,CAAcC,UAAd,CAAyBF,SAASC,IAAT,CAAcC,UAAd,CAAyBC,MAAzB,GAAkC,CAA3D,EAA8DC,KAA9D,CAAoEC,MAApE,GAA6E,GAA7E;AACH,KA9EI;AAgFLtC,aAhFK,uBAgFO;AACRuC,gBAAQC,GAAR,CAAY,WAAZ;AACA,aAAK3D,IAAL,CAAUE,IAAV,CAAe,gBAAf;AACA,aAAKN,KAAL,CAAWgE,MAAX,GAAoB,IAApB;AACA,aAAK/D,OAAL,CAAa+D,MAAb,GAAsB,KAAtB;AACH,KArFI;AAuFLvC,aAvFK,uBAuFO;AAAA;;AACRqC,gBAAQC,GAAR,CAAY,WAAZ;AACA,aAAK3D,IAAL,CAAUE,IAAV,CAAe,8BAAf,EAA+C,YAAI;AAC/C,mBAAK2D,gBAAL;AACH,SAFD;AAGH,KA5FI;AA6FLb,kBA7FK,0BA6FUC,MA7FV,EA6FkB;AACnB,YAAIa,UAAU,KAAK9D,IAAL,CAAU+D,uBAAV,CAAkC,YAAlC,CAAd;AACAD,gBAAQE,OAAR,CAAgB,UAACC,EAAD,EAAM;AAClBA,eAAGhB,MAAH,GAAYA,MAAZ;AACAgB,eAAGC,cAAH,CAAkB,GAAlB;AACH,SAHD;AAIH,KAnGI;AAoGLhB,sBApGK,8BAoGcD,MApGd,EAoGqB;AACtB,YAAIa,UAAU,KAAK9D,IAAL,CAAU+D,uBAAV,CAAkC,YAAlC,CAAd;AACAD,gBAAQE,OAAR,CAAgB,UAACC,EAAD,EAAM;AAClBA,eAAGd,UAAH,GAAgBF,MAAhB;AACH,SAFD;AAGH,KAzGI;AA0GLY,oBA1GK,8BA0Gc;AAAA;;AACf,aAAKjE,KAAL,CAAWgE,MAAX,GAAoB,KAApB;AACA,aAAK/D,OAAL,CAAa+D,MAAb,GAAsB,IAAtB;AACA,aAAK/D,OAAL,CAAa8C,iBAAb;AACA,YAAImB,UAAU,KAAK9D,IAAL,CAAU+D,uBAAV,CAAkC,YAAlC,CAAd;AACAD,gBAAQE,OAAR,CAAgB,UAACC,EAAD,EAAM;AAClB,gBAAIE,SAASjF,GAAGkF,WAAH,CAAe,OAAKtE,aAApB,CAAb;AACAqE,mBAAOE,SAAP,CAAiB,OAAKxE,OAAtB;AACAsE,mBAAOG,YAAP,CAAoB,mBAApB,EAAyCrB,MAAzC,GAAkD,OAAKjD,IAAL,CAAUiD,MAA5D;AACAkB,mBAAOG,YAAP,CAAoB,mBAApB,EAAyCJ,cAAzC,CAAwDD,GAAGM,aAAH,EAAxD;AACAJ,mBAAOG,YAAP,CAAoB,mBAApB,EAAyCE,aAAzC,CAAuD,CAAvD,EAA0D,IAA1D;AACA,gBAAIC,WAAW,OAAK5E,OAAL,CAAa6E,oBAAb,CAAkCT,GAAGjE,IAAH,CAAQ2E,MAAR,CAAeC,qBAAf,CAAqCX,GAAGjE,IAAH,CAAQyE,QAA7C,CAAlC,CAAf;AACAN,mBAAOM,QAAP,GAAkBA,QAAlB;AACH,SARD;AASH;AAxHI,CAAT","file":"SlotTestSymbol.js","sourceRoot":"../../../../../../assets/cc-common/cc-slot-base-test/dynamicLoadingAssets","sourcesContent":["/* global cc */\n\n// const PROJECT_LIST = ['Config9000', 'Config9987', 'Config9977'];\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        background: cc.Sprite,\n        mask: cc.Node,\n        paylineMask: cc.Node,\n        table: cc.Node,\n        payline: cc.Node,\n        symbolPayline: cc.Node\n    },\n\n    onLoad() {\n        this.node.symbolPayline = this.symbolPayline;\n    },\n\n    start() {\n        this.node.emit('INIT');\n        this.loadBackground();\n        this.loadConfig();\n    },\n\n    loadBackground() {\n        cc.loader.load(\"https://static.ktek.io/animTool/background.jpg\", (errors, background) => {\n            this.background.spriteFrame = new cc.SpriteFrame(background);\n        });\n    },\n\n    loadConfig() {\n        cc.loader.load(\"https://static.ktek.io/animTool/symbol.json\", (errors, config) => {\n            this.projectConfig = config;\n            this.generateDebug();\n        });\n    },\n\n    generateDebug() {\n        let thiz = this;\n        const DEBUG = function () {\n            this.symbolWidth = 200;\n            this.symbolHeight = 200;\n            this.project = 'g9000';\n            this.spin = ()=> {\n                thiz.spinClick();\n            },\n            this.stop = ()=>{\n                thiz.stopClick();\n            };\n        };\n        const dat = require('dat.gui');\n        this.gui = new dat.GUI({\n            autoPlace: true,\n            load: JSON,\n            preset: 'lasted'\n        });\n\n        this.debug = new DEBUG();\n        let project = this.gui.add(this.debug, 'project', Object.keys(this.projectConfig));\n        project.onChange((value)=>{\n            this.mask.width = this.projectConfig[value].WIDTH * 5;\n            this.mask.height = this.projectConfig[value].HEIGHT * 3;\n            this.paylineMask.width = this.projectConfig[value].WIDTH * 5;\n            this.paylineMask.height = this.projectConfig[value].HEIGHT * 3;\n            this.node.config.SYMBOL_WIDTH = this.projectConfig[value].WIDTH;\n            this.node.config.SYMBOL_HEIGHT = this.projectConfig[value].HEIGHT;\n            this.node.config.SYMBOL_NAME_LIST = this.projectConfig[value].LIST;\n            this.table.removeAllChildren();\n            this.table.x = this.projectConfig[value].TABLE_X;\n            this.table.y = this.projectConfig[value].TABLE_Y;\n            this.payline.x = this.projectConfig[value].TABLE_X;\n            this.payline.y = this.projectConfig[value].TABLE_Y;\n            this.node.emit(\"INIT\");\n            this.node.emit(\"UPDATE_SYMBOL_LIST\", this.projectConfig[value].LIST);\n            this.replaceSymbols(this.node.assets);\n            this.replaceBlurSymbols(this.node.blurAssets);\n        });\n        this.gui.add(this.debug, 'spin');\n        this.gui.add(this.debug, 'stop');\n        document.body.childNodes[document.body.childNodes.length - 1].style.zIndex = 999;\n    },\n\n    spinClick() {\n        console.log('spinClick');\n        this.node.emit('START_SPINNING');\n        this.table.active = true;\n        this.payline.active = false;\n    },\n\n    stopClick() {\n        console.log('stopClick');\n        this.node.emit('STOP_REEL_WITH_RANDOM_MATRIX', ()=>{\n            this.playAllAnimation();\n        });\n    },\n    replaceSymbols(assets) {\n        let symbols = this.node.getComponentsInChildren('SlotSymbol');\n        symbols.forEach((it)=>{\n            it.assets = assets;\n            it.changeToSymbol('2');\n        });\n    },\n    replaceBlurSymbols(assets){\n        let symbols = this.node.getComponentsInChildren('SlotSymbol');\n        symbols.forEach((it)=>{\n            it.blurAssets = assets;\n        });\n    },\n    playAllAnimation() {\n        this.table.active = false;\n        this.payline.active = true;\n        this.payline.removeAllChildren();\n        let symbols = this.node.getComponentsInChildren('SlotSymbol');\n        symbols.forEach((it)=>{\n            let symbol = cc.instantiate(this.symbolPayline);\n            symbol.setParent(this.payline);\n            symbol.getComponent(\"SlotSymbolPayline\").assets = this.node.assets;\n            symbol.getComponent(\"SlotSymbolPayline\").changeToSymbol(it.getSymbolName());\n            symbol.getComponent(\"SlotSymbolPayline\").playAnimation(2, true);\n            let position = this.payline.convertToNodeSpaceAR(it.node.parent.convertToWorldSpaceAR(it.node.position));\n            symbol.position = position;\n        });\n    }\n});\n"]}