{"version":3,"sources":["../../../../../../assets/cc-common/cc-share-v1/common/assets/cc-common/cc-share-v1/common/utils.js"],"names":["lodash","require","floatUtils","Big","UTIL_CONFIG","CURRENCY_CONFIG","updateUtilConfig","key","value","hasOwnProperty","getUtilConfig","getDecimalCount","number","min","max","converted","toString","includes","count","split","length","Math","formatCoin","amount","decimalCount","decimal","thousands","toFixed","splitStr","decimalStr","integerArr","index","splice","push","join","MD5","e","h","a","b","c","d","f","g","k","l","m","n","p","substr","q","r","s","t","replace","charCodeAt","String","fromCharCode","Array","toLowerCase","getFBAvatar","url","spriteA","defaultAvatar","AvatarAtlas","dirpath","jsb","fileUtils","getWritablePath","filepath","loadEnd","cc","loader","load","err","tex","warn","spriteFrame","SpriteFrame","sys","os","OS_ANDROID","isNative","isFileExist","removeFile","saveFile","data","isDirectoryExist","createDirectory","writeDataToFile","Uint8Array","OS_IOS","indexOf","xhr","XMLHttpRequest","responseType","onreadystatechange","log","readyState","status","response","bind","open","send","spFrame","filename","substring","lastIndexOf","match","num","spInt","parseInt","getSpriteFrame","loadAvatarFacebook","avatarSprite","ava","atlas","prefix","leadingZeroLength","avatarDefault","node","_sframe","decodeURIComponent","isNaN","Number","isNumber","zeroPad","places","padStart","avaId","frame","type","imageRes","Texture2D","setTexture","getComponent","com","Sprite","isValid","addComponent","getTexture","findKeyByValue","object","Object","keys","find","convertObjectToArrayKey","newArray","sort","forEach","item","convertObjectToArray","convertElementArrayToString","newArr","isEmpty","arr","i","parseFloat","convertTo2DArray","isReserve","ROW_NUMBER","REEL_NUMBER","finalArr","currentRow","floor","reverse","convertPayLine","payLines","listNewPL","dataSplit","payLineID","payLineWinNumbers","payLineWinAmount","payLineSymbol","convertPayLineAllways","multiplier","betDenom","symbolId","totalWinAmount","symbolCount","combination","payableSymbol","convertAssetArrayToObject","ret","_name","convertSlotMatrixTBLR","format","copyArr","slice","colNum","col","rowNum","row","shift","convertSlotMatrixLRTB","convertSlotMatrixBatch1ToBase","setDeviceOrientation","isPortrait","className","methodName","methodSignature","reflection","callStaticMethod","view","setOrientation","macro","ORIENTATION_PORTRAIT","ORIENTATION_LANDSCAPE","changeParent","child","newParent","parent","worldPos","convertToWorldSpaceAR","v2","newPos","convertToNodeSpaceAR","angle","getWorldAngle","setPosition","currNode","getPostionInOtherNode","spaceNode","targetNode","pos","getPosition","mapObjectKey","obj","keysMap","transform","result","currentKey","name","Boolean","keepKey","isObject","TimeSequence","list","speed","isRun","currentSeq","run","action","sequence","callFunc","runAction","cancel","target","stopAction","updateSpeed","convertNumberToDecimal","total","ran","round","convertNumberToK","randRange","random","fixed","RM","toLocalTime","ts","customDateFormat","Date","secondsToHHMMSS","secs","sec_num","hours","minutes","seconds","map","v","filter","date","formatString","YYYY","YY","MMMM","MMM","MM","M","DDDD","DDD","DD","D","hhhh","hhh","hh","mm","ss","ampm","AMPM","dMod","th","getFullYear","getMonth","getDate","getDay","getHours","toUpperCase","getMinutes","getSeconds","toLocalTimeHHMM","timestamp","hour","localTime","toLocalClockTime","formatUserName","userName","trim","getAnimationsName","spine","skeletonData","_skeletonJson","animations","pickOutRandomElements","array","pickNumber","Error","pickElements","randomIndex","setMixAllAnims","mixTime","animNames","error","j","setMix","copyTextToClipboard","text","isBrowser","el","document","createElement","setAttribute","style","position","left","body","appendChild","selected","getSelection","rangeCount","getRangeAt","select","setSelectionRange","execCommand","removeChild","undefined","registerLoadHowl","window","Howl","downloader","extMap","mp3","file","callback","howl","src","preload","once","unregisterLoadHowl","cacheLoader","formatMoneyByCurrency","CENT_UNIT","CENT_SUFFIX","CURRENCY_PREFIX","DECIMAL_COUNT","suffix","lt","times","toNumber","formatWalletMoneyByCurrency","digits","TRIM_ZERO","trimZero","formatWallet","si","symbol","rx","wallet","module","exports","formatWalletMoney","formatMoney","generateId","uuid","getRandomInt","ceil","getText","getTime","addZero","getLeftTime","endTime","serverTime","millisecond","time","getRandomElement","getClip","animation","clipName","getClips","clip","getClipDuration","duration","addDecimals","number1","number2","plus","subtractDecimals","minus","multiplyDecimals","mul","divideDecimals","div"],"mappings":"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","file":"utils.js","sourceRoot":"../../../../../../assets/cc-common/cc-share-v1/common","sourcesContent":["/* global jsb */\nconst lodash = require('lodash');\nconst floatUtils = require('floatUtils');\nconst Big = require(\"big\");\n\n\nconst UTIL_CONFIG = {\n    CURRENCY_CONFIG: null\n}\n\nfunction updateUtilConfig(key, value) {\n    if (UTIL_CONFIG.hasOwnProperty(key)) {\n        UTIL_CONFIG[key] = value;\n    }\n}\n\nfunction getUtilConfig() {\n    return UTIL_CONFIG;\n};\n\nfunction getDecimalCount(number, min = 0, max = 0) {\n    const converted = number.toString();\n    if (converted.includes('.')) {\n        let count = converted.split('.')[1].length;\n        count = Math.max(count, min);\n        if (max && count > max) {\n            count = max;\n        }\n        return count;\n    };\n    return min || 0;\n};\n\nfunction formatCoin(amount, decimalCount = 0, decimal = \".\", thousands = \",\") {\n    if (amount < 0) return toFixed(0, decimalCount);\n\n    const splitStr = toFixed(amount, decimalCount).split(\".\");\n    const decimalStr = splitStr[1] || \"\";\n    const integerArr = splitStr[0].split(\"\");\n    let index = integerArr.length;\n    while ((index -= 3) > 0) {\n        integerArr.splice(index, 0, thousands);\n    }\n    if (decimalStr) {\n        integerArr.push(decimal, decimalStr);\n    }\n    return integerArr.join(\"\");\n}\n\nconst MD5 = (e) => {\n    function h(a, b) {\n        var c, d, e, f, g;\n        e = a & 2147483648;\n        f = b & 2147483648;\n        c = a & 1073741824;\n        d = b & 1073741824;\n        g = (a & 1073741823) + (b & 1073741823);\n        return c & d ? g ^ 2147483648 ^ e ^ f : c | d ? g & 1073741824 ? g ^ 3221225472 ^ e ^ f : g ^ 1073741824 ^ e ^ f : g ^ e ^ f;\n    }\n\n    function k(a, b, c, d, e, f, g) {\n        a = h(a, h(h(b & c | ~b & d, e), g));\n        return h(a << f | a >>> 32 - f, b);\n    }\n\n    function l(a, b, c, d, e, f, g) {\n        a = h(a, h(h(b & d | c & ~d, e), g));\n        return h(a << f | a >>> 32 - f, b);\n    }\n\n    function m(a, b, d, c, e, f, g) {\n        a = h(a, h(h(b ^ d ^ c, e), g));\n        return h(a << f | a >>> 32 - f, b);\n    }\n\n    function n(a, b, d, c, e, f, g) {\n        a = h(a, h(h(d ^ (b | ~c), e), g));\n        return h(a << f | a >>> 32 - f, b);\n    }\n\n    function p(a) {\n        var b = \"\",\n            d = \"\",\n            c;\n        for (c = 0; 3 >= c; c++) d = a >>> 8 * c & 255, d = \"0\" + d.toString(16), b += d.substr(d.length - 2, 2);\n        return b;\n    }\n    var f = [],\n        q, r, s, t, a, b, c, d;\n    e = function (a) {\n        a = a.replace(/\\r\\n/g, \"\\n\");\n        for (var b = \"\", d = 0; d < a.length; d++) {\n            var c = a.charCodeAt(d);\n            128 > c ? b += String.fromCharCode(c) : (127 < c && 2048 > c ? b += String.fromCharCode(c >> 6 | 192) : (b += String.fromCharCode(c >> 12 | 224), b += String.fromCharCode(c >> 6 & 63 | 128)), b += String.fromCharCode(c & 63 | 128));\n        }\n        return b;\n    }(e);\n    f = function (b) {\n        var a, c = b.length;\n        a = c + 8;\n        for (var d = 16 * ((a - a % 64) / 64 + 1), e = Array(d - 1), f = 0, g = 0; g < c;) a = (g - g % 4) / 4, f = g % 4 * 8, e[a] |= b.charCodeAt(g) << f, g++;\n        a = (g - g % 4) / 4;\n        e[a] |= 128 << g % 4 * 8;\n        e[d - 2] = c << 3;\n        e[d - 1] = c >>> 29;\n        return e;\n    }(e);\n    a = 1732584193;\n    b = 4023233417;\n    c = 2562383102;\n    d = 271733878;\n    for (e = 0; e < f.length; e += 16) q = a, r = b, s = c, t = d, a = k(a, b, c, d, f[e + 0], 7, 3614090360), d = k(d, a, b, c, f[e + 1], 12, 3905402710), c = k(c, d, a, b, f[e + 2], 17, 606105819), b = k(b, c, d, a, f[e + 3], 22, 3250441966), a = k(a, b, c, d, f[e + 4], 7, 4118548399), d = k(d, a, b, c, f[e + 5], 12, 1200080426), c = k(c, d, a, b, f[e + 6], 17, 2821735955), b = k(b, c, d, a, f[e + 7], 22, 4249261313), a = k(a, b, c, d, f[e + 8], 7, 1770035416), d = k(d, a, b, c, f[e + 9], 12, 2336552879), c = k(c, d, a, b, f[e + 10], 17, 4294925233), b = k(b, c, d, a, f[e + 11], 22, 2304563134), a = k(a, b, c, d, f[e + 12], 7, 1804603682), d = k(d, a, b, c, f[e + 13], 12, 4254626195), c = k(c, d, a, b, f[e + 14], 17, 2792965006), b = k(b, c, d, a, f[e + 15], 22, 1236535329), a = l(a, b, c, d, f[e + 1], 5, 4129170786), d = l(d, a, b, c, f[e + 6], 9, 3225465664), c = l(c, d, a, b, f[e + 11], 14, 643717713), b = l(b, c, d, a, f[e + 0], 20, 3921069994), a = l(a, b, c, d, f[e + 5], 5, 3593408605), d = l(d, a, b, c, f[e + 10], 9, 38016083), c = l(c, d, a, b, f[e + 15], 14, 3634488961), b = l(b, c, d, a, f[e + 4], 20, 3889429448), a = l(a, b, c, d, f[e + 9], 5, 568446438), d = l(d, a, b, c, f[e + 14], 9, 3275163606), c = l(c, d, a, b, f[e + 3], 14, 4107603335), b = l(b, c, d, a, f[e + 8], 20, 1163531501), a = l(a, b, c, d, f[e + 13], 5, 2850285829), d = l(d, a, b, c, f[e + 2], 9, 4243563512), c = l(c, d, a, b, f[e + 7], 14, 1735328473), b = l(b, c, d, a, f[e + 12], 20, 2368359562), a = m(a, b, c, d, f[e + 5], 4, 4294588738), d = m(d, a, b, c, f[e + 8], 11, 2272392833), c = m(c, d, a, b, f[e + 11], 16, 1839030562), b = m(b, c, d, a, f[e + 14], 23, 4259657740), a = m(a, b, c, d, f[e + 1], 4, 2763975236), d = m(d, a, b, c, f[e + 4], 11, 1272893353), c = m(c, d, a, b, f[e + 7], 16, 4139469664), b = m(b, c, d, a, f[e + 10], 23, 3200236656), a = m(a, b, c, d, f[e + 13], 4, 681279174), d = m(d, a, b, c, f[e + 0], 11, 3936430074), c = m(c, d, a, b, f[e + 3], 16, 3572445317), b = m(b, c, d, a, f[e + 6], 23, 76029189), a = m(a, b, c, d, f[e + 9], 4, 3654602809), d = m(d, a, b, c, f[e + 12], 11, 3873151461), c = m(c, d, a, b, f[e + 15], 16, 530742520), b = m(b, c, d, a, f[e + 2], 23, 3299628645), a = n(a, b, c, d, f[e + 0], 6, 4096336452), d = n(d, a, b, c, f[e + 7], 10, 1126891415), c = n(c, d, a, b, f[e + 14], 15, 2878612391), b = n(b, c, d, a, f[e + 5], 21, 4237533241), a = n(a, b, c, d, f[e + 12], 6, 1700485571), d = n(d, a, b, c, f[e + 3], 10, 2399980690), c = n(c, d, a, b, f[e + 10], 15, 4293915773), b = n(b, c, d, a, f[e + 1], 21, 2240044497), a = n(a, b, c, d, f[e + 8], 6, 1873313359), d = n(d, a, b, c, f[e + 15], 10, 4264355552), c = n(c, d, a, b, f[e + 6], 15, 2734768916), b = n(b, c, d, a, f[e + 13], 21, 1309151649), a = n(a, b, c, d, f[e + 4], 6, 4149444226), d = n(d, a, b, c, f[e + 11], 10, 3174756917), c = n(c, d, a, b, f[e + 2], 15, 718787259), b = n(b, c, d, a, f[e + 9], 21, 3951481745), a = h(a, q), b = h(b, r), c = h(c, s), d = h(d, t);\n    return (p(a) + p(b) + p(c) + p(d)).toLowerCase();\n};\n\n\nconst getFBAvatar = (url, spriteA, defaultAvatar, AvatarAtlas) => {\n    let dirpath = jsb.fileUtils.getWritablePath() + 'avaImg/';\n    let filepath = dirpath + MD5(url) + '.png';\n\n    function loadEnd() {\n        cc.loader.load(filepath, function (err, tex) {\n            if (err) {\n                cc.warn(err);\n                spriteA.spriteFrame = defaultAvatar;\n            } else {\n                let spriteFrame = new cc.SpriteFrame(tex);\n                if (spriteFrame) {\n                    spriteA.spriteFrame = spriteFrame;\n                }\n            }\n        });\n\n    }\n\n    if (cc.sys.os === cc.sys.OS_ANDROID && cc.sys.isNative) {\n        if (jsb.fileUtils.isFileExist(filepath)) {\n            //remove old file\n            jsb.fileUtils.removeFile(filepath);\n        }\n    }\n\n    let saveFile = function (data) {\n        if (typeof data !== 'undefined') {\n            if (!jsb.fileUtils.isDirectoryExist(dirpath)) {\n                jsb.fileUtils.createDirectory(dirpath);\n            }\n\n            if (jsb.fileUtils.writeDataToFile(new Uint8Array(data), filepath)) {\n                cc.warn('Remote write file succeed.');\n                loadEnd();\n            } else {\n                spriteA.spriteFrame = defaultAvatar;\n                cc.warn('Remote write file failed.');\n            }\n        } else {\n            spriteA.spriteFrame = defaultAvatar;\n            cc.warn('Remote download file failed.');\n        }\n    };\n\n    if (cc.sys.os === cc.sys.OS_IOS && cc.sys.isNative) {\n        if (url.indexOf(\"facebook\") !== -1) {\n            if (jsb.fileUtils.isFileExist(filepath)) {\n                loadEnd();\n            }\n            let xhr = new XMLHttpRequest();\n            xhr.responseType = 'arraybuffer';\n\n            xhr.onreadystatechange = function () {\n                cc.log(\"xhr.readyState  \" + xhr.readyState);\n                cc.log(\"xhr.status  \" + xhr.status);\n                if (xhr.readyState === 4) {\n                    if (xhr.status === 200) {\n                        saveFile(xhr.response);\n                    }\n                }\n            }.bind(this);\n            xhr.open(\"GET\", url, true);\n            xhr.send();\n        }\n        else {\n            let spFrame = defaultAvatar;\n            if (url) {\n                let filename = url.substring(url.lastIndexOf('/') + 1);\n                if (filename.match(/avatar_[0-9][0-9].png/)) {\n                    let num = filename.substring(7, 8);\n                    let spInt = parseInt(num);\n                    if (spInt >= 0 && spInt <= 32) {\n                        spFrame = filename.split('.')[0];\n                    }\n                    else {\n                        spFrame = defaultAvatar;\n                    }\n                }\n                else {\n                    spFrame = defaultAvatar;\n                }\n            }\n            spriteA.spriteFrame = AvatarAtlas.getSpriteFrame(spFrame);\n        }\n    }\n    else {\n        let xhr = new XMLHttpRequest();\n        xhr.responseType = 'arraybuffer';\n\n        xhr.onreadystatechange = function () {\n            cc.log(\"xhr.readyState  \" + xhr.readyState);\n            cc.log(\"xhr.status  \" + xhr.status);\n            if (xhr.readyState === 4) {\n                if (xhr.status === 200) {\n                    saveFile(xhr.response);\n                } else {\n                    saveFile(null);\n                }\n            }\n        }.bind(this);\n        xhr.open(\"GET\", url, true);\n        xhr.send();\n    }\n};\n\nconst loadAvatarFacebook = (avatarSprite, ava, atlas, prefix = 'avatar_', leadingZeroLength = 0, avatarDefault = 'avatar_01') => {\n    if (!avatarSprite || !avatarSprite.node) return;\n    const defaultAvatar = atlas.getSpriteFrame(avatarDefault);\n    if (!defaultAvatar) return;\n\n    let _sframe = decodeURIComponent(ava);\n\n    if ((ava + '').indexOf('avatar_') > -1) {\n        _sframe = ava || avatarDefault;\n    } else {\n        if (!isNaN(ava)) {\n            ava = Number.parseInt(ava);\n        }\n\n        if (lodash.isNumber(ava)) {\n            // avatar start from 1\n            ava += 1;\n            if (leadingZeroLength > 0) {\n                const zeroPad = (num, places) => String(num).padStart(places, '0');\n                ava = zeroPad(ava, leadingZeroLength);\n            }\n            _sframe = prefix + ava;\n        }\n    }\n    \n    if (_sframe.indexOf('avatar_') > -1 && _sframe.indexOf(\"facebook\") === -1 && _sframe.indexOf(\"http\") > -1) {\n        let avaId = _sframe.split('avatar_');\n        let frame = defaultAvatar;\n        if (avaId[1]) {\n            frame = atlas.getSpriteFrame('avatar_' + avaId[1].replace('.png', ''));\n        }\n        frame = frame ? frame : defaultAvatar;\n        avatarSprite.spriteFrame = frame;\n        return false;\n    }\n    else \n    if (_sframe.indexOf(\"http\") === -1) {\n        let frame = atlas.getSpriteFrame(_sframe);\n        frame = frame ? frame : defaultAvatar;\n        avatarSprite.spriteFrame = frame;\n        return false;\n    }\n    // else if(cc.sys.isNative){\n    //     getFBAvatar(_sframe, avatarSprite, defaultAvatar, atlas);\n    // } \n    else {\n        \n        if (_sframe.indexOf(\"facebook\") !== -1) {\n            _sframe = _sframe.replace(\"http://\", \"https://\");\n        }\n        cc.loader.load({url: decodeURIComponent(ava), type: 'png'}, (err, imageRes) => {\n            if (!avatarSprite || !avatarSprite.node) return;\n            if (err) {\n                avatarSprite.spriteFrame = defaultAvatar;\n            } else if (imageRes instanceof cc.Texture2D) {\n                let spriteFrame = new cc.SpriteFrame;\n                spriteFrame.setTexture(imageRes);\n                if (avatarSprite && avatarSprite.node && avatarSprite.node.getComponent) {\n                    let com = avatarSprite.node.getComponent(cc.Sprite);\n                    if(!com || cc.isValid(com,true)==false) {\n                        com = avatarSprite.node.addComponent(cc.Sprite);\n                    }\n                    com.spriteFrame = new cc.SpriteFrame(spriteFrame.getTexture());\n                }\n\n            } else {\n                avatarSprite.spriteFrame = defaultAvatar;\n            }\n        });\n        return true;\n    }\n};\n\nconst findKeyByValue = (object,value) => {\n    return Object.keys(object).find(key => object[key] == value);\n};\n\nconst convertObjectToArrayKey = (object) => {\n    let newArray = [];\n    for(let key in object){\n        newArray.push({key:key, value:object[key]});\n    }\n    newArray = newArray.sort(function(a,b) { return a.value - b.value; });\n    newArray.forEach( (item,index) =>{\n        newArray[index] = item.key;\n    });\n    return newArray;\n};\n\n\nconst convertObjectToArray = (object) => {\n    let newArray = [];\n    for(let key in object){\n        newArray.push({key:key, value:object[key]});\n    }\n    newArray = newArray.sort(function(a,b) { return a.value - b.value; });\n    newArray.forEach( (item,index) =>{\n        newArray[index] = item.value;\n    });\n    return newArray;\n};\n\nconst convertElementArrayToString = arr => {\n    const newArr = [];\n    if (!lodash.isEmpty(arr)) {\n        for (let i = 0; i < arr.length; i++) {\n            const number = parseFloat(arr[i]);\n            newArr.push(number + '');\n        }\n    }\n    return newArr;\n};\n\nconst convertTo2DArray = ({ arr, isReserve, ROW_NUMBER, REEL_NUMBER }) => {\n    let finalArr = [];\n    for (let i = 0; i < ROW_NUMBER; i++) {\n        finalArr.push([]);\n    }\n    if (!lodash.isEmpty(arr)) {\n        for (let i = 0; i < arr.length; i++) {\n            const currentRow = Math.floor(i / REEL_NUMBER);\n            finalArr[currentRow].push(arr[i]);\n        }\n    }\n    if (isReserve) finalArr = finalArr.reverse();\n\n    return finalArr;\n};\nconst convertPayLine = (payLines = []) => {\n    const listNewPL = [];\n    for (let i = 0; i < payLines.length; i++) {\n        const dataSplit = payLines[i].split(';');\n        if (dataSplit.length >= 3) {\n            listNewPL.push({\n                payLineID: dataSplit[0],\n                payLineWinNumbers: parseInt(dataSplit[1]),\n                payLineWinAmount: dataSplit[2],\n                payLineSymbol: dataSplit[3]\n            });\n        }\n    }\n    return listNewPL;\n};\n\n\nconst convertPayLineAllways = (payLines = [], multiplier = 1, betDenom) => \n{\n    const listNewPL = [];\n    for (let i = 0; i < payLines.length; i++) \n    {\n        if (payLines[i].includes(';'))\n        {\n            const dataSplit = payLines[i].split(';');\n            if (dataSplit.length !== 0) {\n                listNewPL.push({\n                    symbolId: dataSplit[0],\n                    totalWinAmount: dataSplit[1],\n                    symbolCount: dataSplit[2],\n                    combination: dataSplit[3],\n                    payableSymbol: dataSplit[4],\n                    betDenom,\n                    multiplier,\n                });\n            }\n            else {\n                cc.log(\"payLines is not right AKTV formatted\");\n            }\n        }\n    }\n    return listNewPL;\n};\n\n\nconst convertAssetArrayToObject = (arr) => {\n    let ret = {};\n    for (let i = 0; i < arr.length; i++) {\n        if (arr[i] && arr[i]._name) {\n            ret[arr[i]._name] = arr[i];\n        }\n    }\n    return ret;\n};\nconst convertSlotMatrixTBLR = (arr = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14], format = [3,4,5,3]) => {\n    const finalArr = [];\n    let copyArr = arr.slice();\n    const colNum = format.length;\n    for (let col = 0; col < colNum; col++) {\n        finalArr[col] = [];\n        const rowNum = format[col];\n        for (let row = 0; row < rowNum; row++) {\n            finalArr[col][row] = copyArr.shift();\n        }\n    }\n    return finalArr;\n};\nconst convertSlotMatrixLRTB = (arr = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14], format = [3,3,3,3,3]) => {\n    const finalArr = [];\n    const colNum = format.length;\n    for (let col = 0; col < colNum; col++) {\n        finalArr[col] = [];\n        const rowNum = format[col];\n        for (let row = 0; row < rowNum; row++) {\n            finalArr[col][row] = arr[row*colNum+col];\n        }\n    }\n    return finalArr;\n};\n\nconst convertSlotMatrixBatch1ToBase = (arr = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15], format = [3,3,3,3,3]) => {\n    const finalArr = [];\n    const colNum = format.length;\n    for (let col = 0; col < colNum; col++) {\n        finalArr[col] = [];\n        const rowNum = format[col];\n        for (let row = 0; row < rowNum; row++) {\n            finalArr[col][row] = arr[col + colNum*row];\n        }\n    }\n    return finalArr;\n};\n\nconst setDeviceOrientation = function(isPortrait = false) {\n    if (!cc.sys.isNative || !jsb) return;\n    if (isPortrait) {\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            cc.log(\"==== Android setDeviceOrientation Portrait ====\");\n            let className = \"org/cocos2dx/javascript/AppActivity\";\n            let methodName = \"setNativeOrientation\";\n            let methodSignature = \"(I)V\";\n            jsb.reflection.callStaticMethod(className, methodName, methodSignature, 1);\n        }\n        else if (cc.sys.os == cc.sys.OS_IOS) {\n            jsb.reflection.callStaticMethod('RootViewController', 'setGamePortrait');\n        }\n        cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT);\n    }\n    else {\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\n            cc.log(\"==== Android setDeviceOrientation Landscape ====\");\n            let className = \"org/cocos2dx/javascript/AppActivity\";\n            let methodName = \"setNativeOrientation\";\n            let methodSignature = \"(I)V\";\n            jsb.reflection.callStaticMethod(className, methodName, methodSignature, 0);\n        }\n        else if (cc.sys.os == cc.sys.OS_IOS) {\n            jsb.reflection.callStaticMethod('RootViewController', 'setGameLandScape');\n        }\n        cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);\n    }\n};\n\nfunction changeParent(child, newParent) {\n    if (newParent === child.parent) return;\n    const worldPos = child.convertToWorldSpaceAR(cc.v2(0, 0));\n    const newPos = newParent.convertToNodeSpaceAR(worldPos);\n    const angle = getWorldAngle(child) - getWorldAngle(newParent);\n    child.parent = newParent;\n    child.setPosition(newPos);\n    child.angle = angle;\n}\n\nfunction getWorldAngle(node) { // degree\n    let currNode = node;\n    let angle = currNode.angle;\n    while (currNode.parent != null) {\n        currNode = currNode.parent;\n        angle += currNode.angle;\n    }\n    return angle % 360;\n}\n\nconst getPostionInOtherNode = (spaceNode, targetNode) => {\n    if (targetNode.parent == null) {\n        return null;\n    }\n    let pos = targetNode.parent.convertToWorldSpaceAR(targetNode.getPosition());\n    return spaceNode.convertToNodeSpaceAR(pos);\n};\n\nconst mapObjectKey = (obj, keysMap) => {\n    return lodash.transform(obj, function(result, value, key) {\n        var currentKey = key;\n        if (keysMap[key]) { \n            currentKey = keysMap[key].name;\n            if (keysMap[key].type == Boolean)\n                value = (value == 'T');\n            if (keysMap[key].keepKey && !lodash.isObject(value)) {\n                result[key] = value;\n            }\n        }\n        if (lodash.isObject(value)) {\n            result[currentKey] = mapObjectKey(value, keysMap);\n        }\n        else {\n            result[currentKey] = value;\n        }\n    });\n};\n\nfunction TimeSequence(node, list, speed) {\n    this.node = node;\n    this.list = list || [];\n    this.speed = speed || 1;\n    this.isRun = false;\n    this.currentSeq = null;\n    this.run = function() {\n        if (this.list.length == 0 || this.isRun) return;\n\n        const action = this.list.shift();\n        this.isRun = true;\n        this.currentSeq = cc.speed(\n            cc.sequence(\n                action,\n                cc.callFunc(() => {\n                    this.isRun = false;\n                    this.run();\n                })\n            )\n            ,this.speed);\n        this.node.runAction(this.currentSeq);\n    };\n    this.cancel = function() {\n        this.list = [];\n        if(this.currentSeq!=null && this.currentSeq.target !=null){\n            this.node.stopAction(this.currentSeq);\n        }\n    };\n    this.updateSpeed = function(speed) {\n        this.speed = speed;\n    };\n}\n\nfunction convertNumberToDecimal(total, n) {\n    if (!n) return total;\n\n    let ran = 1;\n    for (let i = 0; i < n; i++){\n        ran *= 10;\n    }\n\n    return  Math.floor(Math.round((total * ran*10))/10)/ran;\n}\n\nfunction convertNumberToK(value, n = 3){\n    const b = 1000000000;\n    const m = 1000000;\n    const k = 1000;\n\n    if (value >= b) {\n        return convertNumberToDecimal(value / b,n) + \"B\";\n    }\n\n    if (value >= m) {\n        return convertNumberToDecimal(value / m,n) + \"M\";\n    }\n\n    if (value >= k) {\n        return convertNumberToDecimal(value / k,n) + \"K\";\n    }\n\n    return convertNumberToDecimal(value,n);\n}\n\nfunction randRange(min, max){\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nfunction toFixed(num, fixed = 0) {\n    Big.RM = 0;\n    if (isNaN(+num) || typeof num === \"object\") num = 0;\n    return Big(num).toFixed(fixed);\n}\n\nfunction toLocalTime(ts,format){\n    return customDateFormat(new Date(ts * 1000), format);\n}\n\nfunction secondsToHHMMSS(secs){\n    if(secs == 0) return \"00:00\";\n    let sec_num = parseInt(secs, 10);\n    let hours   = Math.floor(sec_num / 3600);\n    let minutes = Math.floor(sec_num / 60) % 60;\n    let seconds = sec_num % 60;\n\n    return [hours,minutes,seconds]\n        .map(v => v < 10 ? \"0\" + v : v)\n        .filter((v,i) => v !== \"00\" || i > 0)\n        .join(\":\");\n}\n\nfunction customDateFormat(date, formatString) {\n    var YYYY,YY,MMMM,MMM,MM,M,DDDD,DDD,DD,D,hhhh,hhh,hh,h,mm,m,ss,s,ampm,AMPM,dMod,th;\n    YY = ((YYYY=date.getFullYear())+\"\").slice(-2);\n    MM = (M=date.getMonth()+1)<10?('0'+M):M;\n    MMM = (MMMM=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"][M-1]).substring(0,3);\n    DD = (D=date.getDate())<10?('0'+D):D;\n    DDD = (DDDD=[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"][date.getDay()]).substring(0,3);\n    th=(D>=10&&D<=20)?'th':((dMod=D%10)==1)?'st':(dMod==2)?'nd':(dMod==3)?'rd':'th';\n    formatString = formatString.replace(\"#YYYY#\",YYYY).replace(\"#YY#\",YY).replace(\"#MMMM#\",MMMM).replace(\"#MMM#\",MMM).replace(\"#MM#\",MM).replace(\"#M#\",M).replace(\"#DDDD#\",DDDD).replace(\"#DDD#\",DDD).replace(\"#DD#\",DD).replace(\"#D#\",D).replace(\"#th#\",th);\n    h=(hhh=date.getHours());\n    if (h==0) h=24;\n    if (h>12) h-=12;\n    hh = h<10?('0'+h):h;\n    hhhh = hhh<10?('0'+hhh):hhh;\n    AMPM=(ampm=hhh<12?'am':'pm').toUpperCase();\n    mm=(m=date.getMinutes())<10?('0'+m):m;\n    ss=(s=date.getSeconds())<10?('0'+s):s;\n    return formatString.replace(\"#hhhh#\",hhhh).replace(\"#hhh#\",hhh).replace(\"#hh#\",hh).replace(\"#h#\",h).replace(\"#mm#\",mm).replace(\"#m#\",m).replace(\"#ss#\",ss).replace(\"#s#\",s).replace(\"#ampm#\",ampm).replace(\"#AMPM#\",AMPM);\n}\n\nfunction toLocalTimeHHMM(ts) {\n    let timestamp = new Date(parseInt(ts));\n    let hour = timestamp.getHours();\n    let minutes = timestamp.getMinutes();\n    let localTime = (hour < 10 ? \"0\" : \"\") + hour + \"h\" + (minutes < 10 ? \"0\" : \"\") + minutes;\n    return localTime;\n}\n\nfunction toLocalClockTime(ts) {\n    let timestamp = new Date(parseInt(ts));\n    let hour = timestamp.getHours();\n    let minutes = timestamp.getMinutes();\n    let localTime = hour + \"h\" + (minutes < 10 ? \"0\" : \"\") + minutes;\n    return localTime;\n}\n\nfunction formatUserName(userName){\n    return userName.trim();\n}\n\nfunction getAnimationsName(spine){\n    return Object.keys(spine.skeletonData._skeletonJson.animations);\n}\n\nfunction pickOutRandomElements(array, pickNumber = 1) {\n    if (!array || array.length <= 0) throw new Error(\"invalid array\");\n    const pickElements = [];\n    for(let i = 0; i< pickNumber; i++){\n        let randomIndex = Math.floor(Math.random() * array.length);\n        pickElements.push(array.splice(randomIndex, 1)[0]);\n    }\n    return pickElements;\n}\n\n/**\n * ! just using for the spine have a few animations\n */\nfunction setMixAllAnims(spine, mixTime = 0.15){\n    const animNames = getAnimationsName(spine);\n    if(animNames.length < 2){\n        cc.error(\"spine have to have many animations\");\n        return;\n    }\n    for(let i = 0; i < animNames.length; i++){\n        for(let j = 0; j < animNames.length; j++){\n            spine.setMix(animNames[i], animNames[j], mixTime);\n        }\n    }\n}\n\nfunction copyTextToClipboard(text) {\n    if (cc.sys.isBrowser) {\n        const el = document.createElement('textarea');  // Create a <textarea> element\n        el.value = text;                                 // Set its value to the string that you want copied\n        el.setAttribute('readonly', '');                // Make it readonly to be tamper-proof\n        el.style.position = 'absolute';                 \n        el.style.left = '-9999px';                      // Move outside the screen to make it invisible\n        document.body.appendChild(el);                  // Append the <textarea> element to the HTML document\n        const selected =            // eslint-disable-line\n            document.getSelection().rangeCount > 0        // Check if there is any content selected previously\n                ? document.getSelection().getRangeAt(0)     // Store selection if found\n                : false;                                    // Mark as false to know no selection existed before\n        el.select();                                    // Select the <textarea> content\n        el.setSelectionRange(0, text.length);\n        document.execCommand('copy');                   // Copy - only works as a result of a user action (e.g. click events)\n        document.body.removeChild(el);\n    } else if (cc.sys.isNative) {\n        if (jsb != undefined) {\n            jsb.copyTextToClipboard(text);\n        }\n    }\n}\n\nfunction registerLoadHowl (){\n    if (window.Howl) {\n        cc.loader.downloader.extMap['mp3cached'] = cc.loader.downloader.extMap.mp3;\n        cc.loader.downloader.extMap.mp3 =(file, callback)=>{\n            let howl = new window.Howl({\n                src: [file.url],\n                preload: true\n            });\n\n            howl.once('load', ()=>{\n                callback(null, howl);\n            });\n        };\n    }\n}\n\nfunction unregisterLoadHowl() {\n    let cacheLoader = cc.loader.downloader.extMap['mp3cached'];\n    if (cacheLoader) {\n        cc.loader.downloader.extMap.mp3 = cacheLoader;\n    }\n}\n\nfunction formatMoneyByCurrency(amount, decimalCount = 0, decimal = \".\", thousands = \",\") {\n    const { CENT_UNIT, CENT_SUFFIX, CURRENCY_PREFIX, DECIMAL_COUNT } = UTIL_CONFIG.CURRENCY_CONFIG;\n    let prefix = CURRENCY_PREFIX || \"\";\n    let suffix = \"\";\n    if (isNaN(decimalCount) || decimalCount === null) {\n        decimalCount = decimalCount || DECIMAL_COUNT;\n    }\n    if (CENT_UNIT && Big(amount).lt(CENT_UNIT)) {\n        prefix = \"\";\n        suffix = CENT_SUFFIX || \"\";\n        amount = Big(amount || 0).times(100 || 0).toNumber();\n    }\n\treturn prefix + formatCoin(amount, decimalCount, decimal, thousands) + suffix;\n}\n\nfunction formatWalletMoneyByCurrency(num, digits) {\n    const { CENT_UNIT, CENT_SUFFIX, CURRENCY_PREFIX, DECIMAL_COUNT, TRIM_ZERO } = UTIL_CONFIG.CURRENCY_CONFIG;\n    let prefix = CURRENCY_PREFIX || \"\";\n    let suffix = \"\";\n    if (isNaN(digits) || digits === null) {\n        digits = DECIMAL_COUNT || 2;\n    }\n    let trimZero = TRIM_ZERO;\n    if (CENT_UNIT && Big(num).lt(CENT_UNIT)) {\n        prefix = \"\";\n        suffix = CENT_SUFFIX || \"\";\n        num = Big(num || 0).times(100 || 0).toNumber();\n    }\n    return prefix + formatWallet(num, digits, trimZero) + suffix;\n}\n\nfunction formatWallet(num, digits, trimZero = true) {\n    if (isNaN(parseFloat(num))) num = 0; \n    const si = [\n        { value: 1, symbol: \"\" },\n        { value: 1E3, symbol: \"K\" },\n        { value: 1E6, symbol: \"M\" },\n        { value: 1E9, symbol: \"B\" },\n        { value: 1E12, symbol: \"T\" },\n        { value: 1E15, symbol: \"P\" },\n        { value: 1E18, symbol: \"E\" }\n    ];\n    const rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\n    let i;\n    for (i = si.length - 1; i > 0; i--) {\n        if (num >= si[i].value) break;\n    }\n    let wallet = toFixed((num / si[i].value), digits);\n    if (trimZero) wallet = wallet.replace(rx, \"$1\");\n    return wallet + si[i].symbol;\n}\n\nmodule.exports = {\n    copyTextToClipboard,\n    loadAvatarFacebook,\n    getFBAvatar,\n    convertElementArrayToString,\n    convertTo2DArray,\n    convertPayLine,\n    convertSlotMatrixTBLR,\n    convertSlotMatrixLRTB,\n    convertAssetArrayToObject,\n    changeParent,\n    findKeyByValue,\n    convertObjectToArrayKey,\n    getPostionInOtherNode,\n    TimeSequence,\n    setDeviceOrientation,\n    convertSlotMatrixBatch1ToBase,\n    convertPayLineAllways,\n    convertObjectToArray,\n    toLocalTimeHHMM,\n    toLocalClockTime,\n    toLocalTime,\n    secondsToHHMMSS,\n    customDateFormat,\n    mapObjectKey,\n    formatWalletMoney: function (num, digits = 2) {\n        if (UTIL_CONFIG.CURRENCY_CONFIG) {\n            return formatWalletMoneyByCurrency(num, digits);\n        }\n        return formatWallet(num, digits);\n    },\n    formatMoney: function (amount, decimalCount, decimal = \".\", thousands = \",\") {\n        if (UTIL_CONFIG.CURRENCY_CONFIG) {\n            if (isNaN(decimalCount)) decimalCount = UTIL_CONFIG.CURRENCY_CONFIG.DECIMAL_COUNT;\n            return formatMoneyByCurrency(amount, decimalCount, decimal, thousands);\n        }\n        return formatCoin(amount, decimalCount, decimal, thousands);\n    },\n    generateId: function () {\n        return this.uuid();\n    },\n    uuid() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'\n            .replace(/[xy]/g, function (c) {\n                var r = (Math.random() * 16) | 0,\n                    v = c === 'x' ? r : (r & 0x3) | 0x8;\n                return v.toString(16);\n            })\n            .replace(/-/gi, '');\n    },\n    getRandomInt: function (min, max) {\n        min = Math.ceil(min);\n        max = Math.floor(max);\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    },\n    getText: function(text = '', length = 0) {\n        let result = text;\n        const n = length - text.length;\n        if (n) {\n            for (var i = 0; i < n; i++) {\n                result += ' ';\n            }\n        }\n        return result;\n    },\n    getTime: function() {\n        function addZero(i) {\n            if (i < 10) {\n                i = '0' + i;\n            }\n            return i;\n        }\n\n        const d = new Date();\n        const h = addZero(d.getHours());\n        const m = addZero(d.getMinutes());\n        const s = addZero(d.getSeconds());\n        const t = h + ':' + m + ':' + s;\n        return t;\n    },\n    getLeftTime: function(endTime, serverTime, millisecond = 1000) {\n        serverTime = serverTime ? new Date(serverTime).getTime() : new Date().getTime();\n        let time = Math.floor((new Date(endTime).getTime() - serverTime) / millisecond);\n        if (time < 0) time = 0;\n        return time;\n    },\n    getRandomElement: function(array) {\n        if (!array || array.length <= 0) throw new Error(\"invalid array\");\n        return array[Math.floor(Math.random() * array.length)];\n    },\n    getClip: function (animation, clipName) {\n        return animation.getClips().find(clip => clip.name === clipName);\n    },\n    getClipDuration: function (animation, clipName) {\n        const clip = animation.getClips().find(clip => clip.name === clipName);\n        if(!clip) return null;\n        return clip.duration;\n    },\n    addDecimals: function (number1, number2) {\n        return floatUtils.plus(number1, number2);\n    },\n    subtractDecimals: function (number1, number2) {\n        return floatUtils.minus(number1, number2);\n    },\n    multiplyDecimals: function (number1, number2) {\n        return floatUtils.mul(number1, number2);\n    },\n    divideDecimals: function (number1, number2) {\n        return floatUtils.div(number1, number2);\n    },\n    convertNumberToDecimal,\n    convertNumberToK,\n    randRange,\n    formatUserName,\n    setMixAllAnims,\n    getWorldAngle,\n    pickOutRandomElements,\n    registerLoadHowl,\n    unregisterLoadHowl,\n    updateUtilConfig,\n    getUtilConfig,\n    getDecimalCount,\n    toFixed,\n    formatCoin,\n    floatUtils\n};\n"]}