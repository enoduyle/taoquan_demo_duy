{"version":3,"sources":["../../../../../../assets/cc-common/cc-slotbase-v2/portrailGame/assets/cc-common/cc-slotbase-v2/portrailGame/MenuBarMgr.js"],"names":["TweenView","require","checkConditionCloseGameIframe","cc","Class","extends","properties","exitGameNode","Node","btnSoundOn","btnSoundOff","btnMusicOn","btnMusicOff","overlay","borderOverlayList","onLoad","_super","node","init","bind","clickPlayTrial","clickPlayReal","checkGameInApp","show","onStartCB","onCompleteCB","active","activeBorderOverlayList","scheduleOnce","isAutoSpin","gSlotDataStore","isFinished","playSession","hide","completeCallBack","isEnableBtn","getComponent","Button","interactable","onExitGame","soundPlayer","playSFXClick","sys","isNative","closeCreatorGame","emit","isEnableSFX","isEnableBGM","clickSoundOn","warn","setEffectEnable","clickSoundOff","clickMusicOn","stopMainBGM","clickMusicOff","setBgmEnable","isActive","i","length","borderNode"],"mappings":"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","file":"MenuBarMgr.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/portrailGame","sourcesContent":["const TweenView = require('TweenView');\nconst { checkConditionCloseGameIframe } = require(\"gameCommonUtils\");\ncc.Class({\n    extends: TweenView,\n\n    properties: {\n        exitGameNode: cc.Node,\n\n        btnSoundOn: cc.Node,\n        btnSoundOff: cc.Node,\n\n        btnMusicOn: cc.Node,\n        btnMusicOff: cc.Node,\n\n        overlay: cc.Node,\n\n        borderOverlayList: [cc.Node],\n    },\n\n    onLoad() {\n        this._super();\n        this.node.init = this.init.bind(this);\n        this.node.clickPlayTrial = this.clickPlayTrial.bind(this);\n        this.node.clickPlayReal = this.clickPlayReal.bind(this);\n\n        this.checkGameInApp();\n    },\n\n    show(onStartCB = null, onCompleteCB = null) {\n        if (this.overlay != null) this.overlay.active = true;\n        this._super(onStartCB, () => {\n            this.activeBorderOverlayList(true);\n            this.scheduleOnce(()=>{\n                onCompleteCB && onCompleteCB();\n            }, 0.5);\n            const { isAutoSpin } = this.node.gSlotDataStore;\n            const { isFinished } = this.node.gSlotDataStore.playSession;\n            if (this.overlay != null) {\n                this.overlay.active = (isAutoSpin || (isFinished === false));\n            }\n        });\n    },\n\n    hide(onStartCB = null, onCompleteCB = null) {\n        let completeCallBack = () => {\n            onCompleteCB && onCompleteCB();\n            this.activeBorderOverlayList(false);\n        };\n        this._super(onStartCB, completeCallBack);\n        if (this.overlay != null) this.overlay.active = false;\n    },\n\n    checkGameInApp() {\n        if (this.exitGameNode) {\n            const isEnableBtn = checkConditionCloseGameIframe();\n\n            if (isEnableBtn) {\n                this.exitGameNode.getComponent(cc.Button).interactable = true;\n            } else {\n                this.exitGameNode.getComponent(cc.Button).interactable = false;\n            }\n        }\n    },\n\n    onExitGame() {\n        this.node.soundPlayer && this.node.soundPlayer.playSFXClick();\n\n        if (cc.sys.isNative && typeof (closeCreatorGame) === 'function') {\n            if (this.exitGameNode) {\n                this.exitGameNode.emit(\"BACK_TO_LOBBY\");\n            }\n        } else {\n            this.scheduleOnce(() => {\n                if (this.exitGameNode) {\n                    this.exitGameNode.emit(\"BACK_TO_LOBBY\");\n                }\n            }, 0.5);\n        }\n    },\n\n    init() {\n        // sound setting\n        if (this.node.soundPlayer) {\n            this.btnSoundOn.active = this.node.soundPlayer.isEnableSFX;\n            this.btnSoundOff.active = !this.node.soundPlayer.isEnableSFX;\n\n            this.btnMusicOn.active = this.node.soundPlayer.isEnableBGM;\n            this.btnMusicOff.active = !this.node.soundPlayer.isEnableBGM;\n        }\n\n    },\n\n    clickSoundOn() {\n        // turn off sound\n        if (this.btnSoundOff) this.btnSoundOff.active = true;\n        if (this.btnSoundOn) this.btnSoundOn.active = false;\n        if (!this.node.soundPlayer) {\n            cc.warn('[SOUND_EVENT] No sound player found');\n            return;\n        }\n\n        this.node.soundPlayer.setEffectEnable(false);\n    },\n\n    clickSoundOff() {\n        // turn on sound\n        if (this.btnSoundOff) this.btnSoundOff.active = false;\n        if (this.btnSoundOn) this.btnSoundOn.active = true;\n        if (!this.node.soundPlayer) {\n            cc.warn('[SOUND_EVENT] No sound player found');\n            return;\n        }\n        this.node.soundPlayer.setEffectEnable(true);\n        this.node.soundPlayer.playSFXClick();\n    },\n\n    clickMusicOn() {\n        // turn off sound\n        if (this.btnMusicOff) this.btnMusicOff.active = true;\n        if (this.btnMusicOn) this.btnMusicOn.active = false;\n        if (!this.node.soundPlayer) {\n            cc.warn('[SOUND_EVENT] No sound player found');\n            return;\n        }\n        this.node.soundPlayer.stopMainBGM();\n        this.node.soundPlayer.playSFXClick();\n    },\n\n    clickMusicOff() {\n        // turn on sound\n        if (this.btnMusicOff) this.btnMusicOff.active = false;\n        if (this.btnMusicOn) this.btnMusicOn.active = true;\n        if (!this.node.soundPlayer) {\n            cc.warn('[SOUND_EVENT] No sound player found');\n            return;\n        }\n        this.node.soundPlayer.setBgmEnable(true);\n        this.node.soundPlayer.playSFXClick();\n    },\n\n    clickPlayTrial() {\n\n    },\n\n    clickPlayReal() {\n        \n    },\n\n    activeBorderOverlayList(isActive) {\n        for (let i = 0; i < this.borderOverlayList.length; i++) {\n            let borderNode = this.borderOverlayList[i];\n            borderNode.active = isActive;\n        }\n    }\n});\n"]}