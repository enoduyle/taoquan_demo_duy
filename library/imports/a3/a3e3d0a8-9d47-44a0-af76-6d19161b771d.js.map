{"version":3,"sources":["../../../../../../../assets/cc-common/cc-slotbase-v2/portrailGame/gui/assets/cc-common/cc-slotbase-v2/portrailGame/gui/InfoPayableSymbol.js"],"names":["cc","Class","extends","Component","properties","frameBg","Node","layout","Layout","description","payable","spine","border","listSymbols","String","listPayable","SpriteFrame","onLoad","node","on","updateLayout","bind","updateData","resetAnim","spineAnim","getComponent","sp","Skeleton","borderAnim","direction","HorizontalDirection","LEFT_TO_RIGHT","newPos","symbolName","newX","width","x","y","horizontalDirection","spineData","spineBorder","index","indexOf","Sprite","spriteFrame","skeletonData","findAnimation","setMix","setAnimation","addAnimation","timeScale"],"mappings":"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","file":"InfoPayableSymbol.js","sourceRoot":"../../../../../../../assets/cc-common/cc-slotbase-v2/portrailGame/gui","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        frameBg: cc.Node,\n        layout: cc.Layout,\n        description: cc.Node,\n        payable: cc.Node,\n        spine : cc.Node,\n        border: cc.Node,\n        listSymbols: [cc.String],\n        listPayable: [cc.SpriteFrame],\n    },\n\n    onLoad() {\n        this.node.on(\"UPDATE_LAYOUT\", this.updateLayout.bind(this));\n        this.node.on(\"UPDATE_DATA\", this.updateData.bind(this));\n        this.node.on(\"RESET_ANIM\", this.resetAnim.bind(this));\n        this.spineAnim = this.spine.getComponent(sp.Skeleton);\n        this.borderAnim = this.border.getComponent(sp.Skeleton);\n        \n    },\n\n    updateLayout(direction = cc.Layout.HorizontalDirection.LEFT_TO_RIGHT, newPos, symbolName) {\n        let newX;\n        if (symbolName === 'K') {\n            this.node.width = 480;\n            this.description.width = 300;\n            newX = direction === cc.Layout.HorizontalDirection.LEFT_TO_RIGHT ?\n                newPos.x + this.node.width * 0.3 :\n                newPos.x - this.node.width * 0.3;\n        } else {\n            this.node.width = 310;\n            this.description.width = 144;\n            newX = direction === cc.Layout.HorizontalDirection.LEFT_TO_RIGHT ?\n                newPos.x + this.node.width * 0.22 :\n                newPos.x - this.node.width * 0.22;\n        }\n        this.node.x = newX;\n        this.node.y = newPos.y;\n        this.layout.horizontalDirection = direction;\n        this.layout.getComponent(cc.Layout).updateLayout();\n    },\n\n    updateData(symbolName = null, spineData = null, spineBorder = null) {\n        if (!symbolName) return;\n        const index = this.listSymbols.indexOf(symbolName);\n        if (index > -1) {\n            this.payable.getComponent(cc.Sprite).spriteFrame = this.listPayable[index];\n        }\n\n        if (spineData) {\n            this.spineAnim.skeletonData = spineData;\n            if (this.spineAnim.findAnimation('Active')) {\n                this.spineAnim.setMix('Active', 'Idle', 0.5);\n                this.spineAnim.setAnimation(0, 'Active', false);\n                this.spineAnim.addAnimation(0, 'Idle', true);\n                this.spineAnim.timeScale = 0.5;\n            }\n        }\n\n        if (spineBorder) {\n            this.borderAnim.skeletonData = spineBorder;\n            if (this.borderAnim.findAnimation('Touch')) {\n                this.borderAnim.setAnimation(0, 'Touch', true);\n            }\n        }\n    },\n\n    resetAnim(){\n\n        this.spineAnim.skeletonData = null;\n        this.borderAnim.skeletonData = null;\n    }\n});\n"]}