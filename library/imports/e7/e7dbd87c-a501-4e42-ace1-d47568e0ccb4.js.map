{"version":3,"sources":["../../../../../../assets/cc-common/cc-slotbase-v2/component/assets/cc-common/cc-slotbase-v2/component/ActorDialogSlotbase.js"],"names":["cutsceneMode","require","cc","Class","extends","properties","overlayLayer","Node","lbMessage","Label","btnOK","Button","btnCancel","buttonLayout","actionOK","actionCancel","onLoad","node","on","play","exit","opacity","active","start","show","content","strText","actionBtnOK","showMessage","off","closeMessage","soundPlayer","playSFXClick","enter","getComponent","string","hideNode","callback","setBtnOkText","text","labelOk","getComponentInChildren","setBtnCancel","labelCancel"],"mappings":"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","file":"ActorDialogSlotbase.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/component","sourcesContent":["\n\nconst cutsceneMode = require('CutsceneMode');\n\ncc.Class({\n    extends: cutsceneMode,\n\n    properties: {\n        overlayLayer: cc.Node,\n        lbMessage: cc.Label,\n        btnOK: cc.Button,\n        btnCancel: cc.Button,\n        buttonLayout: cc.Node,\n    },\n    actionOK: null,\n    actionCancel: null,\n\n    onLoad() {\n        this.node.on(\"PLAY\", this.play, this);\n        this.node.on(\"HIDE\", this.exit, this);\n        this.node.opacity = 255;\n        this.node.active = false;\n    },\n\n    start() {},\n\n    show() {\n        const { strText, actionBtnOK = null, actionCancel = null, } = this.content;\n        this.node.active = true;\n        this.overlayLayer.active = true;\n        this.showMessage({ strText, actionBtnOK, actionCancel });\n        this.btnOK.node.off('click');\n        this.btnOK.node.on('click', () => {\n            this.closeMessage();\n            if (this.actionOK) this.actionOK();\n            if (this.node.soundPlayer) {\n                this.node.soundPlayer.playSFXClick();\n            }\n        });\n\n        this.btnCancel.node.off('click');\n        this.btnCancel.node.on('click', () => {\n            this.closeMessage();\n            if (this.actionCancel) this.actionCancel();\n            if (this.node.soundPlayer) {\n                this.node.soundPlayer.playSFXClick();\n            }\n        });\n    },\n\n    enter() {},\n\n    showMessage({ strText, actionBtnOK = null, actionCancel = null }) {\n        this.node.active = true;\n        this.lbMessage.getComponent(cc.Label).string = strText;\n        this.actionOK = actionBtnOK;\n        this.actionCancel = actionCancel;\n        this.btnOK.node.active = actionBtnOK != null;\n        this.btnCancel.node.active = actionCancel != null;\n        if (this.buttonLayout) {\n            this.buttonLayout.active = this.btnOK.node.active || this.btnCancel.node.active;\n        }\n    },\n\n    closeMessage() {\n        this.hideNode();\n        this.callback && this.callback();\n    },\n\n    setBtnOkText(text) {\n        const labelOk = this.btnOK.node.getComponentInChildren(cc.Label);\n        if (labelOk) labelOk.string = text;\n    },\n\n    setBtnCancel(text) {\n        const labelCancel = this.btnCancel.node.getComponentInChildren(cc.Label);\n        if (labelCancel) labelCancel.string = text;\n    },\n\n    hideNode() {\n        this.overlayLayer.active = false;\n        this.exit();\n    }\n\n});\n"]}