{"version":3,"sources":["../../../../../../assets/cc-common/cc-slotbase-v2/portrailGame/assets/cc-common/cc-slotbase-v2/portrailGame/AutoSpinPanelController.js"],"names":["cc","Class","extends","Component","properties","autoSpinButton","Node","normalFrame","SpriteFrame","selectedFrame","numberButtons","overlay","onLoad","node","showOverlay","bind","isShow","active","getSpinNumber","evt","number","warn","soundPlayer","playSFXClick","spinNumber","forEach","it","getComponent","Sprite","spriteFrame","getChildByName","color","Color","fromHEX","target","Button","interactable","startAutoSpinning","setAutoSpinEvent","Event","EventCustom","setUserData","dispatchEvent","emit","opacity","resetButtonStatus","clickBtnClose"],"mappings":"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","file":"AutoSpinPanelController.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/portrailGame","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        autoSpinButton: cc.Node,\n        normalFrame: cc.SpriteFrame,\n        selectedFrame: cc.SpriteFrame,\n        numberButtons: [cc.Node],\n        overlay : cc.Node\n    },\n\n    onLoad() {\n        this.node.showOverlay = this.showOverlay.bind(this);\n    },\n\n    showOverlay(isShow = false) {\n        this.overlay.active = isShow;\n    },\n\n    getSpinNumber(evt, number) {\n        if(!evt || !number) {\n            cc.warn('Missing event or number of spins');\n            return;\n        }\n        this.node.soundPlayer && this.node.soundPlayer.playSFXClick();\n        this.spinNumber = number;\n        this.numberButtons.forEach(it => {\n            it.getComponent(cc.Sprite).spriteFrame = this.normalFrame;\n            it.getChildByName('Label').color = new cc.Color().fromHEX('#ffffff');\n        });\n        evt.target.getComponent(cc.Sprite).spriteFrame = this.selectedFrame;\n        evt.target.getChildByName('Label').color = new cc.Color().fromHEX('#f3d598');\n        this.autoSpinButton.getComponent(cc.Button).interactable = true;\n    },\n\n    startAutoSpinning() {\n        this.node.soundPlayer && this.node.soundPlayer.playSFXClick();\n        this.setAutoSpinEvent = new cc.Event.EventCustom('SET_AUTO_SPIN_EVENT', true);\n        this.setAutoSpinEvent.setUserData({\n            spinNumber: this.spinNumber,\n        });\n        this.node.dispatchEvent(this.setAutoSpinEvent);\n        this.node.emit('HIDE', 0, ()=>{ this.node.opacity = 0;});\n        this.resetButtonStatus();\n        this.overlay.active = false;\n    },\n\n    resetButtonStatus() {\n        this.autoSpinButton.getComponent(cc.Button).interactable = false;\n        this.numberButtons.forEach(it => {\n            it.getComponent(cc.Sprite).spriteFrame = this.normalFrame;\n            it.getChildByName('Label').color = new cc.Color().fromHEX('#ffffff');\n        });\n    },\n\n    clickBtnClose() {\n        this.node.soundPlayer && this.node.soundPlayer.playSFXClick();\n        this.resetButtonStatus();\n        this.node.emit('HIDE', 0, ()=>{ this.node.opacity = 0;});\n        this.overlay.active = false;\n    }\n});\n"]}