{"version":3,"sources":["../../../../../../../assets/cc-common/cc-share-v1/shader/shaderEffect/assets/cc-common/cc-share-v1/shader/shaderEffect/motionBlur.js"],"names":["cc","Class","extends","Component","properties","speed","onLoad","node","on","activeBlur","stopBlur","stopBlurSmooth","start","sprite","getComponent","Sprite","material","getMaterial","strength","decreasing","update","dt","setProperty"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,eAAO;AADC,KAHP;;AAOLC,UAPK,oBAOG;AACJ,aAAKC,IAAL,CAAUC,EAAV,CAAa,aAAb,EAA4B,KAAKC,UAAjC,EAA6C,IAA7C;AACA,aAAKF,IAAL,CAAUC,EAAV,CAAa,WAAb,EAA0B,KAAKE,QAA/B,EAAyC,IAAzC;AACA,aAAKH,IAAL,CAAUC,EAAV,CAAa,kBAAb,EAAiC,KAAKG,cAAtC,EAAsD,IAAtD;AACH,KAXI;AAaLC,SAbK,mBAaI;AACL,YAAMC,SAAS,KAAKN,IAAL,CAAUO,YAAV,CAAuBd,GAAGe,MAA1B,CAAf;AACA,YAAGF,MAAH,EAAW;AACP,iBAAKG,QAAL,GAAgBH,OAAOI,WAAP,CAAmB,CAAnB,CAAhB;AACH;AACD,aAAKC,QAAL,GAAgB,CAAhB;AACA,aAAKC,UAAL,GAAkB,KAAlB;AACH,KApBI;AAsBLC,UAtBK,kBAsBGC,EAtBH,EAsBO;AACR,YAAG,CAAC,KAAKL,QAAT,EAAmB;AACnB,aAAKA,QAAL,CAAcM,WAAd,CAA0B,UAA1B,EAAsC,KAAKJ,QAA3C;AACA,YAAG,KAAKC,UAAR,EAAoB;AAChB,gBAAG,KAAKD,QAAL,GAAgB,CAAnB,EAAsB;AAClB,qBAAKA,QAAL,IAAiB,KAAKb,KAAL,GAAagB,EAA9B;AACH,aAFD,MAEO;AACH,qBAAKH,QAAL,GAAgB,CAAhB;AACA,qBAAKC,UAAL,GAAkB,KAAlB;AACH;AACJ;AACJ,KAjCI;AAmCLT,YAnCK,sBAmCK;AACN,aAAKQ,QAAL,GAAgB,CAAhB;AACH,KArCI;AAuCLT,cAvCK,wBAuCqB;AAAA,YAAfS,QAAe,uEAAJ,GAAI;;AACtB,aAAKA,QAAL,GAAgBA,QAAhB;AACH,KAzCI;AA2CLP,kBA3CK,4BA2CY;AACb,aAAKQ,UAAL,GAAkB,IAAlB;AACH;AA7CI,CAAT","file":"motionBlur.js","sourceRoot":"../../../../../../../assets/cc-common/cc-share-v1/shader/shaderEffect","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        speed: 1.0,\n    },\n\n    onLoad(){\n        this.node.on('ACTIVE_BLUR', this.activeBlur, this);\n        this.node.on('STOP_BLUR', this.stopBlur, this);\n        this.node.on('STOP_BLUR_SMOOTH', this.stopBlurSmooth, this);\n    }, \n\n    start () {\n        const sprite = this.node.getComponent(cc.Sprite);\n        if(sprite) {\n            this.material = sprite.getMaterial(0);\n        }\n        this.strength = 0;\n        this.decreasing = false;\n    },\n\n    update (dt) {\n        if(!this.material) return;\n        this.material.setProperty('strength', this.strength);\n        if(this.decreasing) {\n            if(this.strength > 0) {\n                this.strength -= this.speed * dt;\n            } else {\n                this.strength = 0;\n                this.decreasing = false;\n            }\n        }\n    },\n\n    stopBlur(){\n        this.strength = 0;\n    },\n\n    activeBlur(strength = 0.8){\n        this.strength = strength;\n    },\n\n    stopBlurSmooth() {\n        this.decreasing = true;\n    }\n});\n"]}