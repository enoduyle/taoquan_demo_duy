{"version":3,"sources":["TotalWinDialog9983.js"],"names":["cutsceneMode","require","formatMoney","cc","Class","extends","properties","overlay","Node","spineGlow","sp","Skeleton","spineFrame","winAmount","enter","isShow","getComponent","Label","string","node","soundPlayer","stopAllAudio","playSFXTotalWin","setAnimation","addAnimation","scale","runAction","sequence","callFunc","scaleTo","easing","easeBackOut","fadeIn","content","delayTime","close","bindButtonQuickShow","bindButtonAnimation","on","quickShow","_animationQueue","spawn","fadeOut","easeBackIn","stopSFXTotalWin","exit","stopAllActions","off","stopAction","show","active","opacity"],"mappings":"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","file":"TotalWinDialog9983.js","sourceRoot":"../../../../../../assets/cc-taoquan-9983/scripts/cutScene","sourcesContent":["const cutsceneMode = require('CutsceneMode');\nconst { formatMoney } = require('utils');\ncc.Class({\n    extends: cutsceneMode,\n\n    properties: {\n        overlay: cc.Node,\n        spineGlow: sp.Skeleton,\n        spineFrame: sp.Skeleton,\n        winAmount: cc.Node,\n    },\n    /* //*test\n    onLoad(){\n        this._super();\n        window._test = () => {\n            this.node.emit(\"PLAY\", { winAmount: 1000000 });\n        };\n    },\n    //*/\n    enter() {\n        this.isShow = true;\n        this.winAmount.getComponent(cc.Label).string = '';\n        if (this.node.soundPlayer) this.node.soundPlayer.stopAllAudio();\n        if (this.node.soundPlayer) this.node.soundPlayer.playSFXTotalWin();\n        this.spineGlow.setAnimation(0, \"Appear\", false);\n        this.spineGlow.addAnimation(0, \"Idle\", true);\n\n        this.spineFrame.setAnimation(0, \"Appear\", false);\n        this.spineFrame.addAnimation(0, \"Idle\", true);\n        this.winAmount.scale = 0;\n        this.node.runAction(cc.sequence(\n            cc.callFunc(() => {\n                this.winAmount.runAction(cc.scaleTo(0.5, 1).easing(cc.easeBackOut()));\n                this.winAmount.runAction(cc.fadeIn(0.3));\n                this.winAmount.getComponent(cc.Label).string = formatMoney(this.content.winAmount);\n            }),\n            cc.fadeIn(0.5),\n            cc.delayTime(4),\n            cc.callFunc(() => {\n                this.close();\n            }),\n        ));\n    },\n\n    bindButtonQuickShow() {\n        this.bindButtonAnimation = cc.sequence(\n            cc.delayTime(1),\n            cc.callFunc(() => {\n                this.overlay.on('click', () => {\n                    if (this.isShow) {\n                        this.quickShow();\n                    }\n                });\n            }), \n        );\n        this.overlay.runAction(this.bindButtonAnimation);\n    },\n    close() {\n        this.isShow = false;\n        this.winAmount.runAction(cc.sequence(\n            cc.delayTime(0.5),\n            cc.callFunc(() => {\n                this.spineFrame._animationQueue = [];\n                this.spineGlow._animationQueue = [];\n                this.spineGlow.setAnimation(0, \"Disappear\", false);\n                this.spineFrame.setAnimation(0, \"Disappear\", false);\n            }),\n            cc.spawn(\n                cc.fadeOut(0.4),\n                cc.scaleTo(0.5, 0).easing(cc.easeBackIn()),\n            ),\n            cc.callFunc(() => {\n                if (this.node.soundPlayer) this.node.soundPlayer.stopSFXTotalWin();\n                this.winAmount.getComponent(cc.Label).string = '';\n                this.exit();\n            })\n        ));\n    },\n    quickShow() {\n        if (!this.isShow) return;\n        this.node.stopAllActions();\n        this.overlay.off('click');\n        this.overlay.stopAction(this.bindButtonAnimation);\n        this.winAmount.stopAllActions();\n        this.close();\n    },\n\n    show() {\n        this.node.active = true;\n        this.node.opacity = 0;\n        this.bindButtonQuickShow();\n    },\n});\n"]}