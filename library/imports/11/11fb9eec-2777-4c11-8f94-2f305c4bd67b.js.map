{"version":3,"sources":["../../../../../../assets/cc-common/cc-slotbase-v2/gui/assets/cc-common/cc-slotbase-v2/gui/BackToLobby.js"],"names":["cc","Class","extends","Component","properties","lobbySceneName","onLoad","loadConfigAsync","require","getConfig","LOGIN_IFRAME","gameCommonUtils","isEnableBtn","checkConditionCloseGameIframe","button","node","getChildByName","active","on","trigger","mainDirector","director","waitingScene","showWaitingCutScene","soundPlayer","_backToLobbyCallback","playSFXClick","unschedule","delaySoundClick","sys","isNative","closeCreatorGame","stopAllAudio","handleCloseGameIframe","scheduleOnce"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,wBAAgB;AADR,KAFP;AAKLC,UALK,oBAKI;AACL,YAAMC,kBAAkBC,QAAQ,iBAAR,CAAxB;;AADK,oCAEkBD,gBAAgBE,SAAhB,EAFlB;AAAA,YAEEC,YAFF,yBAEEA,YAFF;;AAGL,YAAIA,YAAJ,EAAkB;AACd,gBAAMC,kBAAkBH,QAAQ,iBAAR,CAAxB;AACA,gBAAMI,cAAcD,gBAAgBE,6BAAhB,EAApB;AACA,gBAAI,CAACD,WAAL,EAAkB;AACd,oBAAME,SAAS,KAAKC,IAAL,CAAUC,cAAV,CAAyB,QAAzB,CAAf;AACA,oBAAIF,MAAJ,EAAY;AACRA,2BAAOG,MAAP,GAAgB,KAAhB;AACH;AACJ;AACJ,SATD,MASO;AACH,iBAAKF,IAAL,CAAUG,EAAV,CAAa,eAAb,EAA6B,KAAKC,OAAlC,EAA0C,IAA1C;AACH;AACJ,KApBI;AAqBLA,WArBK,qBAqBK;AAAA;;AACN,YAAI,KAAKJ,IAAL,CAAUK,YAAV,IAA0B,KAAKL,IAAL,CAAUK,YAAV,CAAuBC,QAAvB,CAAgCC,YAA9D,EAA4E;AACxE,iBAAKP,IAAL,CAAUK,YAAV,CAAuBC,QAAvB,CAAgCE,mBAAhC;AACH;AACD,YAAI,KAAKR,IAAL,CAAUS,WAAV,IAAyB,CAAC,KAAKC,oBAAnC,EAAyD;AACrD,iBAAKV,IAAL,CAAUS,WAAV,CAAsBE,YAAtB;AACH;AACD,YAAI,KAAKD,oBAAT,EAA+B;AAC3B,iBAAKE,UAAL,CAAgB,KAAKF,oBAArB;AACA,iBAAKA,oBAAL,GAA4B,IAA5B;AACH;AACD,YAAMG,kBAAkB,GAAxB;AACA,aAAKH,oBAAL,GAA4B,YAAM;AAC9B,kBAAKA,oBAAL,GAA4B,IAA5B;AACA,gBAAIzB,GAAG6B,GAAH,CAAOC,QAAP,IAAmB,OAAOC,gBAAP,KAA6B,UAApD,EAAgE;AAC5D;AACH,aAFD,MAEO;AACH,oBAAI,MAAKhB,IAAL,CAAUS,WAAd,EAA2B;AACvB,0BAAKT,IAAL,CAAUS,WAAV,CAAsBQ,YAAtB;AACH;AACJ;AACD,gBAAMrB,kBAAkBH,QAAQ,iBAAR,CAAxB;AACAG,4BAAgBsB,qBAAhB;AACH,SAXD;AAYA,YAAIjC,GAAG6B,GAAH,CAAOC,QAAP,IAAmB,OAAOC,gBAAP,KAA6B,UAApD,EAAgE;AAC5D,iBAAKN,oBAAL;AACH,SAFD,MAEO;AACH,iBAAKS,YAAL,CAAkB,KAAKT,oBAAvB,EAA6CG,eAA7C;AACH;AACJ;AAlDI,CAAT","file":"BackToLobby.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/gui","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        lobbySceneName: \"lobby\",\n    },\n    onLoad() {\n        const loadConfigAsync = require('loadConfigAsync');\n        const {LOGIN_IFRAME} = loadConfigAsync.getConfig();\n        if (LOGIN_IFRAME) {\n            const gameCommonUtils = require('gameCommonUtils');\n            const isEnableBtn = gameCommonUtils.checkConditionCloseGameIframe();\n            if (!isEnableBtn) {\n                const button = this.node.getChildByName('Button');\n                if (button) {\n                    button.active = false;\n                }\n            }\n        } else {\n            this.node.on(\"BACK_TO_LOBBY\",this.trigger,this);\n        }\n    },\n    trigger() {\n        if (this.node.mainDirector && this.node.mainDirector.director.waitingScene) {\n            this.node.mainDirector.director.showWaitingCutScene();\n        }\n        if (this.node.soundPlayer && !this._backToLobbyCallback) {\n            this.node.soundPlayer.playSFXClick();\n        }\n        if (this._backToLobbyCallback) {\n            this.unschedule(this._backToLobbyCallback);\n            this._backToLobbyCallback = null;\n        }\n        const delaySoundClick = 0.1;\n        this._backToLobbyCallback = () => {\n            this._backToLobbyCallback = null;\n            if (cc.sys.isNative && typeof(closeCreatorGame) === 'function') {\n                //\n            } else {\n                if (this.node.soundPlayer) {\n                    this.node.soundPlayer.stopAllAudio();\n                }\n            }\n            const gameCommonUtils = require('gameCommonUtils');\n            gameCommonUtils.handleCloseGameIframe();\n        };\n        if (cc.sys.isNative && typeof(closeCreatorGame) === 'function') {\n            this._backToLobbyCallback();\n        } else {\n            this.scheduleOnce(this._backToLobbyCallback, delaySoundClick);\n        }\n    },\n});"]}