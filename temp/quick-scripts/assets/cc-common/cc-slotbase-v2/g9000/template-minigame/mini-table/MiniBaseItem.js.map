{"version":3,"sources":["MiniBaseItem.js"],"names":["cc","Class","extends","Component","properties","staticNode","Node","symbolNode","labelScore","spriteSymbols","default","type","SpriteFrame","onLoad","node","itemController","isOpen","mapValue","disableClick","bind","enableClick","showScore","start","onClickItem","e","isAutoTrigger","clickItemEvent","Event","EventCustom","setUserData","dispatchEvent","playAnimClick","tweenClick","tween","repeatForever","by","position","v2","playAnimOpen","value","callback","delay","call","stop","opacity","indexSprite","getComponent","Sprite","spriteFrame","Label","string","setScore","active","Button","interactable","resetItem"],"mappings":"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","file":"MiniBaseItem.js","sourceRoot":"../../../../../../../../assets/cc-common/cc-slotbase-v2/g9000/template-minigame/mini-table","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        staticNode: cc.Node,\n        symbolNode: cc.Node,\n        labelScore: cc.Node,\n        spriteSymbols: {\n            default: [],\n            type: cc.SpriteFrame\n        },\n    },\n\n    onLoad() {\n        this.node.itemController = this;\n        this.node.isOpen = false;\n        this.mapValue = {\n            100: 1,\n            200: 2,\n            400: 3,\n        };\n        this.node.disableClick = this.disableClick.bind(this);\n        this.node.enableClick = this.enableClick.bind(this);\n        this.node.showScore = this.showScore.bind(this);\n    },\n\n    start() {\n        // effect idle\n    },\n\n    onClickItem(e, isAutoTrigger = false) {\n        this.clickItemEvent = new cc.Event.EventCustom('CLICK_ITEM', true);\n        this.clickItemEvent.setUserData({isAutoTrigger});\n        this.node.dispatchEvent(this.clickItemEvent);\n    },\n\n    /**\n     * @shaking_node\n     * @override-for-change-anim\n     **/\n    playAnimClick() {\n        if (!this.tweenClick) {\n            this.tweenClick = cc.tween(this.node)\n                .repeatForever(\n                    cc.tween(this.node)\n                        .by(0.02, {position: cc.v2(-10, 0)})\n                        .by(0.02, {position: cc.v2(10, 0)})\n                        .by(0.02, {position: cc.v2(10, 0)})\n                        .by(0.02, {position: cc.v2(-10, 0)})\n                );\n        }\n        this.tweenClick.start();\n    },\n\n    /**\n     * @override-for-implement-anim\n     * just hide static and show symbol\n     **/\n    playAnimOpen(value, callback) {\n        this.node.isOpen = true;\n        cc.tween(this.node)\n            .delay(0.5)\n            // tat rung\n            .call(() => {\n                // stop shaking\n                if (this.tweenClick)\n                    this.tweenClick.stop();\n\n                this.staticNode.opacity = 0;\n                let indexSprite = this.mapValue[value];\n                this.symbolNode.getComponent(cc.Sprite).spriteFrame = this.spriteSymbols[indexSprite];\n                this.symbolNode.opacity = 255;\n            })\n            // show ket qua\n            .call(() => {\n                this.showScore(value);\n            })\n            .delay(0.5)\n            .call(() => {\n                if (callback && typeof callback === 'function') {\n                    callback();\n                }\n            })\n            .start();\n    },\n\n    showScore(value) {\n        this.labelScore.getComponent(cc.Label).string = 'x' + (value || 0);\n    },\n\n    setScore(value) {\n        this.symbolNode.active = false;\n        this.labelScore.getComponent(cc.Label).string = 'x' + (value || 0);\n        this.labelScore.opacity = 255;\n    },\n\n    enableClick() {\n        this.node.getComponent(cc.Button).interactable = true;\n    },\n\n    disableClick() {\n        this.node.getComponent(cc.Button).interactable = false;\n    },\n\n    resetItem() {\n        this.symbolNode.opacity = 0;\n        this.staticNode.opacity = 255;\n        this.node.opacity = 255;\n        this.node.isOpen = false;\n        this.labelScore.getComponent(cc.Label).string = \"\";\n        this.enableClick();\n    }\n\n});\n"]}