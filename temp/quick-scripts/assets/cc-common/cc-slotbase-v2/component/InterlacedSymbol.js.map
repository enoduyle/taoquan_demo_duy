{"version":3,"sources":["InterlacedSymbol.js"],"names":["require","changeParent","formatMoney","STATE","cc","Enum","INIT","STARTSPIN","SPEEDUP","SPINNING","SPEEDDOWN","ONSTOP","SETRESULT","STOPPED","GOTRESULT","RANDOM_PU","STOPEFFECT","NONE","NEAR_WIN_TOP","NEAR_MISS_TOP","NEAR_WIN_BOT","NEAR_MISS_BOT","Class","extends","Component","properties","display","Node","static","anim","sp","Skeleton","text","Label","align","Widget","onLoad","maskParent","node","parent","sprite","getComponentInChildren","Sprite","init","config","startSpeed","acceleration","maxSpeed","speedToStop","symbolList","stopOffset","tableSpeed","powerUpSprite","powerUpSymbol","upgradeSprite","speedToStopWithEffect","applyColorMask","matrixLevel","start","cachedPosition","position","y","SYMBOL_HEIGHT","opacity","scrollOffset","state","currentSpeed","stopSpinPosY","randomTexture","list","forceDiff","symbolNameList","Object","keys","Math","floor","random","length","spriteFrame","name","setSprite","updateAlignment","setState","setIndex","index","getIndex","startSpin","delay","movingOffsetY","revolveExtentCount","runAction","sequence","delayTime","callFunc","result","setParentNode","mask","unmask","unmaskParent","stopSpin","symbol","effect","stopEffect","revolve","indexOf","error","addOffsetForEffect","parseInt","update","dt","onFinishSpin","runEffectEnd","effectTime","delayEffect","moveTo","x","unMaskSymbol","onSymbolFinishSpin","setSpeed","speed","setParent","setPosition","fillSymbol","callback","playAnimation","moveBy","changeSpriteRandomMode","onFinishRandomSprite","powerUpSpinResult","powerUpSpinFinishCb","spinPowerUp","active","randomTimeFrame","randomTimeCount","randomRunTime","stopSpinPowerUp","scaleTo","getCurrentResult","getPosition","convertToWorldSpaceAR","reset","level","setKyloSymbol","displayBonus","data","string","winAmount","playEffectFillIn","dispatchEvent","Event","EventCustom","playEffectFlyFrom","target","v3","convertToNodeSpaceAR","tween","to","call","playAnimFinish","evt","detail","hide","setAnimation","addAnimation","color_mask","v4","getComponent","getMaterial","setProperty"],"mappings":"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","file":"InterlacedSymbol.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/component","sourcesContent":["\n\nconst {changeParent} = require(\"utils\");\nconst {formatMoney} = require('utils');\n\nconst STATE = cc.Enum({\n    INIT: 0,\n    STARTSPIN: 1,\n    SPEEDUP:2,\n    SPINNING: 3,\n    SPEEDDOWN: 4,\n    ONSTOP: 5,\n    SETRESULT: 6,\n    STOPPED: 7,\n    GOTRESULT: 8,\n    RANDOM_PU: 9,\n});\n\nconst STOPEFFECT = cc.Enum({\n    NONE: 0,\n    NEAR_WIN_TOP: 1,\n    NEAR_MISS_TOP: 2,\n    NEAR_WIN_BOT: 3,\n    NEAR_MISS_BOT: 4,\n});\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        display: cc.Node,\n        static: cc.Node,\n        anim: sp.Skeleton,\n        text: cc.Label,\n        align: cc.Widget,\n    },\n\n    onLoad()\n    {\n        this.maskParent = this.node.parent;\n        this.sprite = this.display.getComponentInChildren(cc.Sprite);\n    },\n\n    init(config)\n    {\n        //TODO move in to config\n        this.startSpeed = config.startSpeed; //1200,\n        this.acceleration = config.acceleration;//: 600,\n        this.maxSpeed = config.maxSpeed;//: 1200,\n        this.speedToStop = config.speedToStop;//: 600,       \n        this.symbolList = config.symbolList; //[cc.SpriteFrame],\n        this.stopOffset = config.stopOffset;//: 30,\n        this.tableSpeed = config.tableSpeed;\n        this.powerUpSprite = config.powerUpSprite;\n        this.powerUpSymbol = config.powerUpSymbol;\n        this.upgradeSprite = config.upgradeSprite;\n        this.speedToStopWithEffect = config.speedToStopWithEffect;\n        this.applyColorMask(config.matrixLevel);\n    },\n\n    start()\n    {\n        this.cachedPosition = this.node.position;\n        this.display.y = this.node.config.SYMBOL_HEIGHT;\n        this.display.opacity = 255;\n        this.scrollOffset = this.node.config.SYMBOL_HEIGHT;\n        this.state = STATE.INIT;\n        this.currentSpeed = this.startSpeed;\n        this.stopSpinPosY = 0;\n    },\n\n    randomTexture(list, forceDiff = false)\n    {\n        let symbolNameList = Object.keys(list);\n        let sprite = list[symbolNameList[Math.floor(Math.random()*symbolNameList.length)]];\n        while (forceDiff && (!sprite || (this.sprite.spriteFrame && sprite.name == this.sprite.spriteFrame.name)))\n            sprite = list[symbolNameList[Math.floor(Math.random()*symbolNameList.length)]];\n        this.setSprite(sprite);\n    },\n\n    setSprite(spriteFrame)\n    {\n        this.sprite.spriteFrame = spriteFrame;\n        this.align.updateAlignment();\n    },\n\n    setState(state)\n    {\n        this.state = state;\n    },\n\n    setIndex(index)\n    {\n        this.index = index;\n    },\n\n    getIndex()\n    {\n        return this.index;\n    },\n\n    startSpin(delay=0)\n    {\n        if (this.state != STATE.GOTRESULT)\n        {\n            this.movingOffsetY = 0;\n            this.revolveExtentCount = 0;\n            this.randomTexture(this.symbolList);\n            this.setState(STATE.STARTSPIN);\n            this.node.runAction(cc.sequence(cc.delayTime(delay), /*cc.moveBy(0.2, 0, 25), cc.moveBy(0.1, 0, -25),*/ cc.callFunc(()=>{\n                this.setState(STATE.SPEEDUP);\n                this.result = null;\n            })));\n            return 1;\n        }\n        return 0;\n    },\n\n    setParentNode(mask, unmask)\n    {\n        this.maskParent = mask;\n        this.unmaskParent = unmask;\n    },\n\n    stopSpin(symbol, delay=0, effect=0)\n    {\n        if (this.state != STATE.GOTRESULT)\n        {\n            this.revolveExtentCount = 0;\n            this.node.runAction(cc.sequence(cc.delayTime(delay), cc.callFunc(()=>{\n                this.result = symbol;\n                this.stopEffect = effect;\n                if (this.result && this.result != 0 && this.stopEffect == STOPEFFECT.NEAR_WIN_TOP)\n                {\n                    this.stopEffect = STOPEFFECT.NEAR_MISS_TOP;\n                }\n                    \n                if (!this.result && this.stopEffect == STOPEFFECT.NEAR_MISS_TOP)\n                {\n                    this.stopEffect = STOPEFFECT.NEAR_WIN_TOP;\n                }\n            })));\n        }\n    },\n\n    revolve()\n    {\n        if (this.state == STATE.SETRESULT || this.state == STATE.ONSTOP)\n        {\n            this.setState(STATE.ONSTOP);\n            if (this.powerUpSymbol.indexOf(this.result) >= 0)\n            {\n                this.setSprite(this.symbolList['o']);\n                this.display.y = this.node.config.SYMBOL_HEIGHT;\n                this.scrollOffset = this.node.config.SYMBOL_HEIGHT;\n                this.stopSpinPosY = 0;\n            }\n            else\n            if (this.symbolList[this.result])\n            {\n                this.setSprite(this.symbolList[this.result]);\n                this.display.y = this.node.config.SYMBOL_HEIGHT;\n                this.scrollOffset = this.node.config.SYMBOL_HEIGHT;\n                this.stopSpinPosY = 0;\n            }\n            else\n            {\n                if (this.result != 0)\n                    cc.error(\"Can't find symbol, should recheck symbol list\" + this.result);\n                    \n                this.randomTexture(this.symbolList);\n                this.display.y = this.node.config.SYMBOL_HEIGHT * 2;\n                this.scrollOffset = this.node.config.SYMBOL_HEIGHT * 2;\n                this.stopSpinPosY = this.node.config.SYMBOL_HEIGHT;\n            }\n            if (this.stopEffect)\n            {\n                this.currentSpeed = 30;\n                this.scrollOffset = this.node.config.SYMBOL_HEIGHT;\n            }\n            this.addOffsetForEffect();\n        }\n        else\n        {\n            if (this.result)\n            {\n                this.revolveExtentCount += 1;\n            }\n            this.randomTexture(this.symbolList);\n            this.display.y = this.node.config.SYMBOL_HEIGHT;\n            this.scrollOffset = this.node.config.SYMBOL_HEIGHT;\n        }\n    },\n\n    addOffsetForEffect()\n    {\n        switch (parseInt(this.stopEffect))\n        {\n            case STOPEFFECT.NEAR_WIN_TOP:\n                {\n                    this.stopSpinPosY -= this.node.config.SYMBOL_HEIGHT/2;\n                }\n                break;\n            case (STOPEFFECT.NEAR_MISS_TOP):\n                {\n                    this.stopSpinPosY += this.node.config.SYMBOL_HEIGHT/2;\n                }\n                break;\n            case (STOPEFFECT.NEAR_MISS_BOT):\n                {\n                    this.stopSpinPosY += (this.node.config.SYMBOL_HEIGHT)*1.5;\n                }\n                break;\n        }\n    },\n\n    update(dt)\n    {\n        dt = dt*this.tableSpeed;\n        switch (this.state)\n        {\n            case STATE.SPEEDUP:\n                if (this.currentSpeed < this.maxSpeed)\n                {\n                    this.currentSpeed += this.acceleration * dt;\n                }\n                else\n                {\n                    this.setState(STATE.SPINNING);\n                }\n                break;\n\n            case STATE.SPINNING:\n                if (this.result != null)\n                {\n                    if (this.stopEffect == STOPEFFECT.NONE || this.revolveExtentCount >= 5)\n                        this.setState(STATE.SPEEDDOWN);\n                }\n                break;\n\n            case STATE.SPEEDDOWN:\n                if ((this.stopEffect == STOPEFFECT.NONE) && (this.currentSpeed > this.speedToStop))\n                {\n                    this.currentSpeed -= this.acceleration * dt;\n                }\n                else if ((this.stopEffect != STOPEFFECT.NONE) && (this.currentSpeed > this.speedToStopWithEffect))\n                {\n                    this.currentSpeed -= 150 * dt;\n                }\n                else\n                {\n                    this.setState(STATE.SETRESULT);\n                }\n                break;\n            case STATE.ONSTOP:\n                {\n                    if (this.display.y <= this.stopSpinPosY)\n                    {\n                        this.setState(STATE.STOPPED);\n                        this.movingOffsetY = this.stopSpinPosY - this.display.y;\n                        //this.display.y = this.stopSpinPosY;\n                        this.scrollOffset = this.stopSpinPosY;\n                        this.onFinishSpin();\n                    }\n                }\n                break;\n            case STATE.RANDOM_PU:\n                break;\n        }\n\n        if (this.state > STATE.STARTSPIN && this.state < STATE.STOPPED)\n        {\n            this.scrollOffset -= this.currentSpeed * dt;\n            this.display.y = this.scrollOffset;\n            if (this.display.y <= -this.node.config.SYMBOL_HEIGHT)\n            {\n                this.revolve();\n            }\n        }\n    },\n\n    runEffectEnd()\n    {\n        const effectTime = 0.08;\n        const delayEffect = 0.2;\n        if (this.stopEffect == STOPEFFECT.NEAR_WIN_TOP)\n        {\n            this.display.runAction(cc.sequence(cc.delayTime(delayEffect),\n                cc.moveTo(effectTime, this.display.x, this.stopSpinPosY + this.node.config.SYMBOL_HEIGHT/2),\n                cc.callFunc(()=>{\n                    this.unMaskSymbol();\n                    this.onSymbolFinishSpin();\n                }))/*.easing(cc.easeBounceInOut(effectTime)\n                )*/);\n        }\n        if (this.stopEffect == STOPEFFECT.NEAR_MISS_TOP)\n        {\n            this.display.runAction(cc.sequence(cc.delayTime(delayEffect),\n                cc.moveTo(effectTime, this.display.x, this.stopSpinPosY - this.node.config.SYMBOL_HEIGHT/2),\n                cc.callFunc(()=>{\n                    this.unMaskSymbol();\n                    this.onSymbolFinishSpin();\n                }))/*.easing(cc.easeBounceInOut(effectTime)\n                )*/);\n        }\n    },\n\n    setSpeed(speed)\n    {\n        this.tableSpeed = speed;\n    },\n\n    unMaskSymbol()\n    {\n        if (this.result && this.result != 0)\n        {\n            //changeParent(this.node, this.unmaskParent);\n            let cachedPosition = this.node.position;\n            this.node.setParent(this.unmaskParent);\n            this.node.setPosition(cachedPosition);\n        }\n    },\n\n    fillSymbol(symbol, delay = 0, callback = null)\n    {\n        if (symbol && symbol != \"0\")\n        {\n            this.setState(STATE.GOTRESULT);\n            let spriteFrame = \"\";\n            if (this.symbolList[symbol])\n            {\n                //play effect set sprite here\n                spriteFrame = this.symbolList[symbol];\n            }\n            else if (this.powerUpSprite[symbol])\n            {\n                spriteFrame = this.powerUpSprite[symbol];\n            }\n            else if (this.upgradeSprite[symbol])\n            {\n                spriteFrame = this.upgradeSprite[symbol];\n            }\n            this.node.runAction(cc.sequence(cc.delayTime(delay), cc.callFunc(()=>{\n                this.result = symbol;\n                this.setSprite(spriteFrame);\n                this.display.y = 0;\n                this.unMaskSymbol();\n                //this.onSymbolFinishSpin(false);\n                if (symbol == \"2\") {\n                    this.playAnimation();\n                }\n                callback && callback();\n            })));\n        }\n    },\n\n    onFinishSpin()\n    {\n        if (this.stopEffect)\n        {\n            this.runEffectEnd();\n        }\n        else\n        {\n            this.display.runAction(cc.sequence(cc.moveBy(0.2, 0, -this.stopOffset),\n                cc.moveBy(0.2, 0, this.stopOffset + this.movingOffsetY),\n                //cc.moveBy(0.03, 0, 10),\n                cc.callFunc(()=>{\n                    this.unMaskSymbol();\n                }),\n                cc.callFunc(()=>{\n                    this.onSymbolFinishSpin();\n                })));\n        }\n        if (this.result && this.result != 0)\n        {\n            this.setState(STATE.GOTRESULT);\n        }\n        this.currentSpeed = this.startSpeed;\n    },\n\n    changeSpriteRandomMode()\n    {\n        this.randomTexture(this.powerUpSprite, true); \n    },\n\n    onFinishRandomSprite()\n    {\n        this.setSprite(this.powerUpSprite[this.powerUpSpinResult]);\n        this.powerUpSpinResult = 0;\n        this.powerUpSpinFinishCb && this.powerUpSpinFinishCb();\n        this.setState(STATE.STOPPED);\n    },\n    \n    spinPowerUp()\n    {\n        //TODO: move it to config\n        this.display.active = false;\n        this.randomTimeFrame = 0.5;\n        this.randomTimeCount = this.randomTimeFrame;\n        this.randomRunTime = 10;\n        this.setState(STATE.RANDOM_PU);\n    },\n\n    stopSpinPowerUp(result, callback)\n    {\n        this.display.active = true;\n        this.fillSymbol(result);\n        this.display.runAction(cc.sequence(cc.scaleTo(0.2, 1.3), cc.delayTime(0.5), cc.scaleTo(0.2, 1), cc.callFunc(()=>{\n            callback && callback();\n        })));\n    },\n\n    getCurrentResult()\n    {\n        return this.result || 0;\n    },\n\n    getPosition()\n    {\n        return this.node.parent.convertToWorldSpaceAR(this.node.position);\n    },\n\n    reset()\n    {\n        this.level = 0;\n        this.static.active = true;\n        this.display.active = true;\n        this.anim.node.active = false;\n        this.text.node.active = false;\n        this.setState(STATE.INIT);\n        this.display.y = this.node.config.SYMBOL_HEIGHT;\n        this.scrollOffset = this.node.config.SYMBOL_HEIGHT;\n        this.currentSpeed = this.startSpeed;\n        this.stopSpinPosY = 0;\n        changeParent(this.node, this.maskParent);\n        this.node.setPosition(this.cachedPosition);\n    },\n\n    //starwar only\n    setKyloSymbol(sprite)\n    {\n        this.symbolList[\"2\"] = sprite;\n    },\n\n    displayBonus(data)\n    {\n        this.setSprite(this.upgradeSprite[\"PU44\"]);\n        this.display.y = 0;\n        this.text.string = formatMoney(data.winAmount);\n        this.text.node.active = true;\n    },\n\n    playEffectFillIn()\n    {\n        this.node.dispatchEvent( new cc.Event.EventCustom('PLAY_EXPLORE_EFFECT', true) );\n        this.playAnimation();\n    },\n\n    playEffectFlyFrom(position)\n    {\n        let target = cc.v3(0,0,0);\n        this.display.position = this.display.parent.convertToNodeSpaceAR(position);\n\n        cc.tween(this.display)\n            .to(0.8, { position: target, opacity: 255})\n            .call(()=>{\n                this.node.dispatchEvent( new cc.Event.EventCustom('PLAY_EXPLORE_EFFECT', true) );\n                this.playAnimation();\n            })\n            .start();\n    },\n\n    onSymbolFinishSpin(playAnimFinish = true)\n    {\n        const evt = new cc.Event.EventCustom('CELL_STOP', true);\n        evt.detail = {symbol: this.result};\n        this.node.dispatchEvent( evt );\n        if (this.result == \"2\" && playAnimFinish)\n        {\n            this.playAnimation();\n        }\n    },\n\n    hide()\n    {\n        this.display.active = false;\n    },\n\n    playAnimation()\n    {\n        this.static.active = false;\n        this.anim.node.active = true;\n        this.anim.setAnimation(0, \"Effect\");\n        this.anim.addAnimation(0, \"Frame1\", true);\n    },\n\n    applyColorMask(level) {\n        if(level == 0) {\n            this.color_mask = cc.v4(1.0, 1.0, 1.0, 0.0);\n        } else if(level == 1) {\n            this.color_mask = cc.v4(1.0, 0.196, 0.196, 1.0);\n        } else {\n            this.color_mask = cc.v4(0.9, 0.1372, 1.0, 1.0);           \n        }\n        if(this.anim.getComponent(sp.Skeleton)) {\n            this.anim.getComponent(sp.Skeleton).getMaterial(0).setProperty('color_mask', this.color_mask);\n        }\n        this.level = level;\n    }\n});\n"]}