{"version":3,"sources":["../../../../../../../assets/cc-common/cc-slotbase-v2/slotGame/BetHistory/assets/cc-common/cc-slotbase-v2/slotGame/BetHistory/SlotHistorySummary4LBase.js"],"names":["require","formatMoney","arrayTypeJackpot","cc","Class","extends","properties","normalName","freeGameName","topUpName","updateData","data","node","opacity","resetLabelTotalDetail","sessionId","totalBetAmount","betDenom","totalWinAmount","freeGameTotal","totalBonusWinAmount","totalFreeWinAmount","selectedOption","totalJpWinAmount","scatterAmount","jpInfo","initAllJackpot","substring","length","mBetAmount","normalWin","sessionLabel","active","string","totalBetLabel","detailTotalBetLabel","totalWinLabel","summaryLabel","normalSummaryLabel","jackpotNormal","detailNormalSummaryLabel","getTypeJackpot","id","amt","bonusWin","jackpotBonus","indexTypeJP","bonusSummaryLabel","freeWinTotal","freeSummaryLabel","detailFreeSummaryLabel","freeWin","amtA1","amtA2","amtA","totalScatterWinAmount","jackpotFreeList","i","scheduleOnce"],"mappings":"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","file":"SlotHistorySummary4LBase.js","sourceRoot":"../../../../../../../assets/cc-common/cc-slotbase-v2/slotGame/BetHistory","sourcesContent":["const { formatMoney } = require('utils');\nconst arrayTypeJackpot = [\"MINI\",\"MINOR\",\"MAJOR\",\"GRAND\"];\ncc.Class({\n    extends: require(\"SlotHistorySummary\"),\n\n    properties: {\n        normalName : \"Quay Thường\",\n        freeGameName : \"FreeGame\",\n        topUpName  : \"Topup\",\n    },\n    \n    updateData(data) {\n        this.node.opacity = 0;\n        this.resetLabelTotalDetail();\n\n        let { sessionId, totalBetAmount, betDenom, totalWinAmount, freeGameTotal,\n            totalBonusWinAmount, totalFreeWinAmount, selectedOption, totalJpWinAmount, scatterAmount, jpInfo } = data;\n\n        this.initAllJackpot(jpInfo);\n\n        sessionId = data.sessionId.substring(data.sessionId.length - 8, data.sessionId.length);\n\n        let mBetAmount = formatMoney(totalBetAmount / betDenom);\n        let normalWin = formatMoney(totalWinAmount - (totalFreeWinAmount || 0) - (totalJpWinAmount || 0));\n        \n        totalBetAmount = formatMoney(totalBetAmount);\n        totalWinAmount = formatMoney(totalWinAmount);\n\n        this.sessionLabel.node.active = true;\n        this.sessionLabel.string = `Phiên #${sessionId}`;\n        // left pannel\n        this.totalBetLabel.node.active = true;\n        this.totalBetLabel.string = `Tổng cược: ${totalBetAmount}`;\n\n        this.detailTotalBetLabel.node.active = true;\n        this.detailTotalBetLabel.string = `- Mua: ${mBetAmount}`;\n        this.detailTotalBetLabel.string += \"\\n\" + `- Cược: x${betDenom}`;\n\n        this.totalWinLabel.node.active = true;\n        this.totalWinLabel.string = `Tổng thắng: ${totalWinAmount}`;\n\n        // right pannel\n        this.summaryLabel.node.active = true;\n        this.summaryLabel.string = \"Chi tiết:\";\n\n        this.normalSummaryLabel.node.active = true;\n        this.normalSummaryLabel.string = `- Quay thường: ${normalWin}`;\n\n        if (this.jackpotNormal) {\n            this.detailNormalSummaryLabel.node.active = true;\n            this.detailNormalSummaryLabel.string += \"+ Thắng hũ: \" + arrayTypeJackpot[this.getTypeJackpot(this.jackpotNormal.id)] + \" \" +\n                            formatMoney(this.jackpotNormal.amt) + \"\\n\";\n        }    \n\n        let bonusWin = totalBonusWinAmount || 0;\n        if (bonusWin > 0) {\n            if (this.jackpotBonus) {\n                let indexTypeJP = this.getTypeJackpot(this.jackpotBonus.id);\n                this.bonusSummaryLabel.node.active = true;\n                this.bonusSummaryLabel.string = `- Chọn hũ: ${arrayTypeJackpot[indexTypeJP]}`;\n                this.bonusSummaryLabel.string += \" \" + formatMoney(bonusWin);\n            }\n        }\n\n        if (totalFreeWinAmount) {\n            let freeWinTotal = totalFreeWinAmount || 0;\n            \n            this.freeSummaryLabel.node.active = true;\n            this.detailFreeSummaryLabel.node.active = true;\n\n            this.freeSummaryLabel.string = \"- Thưởng đặc biệt: \";\n\n            // detail free\n            if (selectedOption && selectedOption == 1) {\n                //FREE 8\n                this.detailFreeSummaryLabel.string += \"+ Chọn \" + this.freeGameName + \". \\n\";\n                this.detailFreeSummaryLabel.string += \"+ Số lần quay: \" + freeGameTotal + \"\\n\";\n            } else if (selectedOption && selectedOption == 2) {\n                //TOPUP\n                this.detailFreeSummaryLabel.string += \"+ Chọn \" + this.topUpName + \". \\n\";\n                this.detailFreeSummaryLabel.string += \"+ Số lần quay: \" + freeGameTotal + \"\\n\";\n            }\n            //scatter win\n            \n            let freeWin = freeWinTotal;\n            if (scatterAmount) {\n                let {amtA1, amtA2, amtA} = scatterAmount;\n                let totalScatterWinAmount = (amtA1 || 0) + (amtA2 || 0) + (amtA || 0);\n                this.detailFreeSummaryLabel.string += \"+ Thắng ngọc: \" + formatMoney(totalScatterWinAmount) + \"\\n\";\n                freeWin = freeWinTotal - totalScatterWinAmount;\n            }\n\n            if (selectedOption && selectedOption == 1) {\n                this.detailFreeSummaryLabel.string += \"+ Thắng Free: \"+ formatMoney(freeWin) + \"\\n\";\n            }\n            if (this.jackpotFreeList && this.jackpotFreeList.length > 0) {\n                for (let i =0; i < this.jackpotFreeList.length; i++) {\n                    let indexTypeJP = this.getTypeJackpot(this.jackpotFreeList[i].id);\n                    if (indexTypeJP >= 0) {\n                        this.detailFreeSummaryLabel.string += \"+ Thắng hũ: \" + arrayTypeJackpot[indexTypeJP] + \" \" +\n                            formatMoney(this.jackpotFreeList[i].amt) + \"\\n\";\n                    }\n                }\n            }\n        }\n        this.node.opacity = 1;\n        this.scheduleOnce(() =>{\n            this.node.opacity = 255;\n        }, 0.02);\n    },\n});\n"]}