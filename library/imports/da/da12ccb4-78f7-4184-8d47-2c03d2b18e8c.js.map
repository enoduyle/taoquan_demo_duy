{"version":3,"sources":["../../../../../../assets/cc-common/cc-slotbase-v2/component/assets/cc-common/cc-slotbase-v2/component/CloudMovingControl.js"],"names":["cc","Class","extends","Component","properties","clouds","Node","minSpeed","maxSpeed","leftBorderX","rightBorderX","minPosY","maxPosY","playOnStart","onLoad","node","on","playEffect","stopEffect","start","i","length","speed","Math","random","_isPlaying","update","dt","cloud","x","y"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAQ,CAACL,GAAGM,IAAJ,CADA;AAERC,kBAAU,EAFF;AAGRC,kBAAU,GAHF;AAIRC,qBAAa,CAAC,IAJN;AAKRC,sBAAc,IALN;AAMRC,iBAAS,CAAC,GANF;AAORC,iBAAS,GAPD;AAQRC,qBAAa;AARL,KAHP;;AAcL;;AAEAC,UAhBK,oBAgBK;AACN,aAAKC,IAAL,CAAUC,EAAV,CAAa,aAAb,EAA4B,KAAKC,UAAjC,EAA6C,IAA7C;AACA,aAAKF,IAAL,CAAUC,EAAV,CAAa,aAAb,EAA4B,KAAKE,UAAjC,EAA6C,IAA7C;AACH,KAnBI;AAqBLC,SArBK,mBAqBI;AACL,aAAI,IAAIC,IAAE,CAAV,EAAaA,IAAE,KAAKf,MAAL,CAAYgB,MAA3B,EAAmCD,GAAnC,EAAuC;AACnC,iBAAKf,MAAL,CAAYe,CAAZ,EAAeE,KAAf,GAAuB,CAACC,KAAKC,MAAL,KAAc,GAAd,GAAmB,CAAnB,GAAqB,CAAC,CAAvB,KAA4BD,KAAKC,MAAL,MAAe,KAAKhB,QAAL,GAAgB,KAAKD,QAApC,IAAgD,KAAKA,QAAjF,CAAvB;AACH;AACD,YAAG,KAAKM,WAAR,EAAoB;AAChB,iBAAKI,UAAL;AACH;AACJ,KA5BI;AA8BLA,cA9BK,wBA8BO;AACR,aAAKQ,UAAL,GAAkB,IAAlB;AACH,KAhCI;AAkCLP,cAlCK,wBAkCO;AACR,aAAKO,UAAL,GAAkB,KAAlB;AACA,aAAI,IAAIL,IAAE,CAAV,EAAaA,IAAE,KAAKf,MAAL,CAAYgB,MAA3B,EAAmCD,GAAnC,EAAuC;AACnC,iBAAKf,MAAL,CAAYe,CAAZ,EAAeE,KAAf,GAAuB,CAACC,KAAKC,MAAL,KAAc,GAAd,GAAmB,CAAnB,GAAqB,CAAC,CAAvB,KAA4BD,KAAKC,MAAL,MAAe,KAAKhB,QAAL,GAAgB,KAAKD,QAApC,IAAgD,KAAKA,QAAjF,CAAvB;AACH;AACJ,KAvCI;AAyCLmB,UAzCK,kBAyCGC,EAzCH,EAyCO;AACR,YAAG,KAAKF,UAAR,EAAmB;AACf,iBAAI,IAAIL,IAAE,CAAV,EAAaA,IAAE,KAAKf,MAAL,CAAYgB,MAA3B,EAAmCD,GAAnC,EAAuC;AACnC,oBAAMQ,QAAQ,KAAKvB,MAAL,CAAYe,CAAZ,CAAd;AACAQ,sBAAMC,CAAN,IAAWD,MAAMN,KAAN,GAAYK,EAAvB;;AAEA,oBAAGC,MAAMC,CAAN,GAAQ,KAAKnB,YAAhB,EAA6B;AACzBkB,0BAAMC,CAAN,GAAU,KAAKpB,WAAf;AACAmB,0BAAME,CAAN,GAAUP,KAAKC,MAAL,MAAe,KAAKZ,OAAL,GAAa,KAAKD,OAAjC,IAA0C,KAAKA,OAAzD;AACH,iBAHD,MAGM,IAAGiB,MAAMC,CAAN,GAAU,KAAKpB,WAAlB,EAA8B;AAChCmB,0BAAMC,CAAN,GAAU,KAAKnB,YAAf;AACAkB,0BAAME,CAAN,GAAUP,KAAKC,MAAL,MAAe,KAAKZ,OAAL,GAAa,KAAKD,OAAjC,IAA0C,KAAKA,OAAzD;AACH;AACJ;AACJ;AACJ;AAxDI,CAAT","file":"CloudMovingControl.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/component","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        clouds: [cc.Node],\n        minSpeed: 50,\n        maxSpeed: 150,\n        leftBorderX: -1200,\n        rightBorderX: 1200,\n        minPosY: -100,\n        maxPosY: 100,\n        playOnStart: true,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.node.on(\"PLAY_EFFECT\", this.playEffect, this);\n        this.node.on(\"STOP_EFFECT\", this.stopEffect, this);\n    },\n\n    start () {\n        for(let i=0; i<this.clouds.length; i++){\n            this.clouds[i].speed = (Math.random()>0.5? 1:-1)* (Math.random()*(this.maxSpeed - this.minSpeed) + this.minSpeed);\n        }\n        if(this.playOnStart){\n            this.playEffect();\n        }\n    },\n\n    playEffect(){\n        this._isPlaying = true;\n    },\n\n    stopEffect(){\n        this._isPlaying = false;\n        for(let i=0; i<this.clouds.length; i++){\n            this.clouds[i].speed = (Math.random()>0.5? 1:-1)* (Math.random()*(this.maxSpeed - this.minSpeed) + this.minSpeed);\n        }\n    },\n\n    update (dt) {\n        if(this._isPlaying){\n            for(let i=0; i<this.clouds.length; i++){\n                const cloud = this.clouds[i];\n                cloud.x += cloud.speed*dt;\n\n                if(cloud.x>this.rightBorderX){\n                    cloud.x = this.leftBorderX;\n                    cloud.y = Math.random()*(this.maxPosY-this.minPosY)+this.minPosY;\n                }else if(cloud.x < this.leftBorderX){\n                    cloud.x = this.rightBorderX;\n                    cloud.y = Math.random()*(this.maxPosY-this.minPosY)+this.minPosY;\n                }\n            }\n        }\n    },\n});\n"]}