{"version":3,"sources":["../../../../../../../assets/cc-common/cc-share-v1/common/viewComponent/assets/cc-common/cc-share-v1/common/viewComponent/betCard.js"],"names":["Points","cc","Class","extends","Component","properties","cardBG","Sprite","mainPic","cards","default","type","SpriteFrame","backBG","point","overlay","Node","init","card","isFaceUp","backStyle","spriteFrame","indexOf","handleFaceUp","updateCard","noAnim","revealUp","scaleTo","num","node","scaleX","scaleY","updatePoint","active","reveal","getContentSize","height","actionBy","skewBy","skewTo","actionTo","runAction","sequence","callFunc","delayTime","showOverlay","isActive"],"mappings":"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","file":"betCard.js","sourceRoot":"../../../../../../../assets/cc-common/cc-share-v1/common/viewComponent","sourcesContent":["\n\nconst Points = [\n    'AC', '2C', '3C', '4C', '5C', '6C', '7C', '8C', '9C', 'MC', 'JC', 'QC', 'KC',\n    'AR', '2R', '3R', '4R', '5R', '6R', '7R', '8R', '9R', 'MR', 'JR', 'QR', 'KR',\n    'AH', '2H', '3H', '4H', '5H', '6H', '7H', '8H', '9H', 'MH', 'JH', 'QH', 'KH',\n    'AB', '2B', '3B', '4B', '5B', '6B', '7B', '8B', '9B', 'MB', 'JB', 'QB', 'KB',\n];\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // nodes\n        cardBG: cc.Sprite,\n        mainPic: cc.Sprite,\n        // resources\n        cards: {\n            default: [],\n            type: cc.SpriteFrame\n        },\n        backBG: {\n            default: [],\n            type: cc.SpriteFrame\n        },\n        point: '',\n        overlay: cc.Node,\n    },\n\n    // use this for initialization\n    init (card) {\n        const {point, isFaceUp = false, backStyle = 0} = card;\n        if (point) {\n            this.mainPic.spriteFrame = this.cards[Points.indexOf(point)];\n        }\n        this.point = point;\n        this.isFaceUp = isFaceUp;\n\n        this.cardBG.spriteFrame = this.backBG[backStyle];\n\n        this.handleFaceUp();\n    },\n\n    updateCard(card, noAnim) {\n        const {point, isFaceUp = false} = card;\n        this.point = point;\n        if (point) {\n            this.mainPic.spriteFrame = this.cards[Points.indexOf(point)];\n            if (isFaceUp) {\n                this.revealUp(noAnim);\n            }\n        }else{\n            this.mainPic.spriteFrame = this.backBG[0];\n        }\n    },\n\n    scaleTo(num) {\n        this.node.scaleX = num;\n        this.node.scaleY = num;\n    },\n\n    updatePoint(point) {\n        this.point = point;\n        this.mainPic.spriteFrame = this.cards[Points.indexOf(point)];\n    },\n\n    handleFaceUp() {\n        this.mainPic.node.active = this.isFaceUp;\n    },\n\n    reveal(noAnim) {\n        this.isFaceUp = !this.isFaceUp;\n        this.mainPic.node.active = true;\n\n        if (noAnim) {\n            this.handleFaceUp();\n            return;\n        }\n\n        const {height} = this.node.getContentSize();\n        const actionBy = cc.scaleTo(0.2, 0, 1);\n        const skewBy = cc.skewTo(0.2, height/10, height/10);\n        const actionTo = cc.scaleTo(0.2, 1, 1);\n        const skewTo = cc.skewTo(0.2, 0, 0);\n\n        this.node.runAction(cc.sequence(\n            cc.callFunc(() => {\n                this.node.runAction(actionBy);\n                this.node.runAction(skewBy);\n            }),\n            cc.delayTime(0.2),\n            cc.callFunc(() => {\n                this.handleFaceUp();\n            }),\n            cc.callFunc(() => {\n                this.node.runAction(actionTo);\n                this.node.runAction(skewTo);\n            })));\n    },\n\n    revealUp(noAnim) {\n        if (!this.isFaceUp && this.point) {\n            this.reveal(noAnim);\n        }\n    },\n\n    showOverlay(isActive){\n        this.overlay.active = isActive;\n    }\n});\n"]}