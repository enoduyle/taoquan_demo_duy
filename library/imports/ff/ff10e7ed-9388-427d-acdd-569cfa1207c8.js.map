{"version":3,"sources":["../../../../../../assets/cc-taoquan-9983/scripts/table/assets/cc-taoquan-9983/scripts/table/SlotTablePayline9983.js"],"names":["NodePool","require","cc","Class","extends","properties","isFreeMode","winLineHolderNode","Node","winLinePrefab","Prefab","start","_super","node","on","showSubSymbolPayLine","hideSubSymbolPayLine","hideAllPaylines","onLoad","paylineSymbolPool","init","paylineNormalSymbol","winLinePool","usingObj","tempMatrix","subSymbolHolderNode","isValidScatter","tableFormat","config","TABLE_FORMAT","TABLE_FORMAT_FREE","setupPaylines","matrix","payLines","curentConfig","STATS","mode","paylineHolderNode","active","payLineNormals","paylinesMatrix","scatterHolderNode","bonusHolderNode","wildHolderNode","gSlotDataStore","lastEvent","subSym1","subSym2","fSubSym1","fSubSym2","count","col","reels","length","row","showSymbols","symbol","paylineSymbol","createPaylineSymbol","setSiblingIndex","currentIndex","payline","push","indexOf","opacity","reel","getObj","parent","x","getXPosition","y","showNumber","SYMBOL_HEIGHT","disableHighlight","currentCol","_createWinLine","winLine","index","startX","SYMBOL_WIDTH","data","callback","dispatchEvent","Event","EventCustom","disableHighlightNormalPaylines","forEach","child","enableHighlight","playAnimation","playAnimationSubSymbol","scheduleOnce","ANIMATION_DURATION","hideAnimationSubSymbol","addSmallSubSymbol","showNormalPaylineAllLine","symbolId","payLineSymbol","paylineMaxColumn","blinkHighlight","isSpineSymbol","_playWinLine","blinkNormalPaylineAllline","BLINK_DURATION","BLINKS","hideWinLineEffect","stopAnimation","clearPaylines","i","put","showSpecialPayline","showingPayline","paylineTime","tablePaylineInfo","emit","spine","getComponent","sp","Skeleton","animation","setAnimation","reset"],"mappings":"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","file":"SlotTablePayline9983.js","sourceRoot":"../../../../../../assets/cc-taoquan-9983/scripts/table","sourcesContent":["const NodePool = require('NodePool9983');\ncc.Class({\n    extends: require('SlotTablePaylinev2'),\n\n    properties: {\n        isFreeMode: true,\n        winLineHolderNode: cc.Node,\n        winLinePrefab: cc.Prefab,\n    },\n    start() {\n        this._super();\n        this.node.on(\"SHOW_SUB_SYMBOL_PAYLINE\",this.showSubSymbolPayLine,this);\n        this.node.on(\"HIDE_SUB_SYMBOL_PAYLINE\",this.hideSubSymbolPayLine,this);\n        this.node.on(\"HIDE_PAYLINES\",this.hideAllPaylines,this);\n    },\n\n    onLoad() {\n        this._super();\n        this.paylineSymbolPool = new NodePool('SlotSymbolPayline9983');\n        this.paylineSymbolPool.init(this.paylineNormalSymbol, 5);\n\n        this.winLinePool = new NodePool(\"WinLine9983\");\n        this.winLinePool.init(this.winLinePrefab, 12);\n\n        this.usingObj = [];\n        if (this.isFreeMode) {\n            this.tempMatrix = [\n                [-1,0,1,2],\n                [3,4,5,6],\n                [7,8,9,10],\n                [11,12,13,14],\n                [-1,15,16,17]\n            ];\n        } else {\n            this.tempMatrix = [\n                [0,1,2],\n                [3,4,5],\n                [6,7,8],\n                [9,10,11],\n                [12,13,14]\n            ];\n        }\n        this.subSymbolHolderNode = [];\n        this.isValidScatter = [true, false, false, false, false];\n        if (!this.isFreeMode) {\n            this.tableFormat = this.node.config.TABLE_FORMAT;\n        } else {\n            this.tableFormat = this.node.config.TABLE_FORMAT_FREE;\n        }\n    },\n \n    setupPaylines(matrix, payLines) {\n        this.node.curentConfig = this.node.config.STATS[this.node.mode];\n        this.paylineHolderNode.active = true;\n        this.payLineNormals = payLines;\n        this.paylinesMatrix = [];\n        this.scatterHolderNode = [];\n        this.bonusHolderNode = [];\n        this.wildHolderNode = [];\n        this.subSymbolHolderNode = [];\n        this.isValidScatter = [true, false, false, false, false];\n        const {subSym1, subSym2} = this.node.gSlotDataStore.lastEvent;\n        const {fSubSym1, fSubSym2} = this.node.gSlotDataStore.lastEvent;\n\n        let count = this.tableFormat * this.tableFormat[0];\n        for (let col = 0; col < this.node.reels.length; ++col) {\n            this.paylinesMatrix[col] = [];\n            for (let row = 0; row < this.node.reels[col].showSymbols.length; ++row) {\n                const symbol = this.node.reels[col].showSymbols[row];\n                const paylineSymbol = this.createPaylineSymbol(this.node.reels[col],symbol.symbol, col, row);\n                count--;\n                paylineSymbol.setSiblingIndex(count);\n                paylineSymbol.currentIndex = count;\n                const payline = { symbol, paylineSymbol };\n                this.paylinesMatrix[col][row] = payline;\n                if (symbol.symbol == \"A\" ) {\n                    if (col > 0) {\n                        this.isValidScatter[col] = this.isValidScatter[col - 1] == true;\n                    }\n                    this.scatterHolderNode.push(payline);\n                } else if (symbol.symbol[0] == \"K\") {\n                    this.wildHolderNode.push(payline);\n                }\n                if (subSym1 && subSym1.indexOf(this.tempMatrix[col][row]) >= 0) {\n                    this.subSymbolHolderNode.push(payline);\n                }  \n                if (subSym2 && subSym2.indexOf(this.tempMatrix[col][row]) >= 0) {\n                    this.subSymbolHolderNode.push(payline);\n                }  \n                if (fSubSym1 && fSubSym1.indexOf(this.tempMatrix[col][row]) >= 0) {\n                    this.subSymbolHolderNode.push(payline);\n                }  \n                if (fSubSym2 && fSubSym2.indexOf(this.tempMatrix[col][row]) >= 0) {\n                    this.subSymbolHolderNode.push(payline);\n                }\n            }\n        }\n        this.paylineHolderNode.opacity = 0;\n    },\n\n    createPaylineSymbol(reel, symbol, col, row) {\n        let paylineSymbol;\n        paylineSymbol = this.paylineSymbolPool.getObj();\n        this.usingObj.push(paylineSymbol);\n        paylineSymbol.parent = this.paylineHolderNode;\n        paylineSymbol.x = this.getXPosition(col);\n        paylineSymbol.y = ((reel.showNumber/2 - row - 0.5)) * this.node.config.SYMBOL_HEIGHT;\n        paylineSymbol.disableHighlight();\n        paylineSymbol.currentCol = col;\n        paylineSymbol.init(symbol);\n        this._createWinLine(paylineSymbol);\n        return paylineSymbol;\n    },\n\n    _createWinLine(paylineSymbol){\n        const winLine = this.winLinePool.getObj();\n        winLine.parent = this.winLineHolderNode;\n        winLine.x = paylineSymbol.x;\n        winLine.y = paylineSymbol.y;\n        paylineSymbol.winLine = winLine;\n        winLine.active = false;\n    },\n    getXPosition(index) {\n        let startX = -(this.tableFormat.length / 2 - 0.5) * this.node.config.SYMBOL_WIDTH;\n        return (startX + this.node.config.SYMBOL_WIDTH * index);\n    },\n\n    showSubSymbolPayLine(data,callback){\n        if (data == 0) {\n            this.node.dispatchEvent( new cc.Event.EventCustom('PLAY_SUBSYMBOL_MAJOR', true) );\n        } else if (data == 1) {\n            this.node.dispatchEvent( new cc.Event.EventCustom('PLAY_SUBSYMBOL_GRAND', true) );\n        }\n        this.paylineHolderNode.opacity = 255;\n        this.disableHighlightNormalPaylines();\n        this.subSymbolHolderNode.forEach((child) => {\n            child.symbol.enableHighlight();\n            child.symbol.playAnimation();\n            child.paylineSymbol.enableHighlight();\n            child.paylineSymbol.playAnimationSubSymbol(data);\n        });\n        this.scheduleOnce(() => {\n            this.subSymbolHolderNode.opacity = 0;\n            if (callback && typeof callback == \"function\") {\n                callback();\n            }\n        }, this.node.curentConfig.ANIMATION_DURATION);\n    },\n\n    hideSubSymbolPayLine(){\n        this.subSymbolHolderNode.forEach((child) => {\n            child.paylineSymbol.hideAnimationSubSymbol();\n            child.symbol.addSmallSubSymbol();\n        });\n    },\n\n    showNormalPaylineAllLine({payLineSymbol: symbolId, paylineMaxColumn}) {\n        this.disableHighlightNormalPaylines();\n        for (let col = 0; col < paylineMaxColumn; col++) {\n            if (this.paylinesMatrix[col] && this.paylinesMatrix[col].length) {\n                for (let row = 0; row < this.paylinesMatrix[col].length; row++) {\n                    const { symbol, paylineSymbol } = this.paylinesMatrix[col][row];\n                    if (symbol && paylineSymbol) {\n                        if (symbol.symbol == symbolId || symbol.symbol[0] == \"K\") {\n                            if (symbol.symbol[0] == \"K\") {\n                                symbol.blinkHighlight();\n                                paylineSymbol.setSiblingIndex(paylineSymbol.currentIndex || 0);\n                            } else {\n                                symbol.enableHighlight(paylineSymbol.isSpineSymbol());\n                                symbol.playAnimation();\n                                paylineSymbol.enableHighlight();\n                                paylineSymbol.setSiblingIndex(paylineSymbol.currentIndex || 0);\n                                paylineSymbol.playAnimation();\n                            }\n                            this._playWinLine(paylineSymbol);\n                        }\n                    }\n                }\n            }\n        }\n    },\n\n    blinkNormalPaylineAllline({payLineSymbol: symbolId, paylineMaxColumn}) {\n        for (let col = 0; col < paylineMaxColumn; col++) {\n            if (this.paylinesMatrix[col] && this.paylinesMatrix[col].length) {\n                for (let row = 0; row < this.paylinesMatrix[col].length; row++) {\n                    const { symbol, paylineSymbol } = this.paylinesMatrix[col][row];\n                    if (symbol.symbol == symbolId || symbol.symbol[0] == \"K\") {\n                        if (symbol.symbol[0] == \"K\") {\n                            symbol.blinkHighlight();\n                        } else {\n                            symbol.blinkHighlight(this.node.curentConfig.BLINK_DURATION, this.node.curentConfig.BLINKS);\n                            paylineSymbol.blinkHighlight(this.node.curentConfig.BLINK_DURATION, this.node.curentConfig.BLINKS);\n                        }\n                        this._playWinLine(paylineSymbol);\n                    }\n                }\n            }\n        }\n    },\n\n    disableHighlightNormalPaylines() {\n        for (let col = 0; col < this.paylinesMatrix.length; ++col) {\n            if (this.paylinesMatrix[col] && this.paylinesMatrix[col].length) {\n                for (let row = 0; row < this.paylinesMatrix[col].length; ++row) {\n                    const { symbol, paylineSymbol } = this.paylinesMatrix[col][row];\n                    symbol.active = true;\n                    symbol.disableHighlight();\n                    if (symbol.symbol[0] == 'K') {\n                        paylineSymbol.hideWinLineEffect();\n                    } else {\n                        symbol.stopAnimation();\n                        paylineSymbol.disableHighlight();\n                        paylineSymbol.stopAnimation();\n                        if (paylineSymbol.winLine) {\n                            paylineSymbol.winLine.active = false;\n                        }\n                    }\n                }\n            }\n        }\n    },\n\n    clearPaylines() {\n        this._super();\n        for (let i = 0; i < this.usingObj.length; i++) {\n            // this.usingObj[i].remove();\n            if (this.usingObj[i].winLine) {\n                this.winLinePool.put(this.usingObj[i].winLine);\n                this.paylineSymbolPool.put(this.usingObj[i]);\n                this.usingObj[i].winLine = null;\n            }\n        }\n        this.usingObj = [];\n    },\n\n    showSpecialPayline(node, callback) {\n        this.showingPayline = false;\n        this.paylineTime = 0;\n        this.tablePaylineInfo.emit('HIDE_PAYLINE');\n        this.paylineHolderNode.opacity = 255;\n        this.disableHighlightNormalPaylines();\n        node.forEach((child) => {\n            if (this.isValidScatter[child.paylineSymbol.currentCol]) {\n                child.symbol.enableHighlight(true);\n                child.symbol.playAnimation();\n                child.paylineSymbol.enableHighlight();\n                child.paylineSymbol.playAnimation();\n                this._playWinLine(child.paylineSymbol);\n            }\n        });\n        this.scheduleOnce(() => {\n            node.opacity = 0;\n            callback && callback();\n        }, this.node.curentConfig.ANIMATION_DURATION);\n    },\n    _playWinLine(paylineSymbol){\n        if (paylineSymbol.winLine) {\n            paylineSymbol.winLine.active = true;\n            const spine = paylineSymbol.winLine.getComponent(sp.Skeleton);\n            if (spine) {\n                const animation = this.isFreeMode ? \"FreeG\" : \"MainG\";\n                spine.setAnimation(0, animation, true);\n            }\n        }\n    },\n    hideAllPaylines() {\n        this.showingPayline = false;\n        this.paylineTime = 0;\n        this.tablePaylineInfo.emit('HIDE_PAYLINE');\n        for (let col = 0; col < this.paylinesMatrix.length; ++col) {\n            if (this.paylinesMatrix[col] && this.paylinesMatrix[col].length) {\n                for (let row = 0; row < this.paylinesMatrix[col].length; ++row) {\n                    const {symbol, paylineSymbol} = this.paylinesMatrix[col][row];\n                    symbol.active = true;\n                    symbol.disableHighlight();\n                    symbol.stopAnimation();\n                    symbol.reset();\n                    paylineSymbol.disableHighlight();\n                    paylineSymbol.stopAnimation();\n                    if (paylineSymbol.winLine) {\n                        paylineSymbol.winLine.active = false;\n                    }\n                }\n            }\n        }\n    },\n});\n"]}