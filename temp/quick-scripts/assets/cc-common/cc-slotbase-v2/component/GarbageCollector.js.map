{"version":3,"sources":["GarbageCollector.js"],"names":["cc","Class","extends","Component","properties","collectByTime","collectAtStart","timeInterval","onLoad","node","on","runGC","start","_gcAction","repeatForever","sequence","delayTime","callFunc","sys","isNative","runAction","garbageCollect","log","onDisable","target","stopAction","off"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,uBAAe,KADP;AAERC,wBAAgB,KAFR;AAGRC,sBAAc;AAHN,KAHP;;AASLC,UATK,oBASI;AACL,aAAKC,IAAL,CAAUC,EAAV,CAAa,iBAAb,EAAgC,KAAKC,KAArC,EAA4C,IAA5C;AACH,KAXI;AAaLC,SAbK,mBAaI;AAAA;;AACL,aAAKC,SAAL,GAAiBb,GAAGc,aAAH,CAAiBd,GAAGe,QAAH,CAAYf,GAAGgB,SAAH,CAAa,KAAKT,YAAlB,CAAZ,EAA6CP,GAAGiB,QAAH,CAAY,YAAI;AAC3F,kBAAKN,KAAL;AACH,SAF8E,CAA7C,CAAjB,CAAjB;AAGA,YAAG,KAAKL,cAAR,EAAuB;AACnB,iBAAKK,KAAL;AACH;AACD,YAAGX,GAAGkB,GAAH,CAAOC,QAAP,IAAmB,KAAKd,aAAL,IAAsB,IAA5C,EAAiD;AAC7C,iBAAKI,IAAL,CAAUW,SAAV,CAAoB,KAAKP,SAAzB;AACH;AACJ,KAvBI;AAyBLF,SAzBK,mBAyBE;AACH,YAAGX,GAAGkB,GAAH,CAAOC,QAAV,EAAmB;AACfnB,eAAGkB,GAAH,CAAOG,cAAP;AACArB,eAAGsB,GAAH;AACH;AACJ,KA9BI;AAgCLC,aAhCK,uBAgCM;AACP,YAAG,KAAKV,SAAL,IAAkB,KAAKA,SAAL,CAAeW,MAAf,IAAwB,IAA7C,EAAkD;AAC9C,iBAAKf,IAAL,CAAUgB,UAAV,CAAqB,KAAKZ,SAA1B;AACH;AACD,aAAKF,KAAL;AACA,aAAKF,IAAL,CAAUiB,GAAV,CAAc,iBAAd,EAAiC,KAAKf,KAAtC,EAA6C,IAA7C;AACH;AAtCI,CAAT","file":"GarbageCollector.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/component","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        collectByTime: false,\n        collectAtStart: false,\n        timeInterval: 60,\n    },\n\n    onLoad (){\n        this.node.on(\"GARBAGE_COLLECT\", this.runGC, this);\n    },\n\n    start () {\n        this._gcAction = cc.repeatForever(cc.sequence(cc.delayTime(this.timeInterval), cc.callFunc(()=>{\n            this.runGC();\n        })));\n        if(this.collectAtStart){\n            this.runGC();\n        }\n        if(cc.sys.isNative && this.collectByTime == true){\n            this.node.runAction(this._gcAction);\n        }\n    },\n\n    runGC(){\n        if(cc.sys.isNative){\n            cc.sys.garbageCollect();\n            cc.log(`Run Garbage Collector On Native`);\n        }\n    },\n\n    onDisable(){\n        if(this._gcAction && this._gcAction.target !=null){\n            this.node.stopAction(this._gcAction);\n        }\n        this.runGC();\n        this.node.off(\"GARBAGE_COLLECT\", this.runGC, this);\n    },\n});\n"]}