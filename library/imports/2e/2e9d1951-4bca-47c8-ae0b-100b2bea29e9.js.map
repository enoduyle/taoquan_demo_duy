{"version":3,"sources":["../../../../../../assets/cc-common/cc-share-v1/common/assets/cc-common/cc-share-v1/common/DisableMultiTouchButtons.js"],"names":["cc","Class","extends","Component","properties","buttons","Button","delayToEnable","onLoad","i","length","button","node","on","Node","EventType","TOUCH_START","onTouchStarted","TOUCH_END","onTouchEnded","TOUCH_MOVE","onTouchMoved","TOUCH_CANCEL","onTouchCanceled","event","target","btn","getComponent","interactable","gSlotDataStore","isAutoSpin","playSession","isFinished","disableOtherButtons","enableOtherButtons","delay","scheduleOnce"],"mappings":"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","file":"DisableMultiTouchButtons.js","sourceRoot":"../../../../../../assets/cc-common/cc-share-v1/common","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        buttons: [cc.Button],\n        delayToEnable: 0.5,\n    },\n\n    onLoad () {\n        for(let i = 0; i < this.buttons.length; i++)\n        {\n            let button = this.buttons[i];\n            if(button){\n                button.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStarted, this);\n                button.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnded, this);\n                button.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMoved, this);\n                button.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchCanceled, this);\n            }\n        }\n    },\n\n    onTouchStarted(event){\n        const {target} = event;\n        if(target){\n            const btn = target.getComponent(cc.Button);\n            if(btn && btn.interactable \n                && !this.node.gSlotDataStore.isAutoSpin \n                && this.node.gSlotDataStore.playSession.isFinished !== false)\n            {\n                this.disableOtherButtons(target);\n            }\n        } \n    },\n\n    onTouchEnded(event){    \n        const {target} = event;\n        if(target){\n            const btn = target.getComponent(cc.Button);\n            if(btn && btn.interactable \n                && !this.node.gSlotDataStore.isAutoSpin \n                && this.node.gSlotDataStore.playSession.isFinished !== false)\n            {\n                this.enableOtherButtons(target, this.delayToEnable);\n            }\n        }\n    },\n\n    onTouchMoved(){\n        //todo\n    },\n\n    onTouchCanceled(event){\n        const {target} = event;\n        if(target){\n            const btn = target.getComponent(cc.Button);\n            if(btn && btn.interactable \n                && !this.node.gSlotDataStore.isAutoSpin \n                && this.node.gSlotDataStore.playSession.isFinished !== false)\n            {\n                this.enableOtherButtons(target);\n            }\n        }\n    },\n\n    disableOtherButtons(target){\n        for(let i = 0; i<this.buttons.length; i++){\n            const button = this.buttons[i];\n            if(button && button.node !== target){\n                button.interactable = false;\n            }\n        }\n    },\n\n    enableOtherButtons(target, delay = 0){\n        this.scheduleOnce(()=>{\n            for(let i = 0; i<this.buttons.length; i++){\n                const button = this.buttons[i];\n                if(button && button.node !== target){\n                    button.interactable = true;\n                }\n            }\n        }, delay);\n    }\n\n});\n"]}