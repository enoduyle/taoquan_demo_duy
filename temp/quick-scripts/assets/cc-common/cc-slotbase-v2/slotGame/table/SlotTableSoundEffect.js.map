{"version":3,"sources":["SlotTableSoundEffect.js"],"names":["cc","Class","extends","Component","properties","sfxReelSpinning","default","type","AudioClip","sfxReelStop","sfxBonus1","sfxBonus2","sfxBonus3","sfxScatter1","sfxScatter2","sfxScatter3","bonusSymbol","scatterSymbol","start","node","on","reelStopSound","reelStartSound","countBonus","countScatter","soundPlayer","soundSpinId","playSFX","matrix","count","isSpecialSoundBonus","isSpecialSoundScatter","k","length","value","sfxSpecia","reels","stopSound","allReelStopSound"],"mappings":"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","file":"SlotTableSoundEffect.js","sourceRoot":"../../../../../../../assets/cc-common/cc-slotbase-v2/slotGame/table","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        sfxReelSpinning: {\n            default: null,\n            type: cc.AudioClip,\n        },\n        sfxReelStop: {\n            default: null,\n            type: cc.AudioClip,\n        },\n        sfxBonus1: {\n            default: null,\n            type: cc.AudioClip,\n        },\n        sfxBonus2: {\n            default: null,\n            type: cc.AudioClip,\n        },\n        sfxBonus3: {\n            default: null,\n            type: cc.AudioClip,\n        },\n        sfxScatter1: {\n            default: null,\n            type: cc.AudioClip,\n        },\n        sfxScatter2: {\n            default: null,\n            type: cc.AudioClip,\n        },\n        sfxScatter3: {\n            default: null,\n            type: cc.AudioClip,\n        },\n\n        bonusSymbol: 'R',\n        scatterSymbol: 'A',\n    },\n\n    start () {\n        this.node.on(\"REEL_STOP_SOUND\",this.reelStopSound,this);\n        this.node.on(\"TABLE_START_SOUND\",this.reelStartSound,this);\n    },\n    reelStartSound() {\n        this.countBonus = 0;\n        this.countScatter = 0;\n        if (this.node.soundPlayer)\n            this.soundSpinId = this.node.soundPlayer.playSFX(this.sfxReelSpinning);\n    },\n    reelStopSound({matrix, count}) {\n        let isSpecialSoundBonus = null;\n        let isSpecialSoundScatter = null;\n        for (let k = 1; k < matrix.length-1; k++) {\n            let value = matrix[k];\n            if (value === this.bonusSymbol) {\n                this.countBonus++;\n                isSpecialSoundBonus = value;\n            } else if (value === this.scatterSymbol) {\n                this.countScatter++;\n                isSpecialSoundScatter = value;\n            }\n        }\n\n        if (count - this.countBonus > 2) {\n            isSpecialSoundBonus = null;\n        }\n        if (count - this.countScatter > 2) {\n            isSpecialSoundScatter = null;\n        }\n\n        if (isSpecialSoundBonus) {\n            let sfxSpecia = this.sfxBonus1;\n            if (this.countBonus >= 3) {\n                sfxSpecia = this.sfxBonus3;\n            } else if (this.countBonus == 2) {\n                sfxSpecia = this.sfxBonus2;\n            }\n            if (this.node.soundPlayer) this.node.soundPlayer.playSFX(sfxSpecia);\n        } else if (isSpecialSoundScatter) {\n            let sfxSpecia = this.sfxScatter1;\n            if (this.countScatter >= 3) {\n                sfxSpecia = this.sfxScatter3;\n            } else if (this.countScatter == 2) {\n                sfxSpecia = this.sfxScatter2;\n            }\n            if (this.node.soundPlayer) this.node.soundPlayer.playSFX(sfxSpecia);\n        } else {\n            if (this.node.soundPlayer) this.node.soundPlayer.playSFX(this.sfxReelStop);\n        }\n\n        if (count >= this.node.reels.length) {\n            this.node.soundPlayer.stopSound(this.soundSpinId);\n            this.allReelStopSound();\n        }\n    },\n    allReelStopSound() {},\n});\n"]}