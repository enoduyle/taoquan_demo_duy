{"version":3,"sources":["../../../../../../../assets/cc-common/cc-slotbase-v2/slotGame/table/assets/cc-common/cc-slotbase-v2/slotGame/table/SlotTablePaylinev2.js"],"names":["require","convertAssetArrayToObject","cc","Class","extends","Component","properties","paylineHolderNode","Node","tablePaylineInfo","paylineNormalSymbol","Prefab","paylineSpecialSymbols","type","default","onLoad","node","hasPayline","paylinesMatrix","paylineSpecial","showNormalPayline","config","PAY_LINE_ALLWAYS","showNormalPaylineAllLine","showNormalPaylinePerline","blinkNormalPayline","blinkNormalPaylineAllline","blinkNormalPaylinePerline","paylineTime","on","setupPaylines","blinkHighlightPaylines","showAllNormalPayLines","showAllFreePaylines","showScatterPayLine","showBonusPayLine","showJackpotPayLine","showWildPayLine","clearPaylines","start","matrix","payLines","curentConfig","STATS","mode","active","payLineNormals","scatterHolderNode","bonusHolderNode","wildHolderNode","jackpotHolderNode","col","reels","length","row","showSymbols","symbol","paylineSymbol","createPaylineSymbol","payline","push","opacity","getXPosition","index","startX","TABLE_FORMAT","SYMBOL_WIDTH","reel","instantiate","parent","x","y","showNumber","SYMBOL_HEIGHT","changeToSymbol","disableHighlight","callback","paylineIndex","showingPayline","paylineType","callbackShowPayline","gSlotDataStore","isAutoSpin","nextPaylineTime","EXPECT_PAYLINE_ALLWAYS_TIME","Math","max","EXPECT_PAYLINE_TIME","MIN_TIME_EACH_PAYLINE","showNextPayline","resetSymbolPaylines","reset","disableHighlightNormalPaylines","stopAnimation","payLineID","payLineWinNumbers","PAY_LINE_MATRIX","paylinePos","blinkHighlight","BLINK_DURATION","BLINKS","symbolId","symbolCount","enableHighlight","playAnimation","showSpecialPayline","forEach","child","director","getScheduler","schedule","ANIMATION_DURATION","_blinkingCallback","unschedule","removeAllChildren","emit","i","scheduleOnce","update","dt","paylineInfo","line","extShowPayline"],"mappings":"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","file":"SlotTablePaylinev2.js","sourceRoot":"../../../../../../../assets/cc-common/cc-slotbase-v2/slotGame/table","sourcesContent":["\n\nconst {convertAssetArrayToObject} = require('utils');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        paylineHolderNode: cc.Node,\n        tablePaylineInfo: cc.Node,\n        paylineNormalSymbol: cc.Prefab,\n        paylineSpecialSymbols: {\n            type: cc.Prefab,\n            default: [],\n        }\n    },\n    onLoad() {\n        this.node.hasPayline = false;\n        if(!this.tablePaylineInfo) this.tablePaylineInfo = this.node;\n        this.paylinesMatrix = [];\n        this.paylineSpecial = convertAssetArrayToObject(this.paylineSpecialSymbols);\n        this.showNormalPayline = this.node.config.PAY_LINE_ALLWAYS ? this.showNormalPaylineAllLine : this.showNormalPaylinePerline;\n        this.blinkNormalPayline = this.node.config.PAY_LINE_ALLWAYS ? this.blinkNormalPaylineAllline : this.blinkNormalPaylinePerline;\n        this.paylineTime = 0;\n        this.node.on(\"SETUP_PAYLINES\",this.setupPaylines,this);\n        this.node.on(\"BLINK_ALL_NORMAL_PAYLINES\",this.blinkHighlightPaylines,this);\n        this.node.on(\"SHOW_ALL_NORMAL_PAYLINES\",this.showAllNormalPayLines,this);\n        this.node.on(\"SHOW_ALL_FREE_PAYLINES\", this.showAllFreePaylines,this);\n        this.node.on(\"SHOW_SCATTER_PAYLINE\",this.showScatterPayLine,this);\n        this.node.on(\"SHOW_BONUS_PAYLINE\",this.showBonusPayLine,this);\n        this.node.on(\"SHOW_JACKPOT_PAYLINE\",this.showJackpotPayLine,this);\n        this.node.on(\"SHOW_WILD_PAYLINE\",this.showWildPayLine,this);\n        this.node.on(\"CLEAR_PAYLINES\",this.clearPaylines,this);\n    },\n    start() {\n        this.node.hasPayline = true;\n    },\n    setupPaylines(matrix, payLines) {\n        this.node.curentConfig = this.node.config.STATS[this.node.mode];\n        this.paylineHolderNode.active = true;\n        this.payLineNormals = payLines;\n        this.paylinesMatrix = [];\n        this.scatterHolderNode = [];\n        this.bonusHolderNode = [];\n        this.wildHolderNode = [];\n        this.jackpotHolderNode = [];\n\n        for (let col = 0; col < this.node.reels.length; ++col) {\n            this.paylinesMatrix[col] = [];\n            for (let row = 0; row < this.node.reels[col].showSymbols.length; ++row) {\n                const symbol = this.node.reels[col].showSymbols[row];\n                const paylineSymbol = this.createPaylineSymbol(this.node.reels[col],symbol.symbol, col, row);\n                const payline = {\n                    symbol, paylineSymbol,\n                };\n                this.paylinesMatrix[col][row] = payline;\n                if (symbol.symbol == \"A\") {\n                    this.scatterHolderNode.push(payline);\n                } else if (symbol.symbol == \"R\") {\n                    this.bonusHolderNode.push(payline);\n                } else if (symbol.symbol == \"K\") {\n                    this.wildHolderNode.push(payline);\n                } else if (symbol.symbol == \"JP\") {\n                    this.jackpotHolderNode.push(payline);\n                }\n            }\n        }\n\n        this.paylineHolderNode.opacity = 0;\n    },\n    getXPosition(index) {\n        let startX = -(this.node.config.TABLE_FORMAT.length / 2 - 0.5) * this.node.config.SYMBOL_WIDTH;\n        return (startX + this.node.config.SYMBOL_WIDTH * index);\n    },\n    createPaylineSymbol(reel, symbol, col, row) {\n        let paylineSymbol;\n        if (this.paylineSpecial[symbol]) {\n            paylineSymbol = cc.instantiate(this.paylineSpecial[symbol]);\n        } else {\n            paylineSymbol = cc.instantiate(this.paylineNormalSymbol);\n        }\n        paylineSymbol.parent = this.paylineHolderNode;\n        paylineSymbol.x = this.getXPosition(col);\n        paylineSymbol.y = ((reel.showNumber/2 - row - 0.5)) * this.node.config.SYMBOL_HEIGHT;\n        paylineSymbol.changeToSymbol(symbol);\n        paylineSymbol.disableHighlight();\n        return paylineSymbol;\n    },\n    \n    //Show each line for ANIMATION_DURATION time\n    showAllNormalPayLines(callback, index = 0) {\n        if (!this.payLineNormals) {\n            callback && callback();\n            return;\n        }\n        this.paylineIndex = index;\n        this.showingPayline = true;\n        this.paylineType = 'normal';\n        this.callbackShowPayline = callback;\n        if (this.node.config.PAY_LINE_ALLWAYS && this.node.gSlotDataStore && !this.node.gSlotDataStore.isAutoSpin) {\n            this.nextPaylineTime = this.node.curentConfig.EXPECT_PAYLINE_ALLWAYS_TIME;\n        } else {\n            this.nextPaylineTime = Math.max(this.node.curentConfig.EXPECT_PAYLINE_TIME / this.payLineNormals.length, this.node.curentConfig.MIN_TIME_EACH_PAYLINE);\n        }\n        this.showNextPayline();\n    },\n    showAllFreePaylines(callback, index = 0)\n    {\n        if (!this.payLineNormals) {\n            callback && callback();\n            return;\n        }\n        this.paylineIndex = index;\n        this.showingPayline = true;\n        this.paylineType = 'free';\n        this.callbackShowPayline = callback;\n        this.nextPaylineTime = Math.max(this.node.curentConfig.EXPECT_PAYLINE_TIME / this.payLineNormals.length, this.node.curentConfig.MIN_TIME_EACH_PAYLINE);\n        this.showNextPayline();\n    },\n    resetSymbolPaylines() {\n        for (let col = 0; col < this.paylinesMatrix.length; ++col) {\n            for (let row = 0; row < this.paylinesMatrix[col].length; ++row) {\n                this.paylinesMatrix[col][row].symbol.active = true;\n                this.paylinesMatrix[col][row].symbol.reset();\n                this.paylinesMatrix[col][row].paylineSymbol.reset();\n            }\n        }\n    },\n    disableHighlightNormalPaylines() {\n        for (let col = 0; col < this.paylinesMatrix.length; ++col) {\n            for (let row = 0; row < this.paylinesMatrix[col].length; ++row) {\n                this.paylinesMatrix[col][row].symbol.active = true;\n                this.paylinesMatrix[col][row].symbol.disableHighlight();\n                this.paylinesMatrix[col][row].symbol.stopAnimation();\n                this.paylinesMatrix[col][row].paylineSymbol.disableHighlight();\n                this.paylinesMatrix[col][row].paylineSymbol.stopAnimation();\n            }\n        }\n    },\n    blinkNormalPaylinePerline({payLineID, payLineWinNumbers}) {\n        let payline = this.node.config.PAY_LINE_MATRIX[payLineID];\n        for (let paylinePos = 0; paylinePos < payLineWinNumbers; ++paylinePos) {\n            const row = payline[paylinePos];\n            const col = paylinePos;\n            this.paylinesMatrix[col][row].symbol.blinkHighlight(this.node.curentConfig.BLINK_DURATION, this.node.curentConfig.BLINKS);\n            this.paylinesMatrix[col][row].paylineSymbol.blinkHighlight(this.node.curentConfig.BLINK_DURATION, this.node.curentConfig.BLINKS);\n            \n        }\n    },\n    blinkNormalPaylineAllline({symbolId, symbolCount}) {\n        for (let col = 0; col < symbolCount; col++) {\n            for (let row = 0; row < this.paylinesMatrix[col].length; row++) {\n                if (this.paylinesMatrix[col][row].symbol.symbol == symbolId ||\n                    this.paylinesMatrix[col][row].symbol.symbol == \"K\") //remove hardcore K ?\n                {\n                    this.paylinesMatrix[col][row].symbol.blinkHighlight(this.node.curentConfig.BLINK_DURATION, this.node.curentConfig.BLINKS);\n                    this.paylinesMatrix[col][row].paylineSymbol.blinkHighlight(this.node.curentConfig.BLINK_DURATION, this.node.curentConfig.BLINKS);\n                }\n            }\n        }\n    },\n    showNormalPaylinePerline({payLineID, payLineWinNumbers}) {\n        this.disableHighlightNormalPaylines();\n        let payline = this.node.config.PAY_LINE_MATRIX[payLineID];\n        if (payline && payline.length > 0 && this.paylinesMatrix && this.paylinesMatrix.length > 0){\n            for (let paylinePos = 0; paylinePos < payLineWinNumbers; ++paylinePos) {\n                const row = payline[paylinePos];\n                const col = paylinePos;\n                this.paylinesMatrix[col][row].symbol.active = false;\n                this.paylinesMatrix[col][row].paylineSymbol.enableHighlight();\n                this.paylinesMatrix[col][row].paylineSymbol.playAnimation();\n\n            }\n        }\n    },\n    showNormalPaylineAllLine({symbolId, symbolCount}) {\n        this.disableHighlightNormalPaylines();\n        for (let col = 0; col < symbolCount; col++) {\n            for (let row = 0; row < this.paylinesMatrix[col].length; row++) {\n                if (this.paylinesMatrix[col][row].symbol.symbol == symbolId ||\n                    this.paylinesMatrix[col][row].symbol.symbol == \"K\") //remove hardcore K ?\n                {\n                    this.paylinesMatrix[col][row].symbol.active = false;\n                    this.paylinesMatrix[col][row].paylineSymbol.enableHighlight();\n                    this.paylinesMatrix[col][row].paylineSymbol.playAnimation();\n                }\n            }\n        }\n    },\n    showScatterPayLine(callback) {\n        this.showSpecialPayline(this.scatterHolderNode, callback);\n    },\n    showBonusPayLine(callback) {\n        this.showSpecialPayline(this.bonusHolderNode, callback);\n    },\n    showWildPayLine(callback) {\n        this.showSpecialPayline(this.wildHolderNode, callback);\n    },\n    showJackpotPayLine(callback) {\n        this.showSpecialPayline(this.jackpotHolderNode, callback);\n    },\n    showSpecialPayline(node, callback) {\n        this.paylineHolderNode.opacity = 255;\n        this.disableHighlightNormalPaylines();\n        node.forEach((child) => {\n            child.symbol.enableHighlight();\n            child.symbol.playAnimation();\n            child.paylineSymbol.enableHighlight();\n            child.paylineSymbol.playAnimation();\n        });\n        cc.director.getScheduler().schedule(function(){\n            node.opacity = 0;\n            if (callback && typeof callback == \"function\") {\n                callback();\n            }\n        }, this, 0, 0, this.node.curentConfig.ANIMATION_DURATION, false);\n    },\n    clearPaylines() {\n        if(this._blinkingCallback){\n            this.unschedule(this._blinkingCallback);\n            this._blinkingCallback = null;\n        }\n        this.showingPayline = false;\n        this.paylineTime = 0;\n        this.resetSymbolPaylines();\n        this.paylineHolderNode.removeAllChildren();\n        this.paylineHolderNode.active = false;\n        this.paylinesMatrix = [];\n        this.scatterHolderNode = [];\n        this.bonusHolderNode = [];\n        this.wildHolderNode = [];\n        this.jackpotHolderNode = [];\n        this.tablePaylineInfo.emit('HIDE_PAYLINE');\n    },\n    blinkHighlightPaylines(callback) {\n        this._blinkingCallback = ()=>{\n            callback && callback();\n            this._blinkingCallback = null;\n        };\n        this.paylineHolderNode.opacity = 255;\n        this.disableHighlightNormalPaylines();\n        for (let i = 0; i < this.payLineNormals.length; ++i) {\n            this.blinkNormalPayline(this.payLineNormals[i]);\n        }\n        this.node.emit('BLINK_ALL_PAYLINE');\n        this.scheduleOnce(this._blinkingCallback, this.node.curentConfig.BLINKS * this.node.curentConfig.BLINK_DURATION);\n    },\n    update(dt)\n    {\n        if (this.paylineTime > 0 && this.showingPayline)\n        {\n            this.paylineTime -= dt;\n            if (this.paylineTime <= 0)\n            {\n                this.showNextPayline();\n            }\n        }\n    },\n    showNextPayline()\n    {\n        this.paylineHolderNode.opacity = 255;\n        if (!this.payLineNormals || !this.payLineNormals[this.paylineIndex]) {\n            if (this.paylineType === 'free')\n            {\n                this.showingPayline = false;\n            }\n            this.paylineIndex = 0;\n            this.callbackShowPayline && this.callbackShowPayline();\n            this.callbackShowPayline = null;\n        }\n        if (this.payLineNormals && this.payLineNormals[this.paylineIndex] && this.showingPayline) {\n            const paylineInfo = this.payLineNormals[this.paylineIndex];\n            this.showNormalPayline(paylineInfo);\n            this.tablePaylineInfo.emit('SHOW_PAYLINE',{line: paylineInfo});\n            this.extShowPayline();\n            this.paylineIndex += 1;\n            this.paylineTime = this.nextPaylineTime;\n        }\n    },\n    extShowPayline()\n    {\n\n    }\n});\n"]}