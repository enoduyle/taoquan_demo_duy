{"version":3,"sources":["../../../../../../assets/cc-common/cc-share-v1/common/assets/cc-common/cc-share-v1/common/MoneyDataStore.js"],"names":["require","convertObjectToArray","formatMoney","subtractDecimals","getUtilConfig","floatUtils","cc","Class","createDefaultBet","slotConfig","dynamicBet","loadConfigAsync","getConfig","LOGIN_IFRAME","STEPS","DEFAULT_BET","EXTRA_BET_STEPS","DEFAULT_EXTRA_BET","DEFAULT_BET_IFRAME","STEPS_IFRAME","dataDefault","currentBetData","steps","currentExtraBetData","extraSteps","data","Object","assign","updateCurrentBet","value","updateCurrentExtraBet","updateWallet","isEqual","wallet","diff","minus","sign","log","calculateWalletAfterClickSpin","totalBetData","updateWalletAfterClickSpin"],"mappings":";;;;;;eAE2FA,QAAQ,OAAR;IAAnFC,gCAAAA;IAAsBC,uBAAAA;IAAaC,4BAAAA;IAAkBC,yBAAAA;IAAeC,sBAAAA;;AAE5EC,GAAGC,KAAH,CAAS;AACLC,oBADK,4BACYC,UADZ,EACwBC,UADxB,EACoC;AACrC,YAAMC,kBAAkBX,QAAQ,iBAAR,CAAxB;;AADqC,oCAEdW,gBAAgBC,SAAhB,EAFc;AAAA,YAE9BC,YAF8B,yBAE9BA,YAF8B;;AAAA,YAG9BC,KAH8B,GAG8DL,UAH9D,CAG9BK,KAH8B;AAAA,YAGvBC,WAHuB,GAG8DN,UAH9D,CAGvBM,WAHuB;AAAA,YAGVC,eAHU,GAG8DP,UAH9D,CAGVO,eAHU;AAAA,YAGOC,iBAHP,GAG8DR,UAH9D,CAGOQ,iBAHP;AAAA,YAG0BC,kBAH1B,GAG8DT,UAH9D,CAG0BS,kBAH1B;AAAA,YAG8CC,YAH9C,GAG8DV,UAH9D,CAG8CU,YAH9C;;AAIrC,YAAIC,cAAc,EAAlB;AACA,YAAIV,UAAJ,EAAgB;AACZU,0BAAc;AACVC,gCAAgBpB,qBAAqBS,UAArB,EAAiC,CAAjC,CADN;AAEVY,uBAAOZ,UAFG;AAGVa,qCAAqBN,oBAAoBA,iBAApB,GAAwC,CAHnD;AAIVO,4BAAYR;AAJF,aAAd;AAMH,SAPD,MAOO,IAAIH,gBAAgBK,kBAAhB,IAAsCC,YAA1C,EAAwD;AAC3DC,0BAAc;AACVC,gCAAgBH,kBADN;AAEVI,uBAAOH,YAFG;AAGVI,qCAAqBN,oBAAoBA,iBAApB,GAAwC,CAHnD;AAIVO,4BAAYR;AAJF,aAAd;AAMH,SAPM,MAOA;AACHI,0BAAc;AACVC,gCAAgBN,WADN;AAEVO,uBAAOR,KAFG;AAGVS,qCAAqBN,oBAAoBA,iBAApB,GAAwC,CAHnD;AAIVO,4BAAYR;AAJF,aAAd;AAMH;AACD,aAAKS,IAAL,GAAYC,OAAOC,MAAP,CAAc,EAAd,EAAkBP,WAAlB,CAAZ;AACA,eAAO,KAAKK,IAAZ;AACH,KA9BI;AA+BLG,oBA/BK,4BA+BYC,KA/BZ,EA+BmB;AACpB,aAAKJ,IAAL,CAAUJ,cAAV,GAA2BQ,KAA3B;AACH,KAjCI;AAkCLC,yBAlCK,iCAkCiBD,KAlCjB,EAkCwB;AACzB,aAAKJ,IAAL,CAAUF,mBAAV,GAAgCM,KAAhC;AACH,KApCI;AAqCLE,gBArCK,wBAqCQF,KArCR,EAqCe;AAChB,YAAI,CAACxB,WAAW2B,OAAX,CAAmBH,KAAnB,EAA0B,KAAKJ,IAAL,CAAUQ,MAApC,CAAL,EAAkD;AAC9C,gBAAMC,OAAO7B,WAAW8B,KAAX,CAAiBN,KAAjB,EAAwB,KAAKJ,IAAL,CAAUQ,MAAlC,CAAb;AACA,gBAAMG,OAAOF,OAAO,CAAP,GAAW,GAAX,GAAiB,EAA9B;AACA5B,eAAG+B,GAAH,CAAO,mBAAP,EAA4B,YAA5B,EAA0C,KAAKZ,IAAL,CAAUQ,MAApD,EAA4DG,IAA5D,EAAkEF,IAAlE,EAAwE,GAAxE,EAA6EL,KAA7E;AACH;AACD,aAAKJ,IAAL,CAAUQ,MAAV,GAAmBJ,KAAnB;AACH,KA5CI;AA6CLS,iCA7CK,yCA6CyBC,YA7CzB,EA6CuC;AAAA,oBACP,KAAKd,IADE;AAAA,YAClCQ,MADkC,SAClCA,MADkC;AAAA,YAC1BZ,cAD0B,SAC1BA,cAD0B;;AAExC,eAAOhB,WAAW8B,KAAX,CAAiBF,MAAjB,EAAyBM,gBAAgBlB,cAAzC,CAAP;AACH,KAhDI;AAiDLmB,8BAjDK,sCAiDsBD,YAjDtB,EAiDoC;AAAA,qBACJ,KAAKd,IADD;AAAA,YAC/BQ,MAD+B,UAC/BA,MAD+B;AAAA,YACvBZ,cADuB,UACvBA,cADuB;;AAErC,YAAIY,UAAUZ,cAAd,EAA8B;AAC1B,iBAAKI,IAAL,CAAUQ,MAAV,GAAmB5B,WAAW8B,KAAX,CAAiBF,MAAjB,EAAyBM,gBAAgBlB,cAAzC,CAAnB;AACAf,eAAG+B,GAAH,CAAO,0BAAP,EAAmC,YAAnC,EAAiDJ,MAAjD,EAAyD,QAAQZ,cAAR,GAAyB,IAAlF,EAAwF,KAAKI,IAAL,CAAUQ,MAAlG;AACA,mBAAO,KAAKR,IAAL,CAAUQ,MAAjB;AACH;AACD,eAAOA,MAAP;AACH;AAzDI,CAAT","file":"MoneyDataStore.js","sourceRoot":"../../../../../../assets/cc-common/cc-share-v1/common","sourcesContent":["\n\nconst { convertObjectToArray, formatMoney, subtractDecimals, getUtilConfig, floatUtils } = require('utils');\n\ncc.Class({\n    createDefaultBet(slotConfig, dynamicBet) {\n        const loadConfigAsync = require('loadConfigAsync');\n        const {LOGIN_IFRAME} = loadConfigAsync.getConfig();\n        const {STEPS, DEFAULT_BET, EXTRA_BET_STEPS, DEFAULT_EXTRA_BET, DEFAULT_BET_IFRAME, STEPS_IFRAME} = slotConfig;\n        let dataDefault = {};\n        if (dynamicBet) {\n            dataDefault = {\n                currentBetData: convertObjectToArray(dynamicBet)[0],\n                steps: dynamicBet,\n                currentExtraBetData: DEFAULT_EXTRA_BET ? DEFAULT_EXTRA_BET : 0,\n                extraSteps: EXTRA_BET_STEPS,\n            };\n        } else if (LOGIN_IFRAME && DEFAULT_BET_IFRAME && STEPS_IFRAME) {\n            dataDefault = {\n                currentBetData: DEFAULT_BET_IFRAME,\n                steps: STEPS_IFRAME,\n                currentExtraBetData: DEFAULT_EXTRA_BET ? DEFAULT_EXTRA_BET : 0,\n                extraSteps: EXTRA_BET_STEPS,\n            };\n        } else {\n            dataDefault = {\n                currentBetData: DEFAULT_BET,\n                steps: STEPS,\n                currentExtraBetData: DEFAULT_EXTRA_BET ? DEFAULT_EXTRA_BET : 0,\n                extraSteps: EXTRA_BET_STEPS,\n            };\n        }\n        this.data = Object.assign({}, dataDefault);\n        return this.data;\n    },\n    updateCurrentBet(value) {\n        this.data.currentBetData = value;\n    },\n    updateCurrentExtraBet(value) {\n        this.data.currentExtraBetData = value;\n    },\n    updateWallet(value) {\n        if (!floatUtils.isEqual(value, this.data.wallet)) {\n            const diff = floatUtils.minus(value, this.data.wallet);\n            const sign = diff > 0 ? \"+\" : \"\";\n            cc.log(\"%cWallet change: \", \"color:red;\", this.data.wallet, sign, diff, \"=\", value);\n        }\n        this.data.wallet = value;\n    },\n    calculateWalletAfterClickSpin(totalBetData) {\n        let { wallet, currentBetData } = this.data;\n        return floatUtils.minus(wallet, totalBetData || currentBetData);\n    },\n    updateWalletAfterClickSpin(totalBetData) {\n        let { wallet, currentBetData } = this.data;\n        if (wallet >= currentBetData) {\n            this.data.wallet = floatUtils.minus(wallet, totalBetData || currentBetData)\n            cc.log(\"%cWallet change on Spin:\", \"color:red;\", wallet, \" - \" + currentBetData + \" =\", this.data.wallet);\n            return this.data.wallet;\n        }\n        return wallet;\n    },\n});\n"]}