{"version":3,"sources":["../../../../../../assets/cc-common/cc-slotbase-v2/trial/assets/cc-common/cc-slotbase-v2/trial/TrialWallet.js"],"names":["require","formatWalletMoney","formatMoney","floatUtils","cc","Class","extends","Component","properties","isFormatWallet","_walletValue","walletValue","get","set","value","getComponent","Label","string","Number","visible","timeTweenWallet","onLoad","isInit","node","controller","setDefaultValue","defaultWallet","defaultBet","window","_trialWallet","resetTrialValue","lastValue","gSlotDataStore","trialWallet","hide","active","_tweenCoin","coinValue","tweenCoin","stop","tween","to","start","log","updateBet","betId","updateWalletOnTrialSpinClick","minus","updateTrialWallet","winAmount","isUpdateWinAmount","plus","onDisable"],"mappings":"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","file":"TrialWallet.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/trial","sourcesContent":["const { formatWalletMoney, formatMoney, floatUtils } = require(\"utils\");\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        isFormatWallet: true,\n        _walletValue: 0,\n        walletValue: {\n            get: function () {\n                return this._walletValue;\n            },\n            set: function (value) {\n                this._walletValue = value;\n                if (this.getComponent(cc.Label)) {\n                    this.getComponent(cc.Label).string = this.isFormatWallet ? formatWalletMoney(Number(this._walletValue)) : formatMoney(Number(this._walletValue));\n                }\n            },\n            visible: false\n        },\n        timeTweenWallet: 0.3\n    },\n    onLoad() {\n        this.isInit = false;\n        this.node.controller = this;\n    },\n    setDefaultValue(defaultWallet,defaultBet){\n        this.defaultWallet = window._trialWallet || defaultWallet;\n        this.defaultBet = defaultBet;\n    },\n    resetTrialValue() {\n        this.walletValue = this.defaultWallet;\n        this.lastValue = Number(this.walletValue);\n        if (this.node.gSlotDataStore) {\n            this.node.gSlotDataStore.trialWallet = this.lastValue;\n        }\n    },\n    hide(){\n        this.node.active = false;\n    },\n    _tweenCoin(coinValue) {\n        this.tweenCoin && this.tweenCoin.stop();\n        this.tweenCoin = cc.tween(this).to(this.timeTweenWallet, {walletValue: coinValue});\n        this.tweenCoin.start();\n        cc.log(\"%c TrialMoney Update: \",\"color: red;\", formatMoney(coinValue));\n    },\n    updateBet(betId) {\n        this.defaultBet = betId;\n    },\n    updateWalletOnTrialSpinClick() {\n        this.lastValue = floatUtils.minus(this.lastValue, this.defaultBet);\n\n        if (this.node.gSlotDataStore) {\n            this.node.gSlotDataStore.trialWallet = this.lastValue;\n        }\n        cc.log(\"%cTrial Wallet change on Spin: - \", \"color:red;\", + this.defaultBet,\"=\", this.lastValue);\n        this._tweenCoin(this.lastValue);\n    },\n    updateTrialWallet(winAmount) {\n        let isUpdateWinAmount = this.node.gSlotDataStore ? this.node.gSlotDataStore.isUpdateWinAmount : false;\n        winAmount = winAmount || 0;\n        this.lastValue = floatUtils.plus(this.lastValue, winAmount);\n        if (this.node.gSlotDataStore) {\n            this.node.gSlotDataStore.trialWallet = this.lastValue;\n        }\n        cc.log(\"%cTrial Wallet change: + \", \"color:red;\", winAmount, \"=\", this.lastValue);\n        if (!isUpdateWinAmount) {\n            this._tweenCoin(this.lastValue);\n        }\n    },\n    onDisable() {\n        if(this.tweenCoin){\n            this.tweenCoin.stop();\n        }\n    }\n});\n"]}