{"version":3,"sources":["FreeGameOption9983.js"],"names":["cutsceneMode","require","skinMapping","flySkinMapping","OPTION","cc","Class","extends","properties","optionList","Node","koiAnim","sp","Skeleton","particleKoi","ParticleSystem","godKitchen","godKitchenNoKoi","optionPrefab","Prefab","optionHolder","spinNumberSprites","default","type","SpriteFrame","wildMultiplySprites","backgroundSprites","scrollSprites","frameDecor","godKitchenFly","onLoad","node","on","play","exit","opacity","active","listOptions","start","createOptions","koiPositionCache","position","length","i","option","instantiate","addChild","scriptItem","getComponent","updateData","spinNumber","index","wildMultiply","background","scroll","spinImageList","wildMultiplyImageList","attachEvent","selectOption","bind","push","resetCutscene","isReady","clicked","emit","content","callback","show","enter","mode","from","gameSpeed","mainDirector","getGameSpeed","setAnimation","forEach","it","randomList","animState","Animation","speed","soundPlayer","playSBGChooseOption","runAction","fadeIn","playOptionAnimation","stopAllActions","sequence","delayTime","callFunc","autoSelectFunc","setTimeout","Math","floor","random","item","onCompletedntroAnim","playSFXPickOption","gSlotDataStore","freeSpinOption","gameStateManager","triggerFreeSpinOption","playSFXRandomOption","clearTimeout","hideNode","currentGameMode","stopAllAudio","playMainBGM","fsoi","fsoiArr","split","freeSpinList","playChoseAnim","choseOption","multiId","spinTimeId","delayEach","chooseOption","playParticleKoi","moveTime","playSFXParticleKoi","parent","convertToNodeSpaceAR","convertToWorldSpaceAR","endPosition","resetSystem","moveTo","koiMoveOut","setGodKitchenType","skeleton","setSkin","Number","setSlotsToSetupPose","flySkeleton","timeScale","addAnimation","playSFXMoveKoi","console","log","fadeOut","onKoiMoveOut","tween","getRandomDelay","splice"],"mappings":"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","file":"FreeGameOption9983.js","sourceRoot":"../../../../../../assets/cc-taoquan-9983/scripts/cutScene","sourcesContent":["\nconst cutsceneMode = require('CutsceneMode');\nconst skinMapping = [\"chep_bac\", \"chep_do\", \"chep_den\", \"chep_xanhduong\", \"chep_vang\", \"chep_xanhla\", \"chep_tim\"];\nconst flySkinMapping = [\"Ca_Bac\", \"Ca_Do\", \"Ca_Den\", \"Ca_XanhDuong\", \"Ca_Vang\", \"Ca_XanhLa\", \"Ca_Tim\"];\n\nconst OPTION = [1, 2, 3, 7, 4, 5, 6];\n\n\ncc.Class({\n    extends: cutsceneMode,\n    properties: {\n        optionList: [cc.Node],\n        koiAnim: sp.Skeleton,\n        particleKoi: cc.ParticleSystem,\n        godKitchen: cc.Node,\n        godKitchenNoKoi: cc.Node,\n        optionPrefab: cc.Prefab,\n        optionHolder: cc.Node,\n        spinNumberSprites: {\n            default: [],\n            type: cc.SpriteFrame\n        },\n        wildMultiplySprites: {\n            default: [],\n            type: cc.SpriteFrame\n        },\n        backgroundSprites: {\n            default: [],\n            type: cc.SpriteFrame\n        },\n        scrollSprites: {\n            default: [],\n            type: cc.SpriteFrame\n        },\n        frameDecor: cc.Node,\n        godKitchenFly: require(\"Bezier3D\"),\n    },\n\n    onLoad() {\n        this.node.on(\"PLAY\", this.play, this);\n        this.node.on(\"HIDE\", this.exit, this);\n        this.node.opacity = 0;\n        this.node.active = false;\n        this.listOptions = [];\n    },\n\n    start() {\n        this.createOptions();\n        this.koiPositionCache = this.godKitchen.position;\n    },\n\n    createOptions() {\n        if (!this.listOptions || !this.listOptions.length) {\n            for (let i = 0; i < this.scrollSprites.length; i++) {\n                const option = cc.instantiate(this.optionPrefab);\n                this.optionHolder.addChild(option);\n                const scriptItem = option.getComponent('OptionController9983');\n                if (scriptItem) {\n                    scriptItem.updateData({\n                        spinNumber: this.spinNumberSprites[i],\n                        index: OPTION[i],\n                        wildMultiply: this.wildMultiplySprites[i],\n                        background: this.backgroundSprites[i],\n                        scroll: this.scrollSprites[i],\n                        spinImageList: this.spinNumberSprites,\n                        wildMultiplyImageList: this.wildMultiplySprites,\n                    });\n                    scriptItem.attachEvent(OPTION[i], this.selectOption.bind(this));\n                    this.listOptions.push(option);\n                }\n            }\n        }\n    },\n\n    resetCutscene() {\n        this.isReady = false;\n        this.clicked = false;\n        if (this.listOptions && this.listOptions.length) {\n            this.listOptions[3].emit('RESET_MYSTERY');\n        }\n    },\n\n    play(content, callback) {\n\n        this.content = content;\n        this.callback = callback;\n        this.show();\n        this.enter(content.mode);\n    },\n\n    enter(from = \"normal\") {\n        this.gameSpeed = this.node.mainDirector.getGameSpeed();\n        this.godKitchen.active = false;\n        this.godKitchenNoKoi.active = true;\n        this.godKitchenNoKoi.getComponent(sp.Skeleton).setAnimation(0, \"animation\", true);\n        this.optionList.forEach(it => {\n            it.opacity = 255;\n            it.active = true;\n        });\n        this.randomList = [0, 1, 2, 3, 4, 5];\n        this.resetCutscene();\n        if (from == \"normal\" && this.gameSpeed < 2) {\n            //if (this.node.soundPlayer) this.node.soundPlayer.playSFXMoveCamera();\n            let animState = this.node.getComponent(cc.Animation).play(\"IntroFreeGameOption9983\");\n            animState.speed = 1 + this.gameSpeed;\n        }\n        else {\n            this.node.getComponent(cc.Animation).play(\"FreeGameOptionNoIntro\");\n        }\n        if (this.node.soundPlayer) this.node.soundPlayer.playSBGChooseOption();\n        this.frameDecor.runAction(cc.fadeIn(0.2));\n    },\n\n    playOptionAnimation() {\n        this.node.stopAllActions();\n        this.node.runAction(\n            cc.sequence(\n                cc.delayTime(0.8),\n                cc.callFunc(() => {\n                    this.autoSelectFunc = setTimeout(() => {\n                        this.selectOption(Math.floor(Math.random() * 7) + 1);\n                    }, 11000);\n                    this.isReady = true;\n                    this.listOptions.forEach(item => {\n                        item.emit('CAN_CLICK', true);\n                    });\n\n                })\n            ));\n        this.listOptions.forEach(item => {\n            item.emit('SCROLLING_ROLL');\n        });\n    },\n\n    onCompletedntroAnim() {\n        this.playOptionAnimation();\n    },\n\n    selectOption(option) {\n        if (!this.isReady || this.clicked) return;\n        this.option = option;\n        this.clicked = true;\n        this.listOptions.forEach(item => {\n            item.emit('CAN_CLICK', false);\n        });\n        if (this.node.soundPlayer) this.node.soundPlayer.playSFXPickOption();\n        this.node.gSlotDataStore.freeSpinOption = this.option;\n        this.node.mainDirector.gameStateManager.triggerFreeSpinOption(this.option);\n        if (option == 7) {\n            if (this.node.soundPlayer) this.node.soundPlayer.playSFXRandomOption();\n            this.listOptions[3].emit('ROLL_MYSTERY');\n        }\n\n        if (this.autoSelectFunc) {\n            clearTimeout(this.autoSelectFunc);\n        }\n    },\n\n    hideNode() {\n        if (this.callback && typeof this.callback == \"function\") {\n            this.node.emit(\"STOP\");\n            this.callback();\n        }\n        this.clicked = false;\n        this.node.stopAllActions();\n        this.node.runAction(\n            cc.sequence(cc.delayTime(0.5),\n                cc.callFunc(() => {\n                    this.listOptions.forEach(item => {\n                        item.emit('RESET_DATA');\n                    });\n                    this.node.active = false;\n                    if (this.node.gSlotDataStore.currentGameMode == 'freeGame') {\n                        if (this.node.soundPlayer) this.node.soundPlayer.stopAllAudio();\n                        if (this.node.soundPlayer) this.node.soundPlayer.playMainBGM();\n                    }\n                })\n            ));\n    },\n\n    exit() {\n        const { fsoi } = this.node.gSlotDataStore;\n        const fsoiArr = fsoi.split(';');\n        const freeSpinList = { //TODO: need to request BE to send id instead.\n            \"25\": 1,\n            \"20\": 2,\n            \"15\": 3,\n            \"13\": 4,\n            \"10\": 5,\n            \"6\": 6,\n        };\n        this.playChoseAnim(fsoiArr[1], fsoiArr[2], freeSpinList[fsoiArr[0]]);\n    },\n\n    playChoseAnim(choseOption, multiId, spinTimeId) {\n        const delayEach = 0.2;\n        for (let i = 0; i < this.listOptions.length; i++) {\n            let option = this.listOptions[i];\n            // let optionName = option.name;\n            if (OPTION[i] != choseOption) {\n                // let fadeTime = this.getRandomDelay() * delayEach;\n                // option.runAction(cc.fadeOut(fadeTime));\n                option.opacity = 120;\n            }\n            else {\n                this.chooseOption = option;\n            }\n        }\n\n        if (choseOption == '7') {\n            this.chooseOption.emit('STOP_MYSTERY', multiId, spinTimeId, this.playParticleKoi.bind(this));\n        } else {\n            this.node.stopAllActions();\n            this.node.runAction(cc.sequence(cc.delayTime(this.listOptions.length * delayEach), cc.callFunc(this.playParticleKoi.bind(this))));\n        }\n    },\n\n    playParticleKoi() {\n        if (this.gameSpeed == 2) {\n            this.hideNode();\n        }\n        else {\n            const moveTime = 0.5 / (1 + this.gameSpeed);\n            if (this.node.soundPlayer) this.node.soundPlayer.playSFXParticleKoi();\n            this.particleKoi.node.position = this.node.parent.convertToNodeSpaceAR(this.chooseOption.parent.convertToWorldSpaceAR(this.chooseOption));\n            let endPosition = this.godKitchenNoKoi.position;\n            this.particleKoi.node.active = true;\n            this.particleKoi.node.opacity = 0;\n            this.particleKoi.resetSystem();\n            this.particleKoi.node.runAction(cc.sequence(cc.delayTime(0.1), cc.callFunc(() => {\n                this.particleKoi.node.opacity = 255;\n            }), cc.moveTo(moveTime, endPosition), cc.callFunc(() => {\n                this.koiMoveOut();\n            })));\n        }\n    },\n\n    setGodKitchenType() {\n        let skeleton = this.godKitchen.getComponent(sp.Skeleton);\n        skeleton.setSkin(skinMapping[Number(this.option) - 1]);\n        skeleton.setSlotsToSetupPose();\n        this.godKitchenFly.node.active = true;\n        const flySkeleton = this.godKitchenFly.node.getComponent(sp.Skeleton);\n        flySkeleton.setSkin(flySkinMapping[Number(this.option) - 1]);\n        flySkeleton.setSlotsToSetupPose();\n        flySkeleton.setAnimation(0, 'animation', true);\n        flySkeleton.timeScale = 2;\n        skeleton.setAnimation(0, \"Appear\", false);\n        skeleton.addAnimation(0, \"Idle\", true);\n    },\n\n    koiMoveOut() {\n        if (this.node.soundPlayer) this.node.soundPlayer.playSFXMoveKoi();\n        console.log(\"Koi move out\");\n        this.particleKoi.node.active = false;\n        this.godKitchen.active = true;\n        this.setGodKitchenType();\n        this.godKitchenNoKoi.runAction(cc.sequence(cc.fadeOut(0.5), cc.callFunc(() => {\n            this.godKitchenNoKoi.opacity = 255;\n            this.godKitchenNoKoi.active = false;\n        })));\n        this.node.runAction(cc.sequence(cc.delayTime(0.6), cc.callFunc(() => {\n            this.listOptions.forEach(option => {\n                option.runAction(cc.fadeOut(0.2));\n            });\n            this.frameDecor.runAction(cc.fadeOut(0.2), cc.callFunc(() => {\n\n            }));\n            let animState = this.node.getComponent(cc.Animation).play(\"KoiMoveOut\");\n            animState.speed = 0.2 + (0.2) * this.gameSpeed;\n        })));\n\n    },\n\n    onKoiMoveOut() {\n        this.godKitchenFly.tween(() => {\n            this.godKitchen.active = false;\n            this.godKitchen.position = this.koiPositionCache;\n            this.hideNode();\n        }, (2 - this.gameSpeed));\n        //this.node.mainDirector.gameStateManager.triggerFreeSpinOption(this.option);\n    },\n\n    getRandomDelay() {\n        let random = Math.floor(Math.random() * this.randomList.length);\n        return this.randomList.splice(random, 1);\n    }\n});\n"]}