{"version":3,"sources":["../../../../../../assets/cc-common/cc-slotbase-v2/slotGame/assets/cc-common/cc-slotbase-v2/slotGame/SlotSoundPlayer.js"],"names":["cc","Class","extends","require","WebSoundPlayer","playMainBGM","mode","node","gSlotDataStore","currentGameMode","isEnableBGM","soundBG","bgmMain","bgmFree","bgmBonus","currentBGM","dur","fadeMusicTo","tween","delay","call","playMusic","tweenMusic","MUSIC_VOLUME","start","getMusicCurrentTime","webSound","musicInstance","seek","audioEngine","getCurrentTime","ccMusic","getSFXCurrentTime","id","progress","playSfxTurboClick","playSFXClick","playSfxPopupOpen","playSfxPopupClose","playSfxResult","playSoundNearWin","stopSoundNearWin"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASC,QAAQ,gBAAR,EAA0BC,cAD9B;;AAGLC,eAHK,yBAGS;AAAA;;AACV,YAAMC,OAAO,KAAKC,IAAL,CAAUC,cAAV,CAAyBC,eAAtC;AACA,YAAI,CAAC,KAAKC,WAAV,EAAuB;AACvB,YAAIC,UAAU,KAAKC,OAAnB;AACA,YAAIN,QAAQ,UAAZ,EAAwB;AACpBK,sBAAU,KAAKE,OAAf;AACH,SAFD,MAEO,IAAIP,QAAQ,WAAZ,EAAyB;AAC5BK,sBAAU,KAAKG,QAAf;AACH;AACDH,kBAAUA,WAAW,KAAKC,OAA1B,CATU,CASyB;AACnC,YAAI,KAAKG,UAAL,KAAoBJ,OAAxB,EAAiC;AACjC,YAAI,KAAKI,UAAL,IAAmB,KAAKA,UAAL,KAAoBJ,OAA3C,EAAoD;AAChD,gBAAMK,MAAM,GAAZ;AACA,iBAAKC,WAAL,CAAiBD,GAAjB,EAAsB,CAAtB;AACAhB,eAAGkB,KAAH,CAAS,KAAKX,IAAd,EACKY,KADL,CACWH,GADX,EAEKI,IAFL,CAEU,YAAM;AACR,sBAAKC,SAAL,CAAeV,OAAf,EAAwB,IAAxB;AACA,sBAAKW,UAAL,GAAkB,MAAKL,WAAL,CAAiBD,GAAjB,EAAsB,MAAKO,YAA3B,CAAlB;AACH,aALL,EAMKJ,KANL,CAMWH,GANX,EAOKI,IAPL,CAOU,YAAM;AAAE,sBAAKE,UAAL,GAAkB,IAAlB;AAAyB,aAP3C,EAQKE,KARL;AASH,SAZD,MAYO;AACH,iBAAKH,SAAL,CAAeV,OAAf,EAAwB,IAAxB,EAA8B,KAAKY,YAAnC;AACH;AACJ,KA7BI;AA+BLE,uBA/BK,iCA+BiB;AAClB,YAAI,KAAKC,QAAT,EAAmB;AACf,mBAAO,KAAKC,aAAL,CAAmBC,IAAnB,EAAP;AACH,SAFD,MAGK;AACD,mBAAO5B,GAAG6B,WAAH,CAAeC,cAAf,CAA8B,KAAKC,OAAnC,CAAP;AACH;AACJ,KAtCI;AAwCLC,qBAxCK,6BAwCaC,EAxCb,EAwCiB;AAClB,YAAI,CAACA,EAAL,EAAS,OAAO,CAAP;AACT,YAAI,KAAKP,QAAT,EAAmB;AACf,mBAAO,CAAP,CADe,CACL;AACb,SAFD,MAGK;AACD,gBAAIQ,WAAWlC,GAAG6B,WAAH,CAAeC,cAAf,CAA8BG,EAA9B,CAAf;AACA,mBAAOC,QAAP;AACH;AACJ,KAjDI;;;AAmDL;AACAC,qBApDK,+BAoDe;AAChB,aAAKC,YAAL;AACH,KAtDI;AAuDLC,oBAvDK,8BAuDc,CAAE,CAvDhB;AAwDLC,qBAxDK,+BAwDe,CAAE,CAxDjB;AAyDLC,iBAzDK,2BAyDW,CAAE,CAzDb;AA0DLC,oBA1DK,8BA0Da,CAAE,CA1Df;AA2DLC,oBA3DK,8BA2Da,CAAE;AA3Df,CAAT","file":"SlotSoundPlayer.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/slotGame","sourcesContent":["cc.Class({\n    extends: require('WebSoundPlayer').WebSoundPlayer,\n\n    playMainBGM() {\n        const mode = this.node.gSlotDataStore.currentGameMode;\n        if (!this.isEnableBGM) return;\n        let soundBG = this.bgmMain;\n        if (mode == 'freeGame') {\n            soundBG = this.bgmFree;\n        } else if (mode == \"bonusGame\") {\n            soundBG = this.bgmBonus;\n        }\n        soundBG = soundBG || this.bgmMain; // ! cover invalid sounds\n        if (this.currentBGM === soundBG) return;\n        if (this.currentBGM && this.currentBGM !== soundBG) {\n            const dur = 0.5;\n            this.fadeMusicTo(dur, 0);\n            cc.tween(this.node)\n                .delay(dur)\n                .call(() => {\n                    this.playMusic(soundBG, true);\n                    this.tweenMusic = this.fadeMusicTo(dur, this.MUSIC_VOLUME);\n                })\n                .delay(dur)\n                .call(() => { this.tweenMusic = null; })\n                .start();\n        } else {\n            this.playMusic(soundBG, true, this.MUSIC_VOLUME);\n        }\n    },\n\n    getMusicCurrentTime() {\n        if (this.webSound) {\n            return this.musicInstance.seek();\n        }\n        else {\n            return cc.audioEngine.getCurrentTime(this.ccMusic);\n        }\n    },\n\n    getSFXCurrentTime(id) {\n        if (!id) return 0;\n        if (this.webSound) {\n            return 0; //TODO support for howler;\n        }\n        else {\n            let progress = cc.audioEngine.getCurrentTime(id);\n            return progress;\n        }\n    },\n\n    // Empty function for override\n    playSfxTurboClick() {\n        this.playSFXClick();\n    },\n    playSfxPopupOpen() {},\n    playSfxPopupClose() {},\n    playSfxResult() {},\n    playSoundNearWin(){},\n    stopSoundNearWin(){}\n});\n"]}