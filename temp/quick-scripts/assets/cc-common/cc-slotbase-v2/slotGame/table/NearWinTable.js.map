{"version":3,"sources":["NearWinTable.js"],"names":["cc","Class","extends","Component","properties","nearWinEffect","Node","symbolsHolder","symbolPrefab","Prefab","bonusSymbol","scatterSymbol","jackpotSymbol","startAtScatterCount","stopAtScatterCount","startAtBonusCount","stopAtBonusCount","startAtJackpotCount","isSkipNearWinTurbo","onLoad","_startX","node","config","TABLE_FORMAT","length","SYMBOL_WIDTH","_nearWinSymbols","_countScatter","_countBonus","_countJp","_nearWinData","_nearWinAnim","_getAnimNearWin","start","on","setupNearWin","reelStopNearWin","resetNearWin","reels","data","matrix","_getMatrix","_isSkipEffect","curentConfig","mode","col","_setDataNearWin","isNearWin","extendTimeToStop","symbolName","row","_canWinBonus","_createSymbol","_canWinFree","_canWinJP","canWinBonus","canWinFree","canWinJP","warn","count","context","isFastToResult","_playNearWinSymbols","_playNearWinEffect","_clearSymbols","_stopNearWinEffect","_stopSoundNearWin","slice","symbol","_getNewSymbol","active","parent","x","_getXPosition","y","_getYPosition","changeToSymbol","disableHighlight","push","instantiate","showNumber","SYMBOL_HEIGHT","opacity","forEach","_playAnimSymbol","emit","enableHighlight","playAnimation","removeChild","destroy","getComponentInChildren","Animation","isNearWinBonus","_isNearWinBonus","isNearWinScatter","_isNearWinScatter","isNearWinJp","_isNearWinJp","play","_playSoundNearWin","stop","soundPlayer","playSoundNearWin","stopSoundNearWin"],"mappings":"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","file":"NearWinTable.js","sourceRoot":"../../../../../../../assets/cc-common/cc-slotbase-v2/slotGame/table","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        nearWinEffect: cc.Node,\n        symbolsHolder: cc.Node,\n        symbolPrefab: cc.Prefab,\n        bonusSymbol: 'R',\n        scatterSymbol: 'A',\n        jackpotSymbol: 'JP',\n        startAtScatterCount: 2,\n        stopAtScatterCount: 5,\n        startAtBonusCount: 2,\n        stopAtBonusCount: 5,\n        startAtJackpotCount: 4,\n        isSkipNearWinTurbo: true\n    },\n\n    onLoad() {\n        this._startX = -(this.node.config.TABLE_FORMAT.length / 2 - 0.5) * this.node.config.SYMBOL_WIDTH;\n        this._nearWinSymbols = [];\n        this._countScatter = 0;\n        this._countBonus = 0;\n        this._countJp = 0;\n        this._nearWinData = [];\n        this._nearWinAnim = null;\n        this._getAnimNearWin();\n    },\n    start() {\n        this.node.on(\"REEL_ABOUT_TO_STOP_NEARWIN\", this.setupNearWin, this);\n        this.node.on(\"REEL_STOP_NEARWIN\", this.reelStopNearWin, this);\n        this.node.on(\"TABLE_START_NEARWIN\", this.resetNearWin, this);\n    },\n\n    /**\n     * @API\n     */\n    setupNearWin({ reels, data }) {\n        const matrix = this._getMatrix(data);\n        this._isSkipEffect = this.isSkipNearWinTurbo && (reels[0].curentConfig.mode === \"TURBO\");\n\n        for (let col = 0; col < matrix.length; col++) {\n            this._setDataNearWin(col);\n            const { isNearWin } = this._nearWinData[col];\n            reels[col].extendTimeToStop(isNearWin);\n\n            for (let symbolName, row = 0; row < matrix[col].length; row++) {\n                symbolName = matrix[col][row];\n                if (symbolName === this.bonusSymbol) {\n                    this._countBonus++;\n                    this._canWinBonus(col) && this._createSymbol(this.bonusSymbol, col, row);\n                }\n                if (symbolName === this.scatterSymbol) {\n                    this._countScatter++;\n                    this._canWinFree(col) && this._createSymbol(this.scatterSymbol, col, row);\n                }\n                if (symbolName === this.jackpotSymbol) {\n                    this._countJp++;\n                    this._canWinJP(col) && this._createSymbol(this.jackpotSymbol, col, row);\n                }\n            }\n            this._nearWinData[col].canWinBonus = this._canWinBonus(col);\n            this._nearWinData[col].canWinFree = this._canWinFree(col);\n            this._nearWinData[col].canWinJP = this._canWinJP(col);\n        }\n        cc.warn('%c nearWinList', 'color: orange', this._nearWinData);\n    },\n    reelStopNearWin({ count, context }) {\n        if (count >= this.node.reels.length) return this.resetNearWin();\n        if (context.isFastToResult) return;\n        this._playNearWinSymbols(count - 1);\n        this._playNearWinEffect(count);\n    },\n    resetNearWin() {\n        this._countScatter = 0;\n        this._countBonus = 0;\n        this._countJp = 0;\n        this._nearWinData.length = 0;\n        this._clearSymbols();\n        this._stopNearWinEffect();\n        this._stopSoundNearWin();\n    },\n\n\n    /** @private */\n    _getMatrix(data) {\n        return data.slice();\n    },\n\n\n    //* logic play symbol\n    _canWinBonus(col) {\n        if ((col === 2) && (this._countBonus < 1)) return false;\n        if ((col === 3) && (this._countBonus < 2)) return false;\n        if ((col === 4) && (this._countBonus < 3)) return false;\n        return true;\n    },\n    _canWinFree(col) {\n        if ((col === 2) && (this._countScatter < 1)) return false; // _|_|_|\n        if ((col === 3) && (this._countScatter < 2)) return false; // A|_|_|_|\n        if ((col === 4) && (this._countScatter < 3)) return false; // A|_|_|_|A\n        return true;\n    },\n    _canWinJP(col) {\n        return this._countJp === col + 1;\n    },\n\n    _createSymbol(symbolName, col, row) {\n        const symbol = this._getNewSymbol();\n        symbol.active = true;\n        symbol.parent = this.symbolsHolder;\n        symbol.x = this._getXPosition(col);\n        symbol.y = this._getYPosition(col, row);\n        symbol.changeToSymbol(symbolName);\n        symbol.disableHighlight();\n        symbol.col = col;\n        symbol.row = row;\n        symbol.symbolName = symbolName;\n        symbol.active = false;\n        this._nearWinSymbols.push(symbol);\n    },\n    _getNewSymbol() {\n        // override it if using pool\n        return cc.instantiate(this.symbolPrefab);\n    },\n    _getXPosition(col) {\n        return this._startX + this.node.config.SYMBOL_WIDTH * col;\n    },\n    _getYPosition(col, row) {\n        const showNumber = this.node.config.TABLE_FORMAT[col];\n        return (showNumber / 2 - 0.5 - row) * this.node.config.SYMBOL_HEIGHT;\n    },\n\n    _playNearWinSymbols(col) {\n        this.symbolsHolder.opacity = 255;\n        this._nearWinSymbols.forEach(symbol => {\n            if (symbol.col <= col) {\n                this._playAnimSymbol(symbol);\n                this.node.emit('SHOW_STATIC_SYMBOL', col, symbol.row, symbol.symbolName, false);\n            }\n        });\n    },\n    _playAnimSymbol(symbol) {\n        symbol.active = true;\n        symbol.opacity = 255;\n        symbol.enableHighlight();\n        symbol.playAnimation();\n    },\n    _clearSymbols() {\n        // override it if using pool\n        this._nearWinSymbols.forEach(symbol => {\n            this.node.emit('SHOW_STATIC_SYMBOL', symbol.col, symbol.row, symbol.symbolName, true);\n            this.symbolsHolder.removeChild(symbol);\n            symbol.destroy();\n        });\n        this._nearWinSymbols.length = 0;\n    },\n\n\n    //* logic play effect\n    _getAnimNearWin(){\n        if (!this._nearWinAnim) this._nearWinAnim = this.nearWinEffect.getComponentInChildren(cc.Animation);\n    },\n    _setDataNearWin(col) {\n        const isNearWinBonus = this._isNearWinBonus();\n        const isNearWinScatter = this._isNearWinScatter();\n        const isNearWinJp = this._isNearWinJp();\n        const isNearWin = (isNearWinBonus || isNearWinScatter || isNearWinJp);\n        this._nearWinData[col] = { isNearWin, isNearWinBonus, isNearWinScatter, isNearWinJp };\n    },\n    _isNearWinBonus() {\n        if (this._isSkipEffect) return false;\n        return (this._countBonus >= this.startAtBonusCount) && (this._countBonus < this.stopAtBonusCount);\n    },\n    _isNearWinScatter() {\n        if (this._isSkipEffect) return false;\n        return (this._countScatter >= this.startAtScatterCount) && (this._countScatter < this.stopAtScatterCount);\n    },\n    _isNearWinJp() {\n        if (this._isSkipEffect) return false;\n        return (this._countJp >= this.startAtJackpotCount);\n    },\n\n    _playNearWinEffect(col) {\n        const { isNearWin } = this._nearWinData[col];\n        if (!isNearWin) return this._stopNearWinEffect();\n\n        if (!this.nearWinEffect.active) {\n            this.nearWinEffect.active = true;\n            this._nearWinAnim.play();\n            this._playSoundNearWin();\n        }\n        this.nearWinEffect.x = this._getXPosition(col);\n    },\n    _stopNearWinEffect() {\n        if (!this._nearWinAnim) return;\n        this._nearWinAnim.stop();\n        this.nearWinEffect.active = false;\n    },\n\n    _playSoundNearWin() {\n        this.node.soundPlayer && this.node.soundPlayer.playSoundNearWin();\n    },\n    _stopSoundNearWin() {\n        this.node.soundPlayer && this.node.soundPlayer.stopSoundNearWin();\n    }\n\n});\n"]}