{"version":3,"sources":["../../../../../../assets/cc-taoquan-9983/scripts/common/assets/cc-taoquan-9983/scripts/common/IntroGame9983.js"],"names":["cc","Class","extends","Component","properties","pageView","PageView","introNodes","type","Node","default","anchorPages","buttons","Button","isLoading","btnJoinGame","gameId","doNotShowNode","progressBar","start","node","on","enableButtonJoinGame","showButtonJoinGame","_onPageTurning","init","currentIndex","globalThis","currentIntroPage","showPageIntro","scrollToPage","cacheValue","JSON","parse","sys","localStorage","getItem","isHideIntroGame","active","opacity","getCurrentPageIndex","onNextIntro","onPrevIntro","forEach","item","index","isShow","interactable","onClickJoinGame","cacheHideIntroGame","runAction","sequence","fadeOut","callFunc","setItem","stringify","onCheckDoNotShowAgain","isEnable"],"mappings":"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","file":"IntroGame9983.js","sourceRoot":"../../../../../../assets/cc-taoquan-9983/scripts/common","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        pageView: cc.PageView,\n        introNodes: { type: cc.Node, default: [] },\n        anchorPages: { type: cc.Node, default: [] },\n        buttons: { type: cc.Button, default: [] },\n        isLoading: false,\n        btnJoinGame: cc.Button,\n        gameId: \"\",\n        doNotShowNode: cc.Node,\n        progressBar: cc.Node\n    },\n    start() {\n        this.node.on(\"ENABLE_BUTTON_JOIN_GAME\", this.enableButtonJoinGame, this);\n        this.node.on(\"SHOW_BUTTON_JOIN_GAME\", this.showButtonJoinGame, this);\n        this.pageView.node.on('scroll-ended', this._onPageTurning, this);\n        this.init();\n    },\n    init() {\n        this.currentIndex = globalThis.currentIntroPage || 0;\n        if (this.isLoading) this.currentIndex = 0;\n        this.showPageIntro();\n        this.pageView.scrollToPage(this.currentIndex, 0);\n        if (!this.isLoading) {\n            const cacheValue = JSON.parse(cc.sys.localStorage.getItem(\"HideIntroGame\")) || {};\n            this.isHideIntroGame = cacheValue[this.gameId];\n            this.node.active = !this.isHideIntroGame;\n            this.node.opacity = 255;\n            this.showButtonJoinGame(false);\n        }\n    },\n    _onPageTurning() {\n        this.currentIndex = this.pageView.getCurrentPageIndex();\n        this.showPageIntro();\n    },\n    onNextIntro() {\n        this.currentIndex++;\n        this.showPageIntro();\n        this.pageView.scrollToPage(this.currentIndex, 0.3);\n    },\n    onPrevIntro() {\n        this.currentIndex--;\n        this.showPageIntro();\n        this.pageView.scrollToPage(this.currentIndex, 0.3);\n    },\n    showPageIntro() {\n        globalThis.currentIntroPage = this.currentIndex;\n        this.introNodes.forEach((item, index) => {\n            const isShow = index == this.currentIndex;\n            item.active = isShow;\n            this.anchorPages[index].active = isShow;\n            this.buttons[index].interactable = isShow;\n        });\n    },\n    onClickJoinGame() {\n        this.cacheHideIntroGame();\n        this.node.runAction(cc.sequence(\n            cc.fadeOut(0.2),\n            cc.callFunc(() => {\n                this.node.active = false;\n            })\n        ));\n    },\n    cacheHideIntroGame() {\n        const cacheValue = {};\n        cacheValue[this.gameId] = this.isHideIntroGame;\n        cc.sys.localStorage.setItem(\"HideIntroGame\", JSON.stringify(cacheValue));\n    },\n    onCheckDoNotShowAgain() {\n        this.isHideIntroGame = !this.isHideIntroGame;\n    },\n    enableButtonJoinGame(isEnable) {\n        this.btnJoinGame && (this.btnJoinGame.interactable = isEnable);\n    },\n    showButtonJoinGame(isShow) {\n        this.progressBar && (this.progressBar.active = !isShow);\n        this.doNotShowNode && (this.doNotShowNode.active = isShow);\n        this.btnJoinGame && (this.btnJoinGame.node.active = isShow);\n    }\n\n});\n"]}