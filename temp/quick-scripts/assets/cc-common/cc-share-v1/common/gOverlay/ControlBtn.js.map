{"version":3,"sources":["ControlBtn.js"],"names":["cc","Class","extends","Component","properties","gamePrefab","Prefab","parentNode","Node","onLoad","loaded","on","showScore","showWallet","blur","focus","spinStart","loadGame","gameNode","instantiate","log","value","openGame","parent","active","gameNodeScript","getChildByName","gameNodeDimFocusControl","getComponent","emit","outGame","removeChild","closeConnection","globalNetwork","require","triggerUserLogout"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,gBAAY;AACRC,oBAAYL,GAAGM,MADP;AAERC,oBAAYP,GAAGQ;AAFP,KAFP;AAMLC,UANK,oBAMI;AACL,aAAKC,MAAL,GAAc,KAAd;;AAEA,aAAKH,UAAL,CAAgBI,EAAhB,CAAmB,gBAAnB,EAAqC,KAAKC,SAA1C;AACA,aAAKL,UAAL,CAAgBI,EAAhB,CAAmB,mBAAnB,EAAwC,KAAKE,UAA7C;AACA,aAAKN,UAAL,CAAgBI,EAAhB,CAAmB,UAAnB,EAA+B,KAAKG,IAApC;AACA,aAAKP,UAAL,CAAgBI,EAAhB,CAAmB,WAAnB,EAAgC,KAAKI,KAArC;AACA,aAAKR,UAAL,CAAgBI,EAAhB,CAAmB,gBAAnB,EAAqC,KAAKK,SAA1C;AAEH,KAfI;AAgBLC,YAhBK,sBAgBM;AACP,aAAKC,QAAL,GAAgBlB,GAAGmB,WAAH,CAAe,KAAKd,UAApB,CAAhB;AACH,KAlBI;AAmBLW,aAnBK,uBAmBM;AACPhB,WAAGoB,GAAH,CAAO,gBAAP;AACH,KArBI;AAsBLR,aAtBK,qBAsBKS,KAtBL,EAsBW;AACZrB,WAAGoB,GAAH,CAAO,YAAP,EAAoBC,KAApB;AACH,KAxBI;AAyBLR,cAzBK,sBAyBMQ,KAzBN,EAyBa;AACdrB,WAAGoB,GAAH,CAAO,aAAP,EAAqBC,KAArB;AACH,KA3BI;AA4BLP,QA5BK,kBA4BC;AACFd,WAAGoB,GAAH,CAAO,WAAP;AACH,KA9BI;AA+BLL,SA/BK,mBA+BG;AACJf,WAAGoB,GAAH,CAAO,YAAP;AACH,KAjCI;AAkCLE,YAlCK,sBAkCK;AACN,YAAI,CAAC,KAAKZ,MAAV,EAAkB;AACd,iBAAKQ,QAAL,CAAcK,MAAd,GAAuB,KAAKhB,UAA5B;AACA,iBAAKW,QAAL,CAAcM,MAAd,GAAsB,IAAtB;AACA,iBAAKC,cAAL,GAAsB,KAAKP,QAAL,CAAcQ,cAAd,CAA6B,SAA7B,CAAtB;AACA,iBAAKC,uBAAL,GAA+B,KAAKT,QAAL,CAAcU,YAAd,CAA2B,iBAA3B,CAA/B;AACA,iBAAKH,cAAL,CAAoBI,IAApB,CAAyB,cAAzB;AACA,iBAAKnB,MAAL,GAAc,IAAd;AACH,SAPD,MAOO;AACH,iBAAKe,cAAL,CAAoBI,IAApB,CAAyB,WAAzB;AACA,iBAAKF,uBAAL,CAA6BZ,KAA7B,IAAsC,KAAKY,uBAAL,CAA6BZ,KAA7B,EAAtC;AACH;;AAED,eAAO,KAAKG,QAAZ;AACH,KAhDI;AAiDLY,WAjDK,qBAiDI;AACL,YAAI,KAAKpB,MAAT,EAAiB;AACb,iBAAKe,cAAL,CAAoBI,IAApB,CAAyB,UAAzB;AACA,iBAAKtB,UAAL,CAAgBwB,WAAhB,CAA4B,KAAKb,QAAjC;AACA,iBAAKR,MAAL,GAAc,KAAd;AACH;AACJ,KAvDI;AAwDLsB,mBAxDK,6BAwDa;AACd,YAAMC,gBAAgBC,QAAQ,eAAR,CAAtB;AACAD,sBAAcE,iBAAd;AACH;AA3DI,CAAT","file":"ControlBtn.js","sourceRoot":"../../../../../../../assets/cc-common/cc-share-v1/common/gOverlay","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        gamePrefab: cc.Prefab,\n        parentNode: cc.Node,\n    },\n    onLoad() {\n        this.loaded = false;\n\n        this.parentNode.on('PLT_SHOW_SCORE', this.showScore);\n        this.parentNode.on('PLT_WALLET_UPDATE', this.showWallet);\n        this.parentNode.on('PLT_BLUR', this.blur);\n        this.parentNode.on('PLT_FOCUS', this.focus);\n        this.parentNode.on('PLT_SPIN_START', this.spinStart);\n        \n    },\n    loadGame() {\n        this.gameNode = cc.instantiate(this.gamePrefab);\n    },\n    spinStart(){\n        cc.log(\"PLT_Start_Spin\");\n    },\n    showScore(value){\n        cc.log(\"PLT_Score:\",value);\n    },\n    showWallet(value) {\n        cc.log(\"PLT_Wallet:\",value);\n    },\n    blur(){\n        cc.log(\"PLT_Blur!\");\n    },\n    focus() {\n        cc.log(\"PLT_Focus!\");\n    },\n    openGame(){\n        if (!this.loaded) {\n            this.gameNode.parent = this.parentNode;\n            this.gameNode.active= true;\n            this.gameNodeScript = this.gameNode.getChildByName('Scripts');\n            this.gameNodeDimFocusControl = this.gameNode.getComponent('DimFocusControl');\n            this.gameNodeScript.emit('CONNECT_GAME');\n            this.loaded = true;\n        } else {\n            this.gameNodeScript.emit('OPEN_GAME');\n            this.gameNodeDimFocusControl.focus && this.gameNodeDimFocusControl.focus();\n        }\n        \n        return this.gameNode;\n    },\n    outGame(){\n        if (this.loaded) {\n            this.gameNodeScript.emit('OUT_GAME');\n            this.parentNode.removeChild(this.gameNode);\n            this.loaded = false;\n        }\n    },\n    closeConnection() {\n        const globalNetwork = require('globalNetwork');\n        globalNetwork.triggerUserLogout();\n    },\n});\n"]}