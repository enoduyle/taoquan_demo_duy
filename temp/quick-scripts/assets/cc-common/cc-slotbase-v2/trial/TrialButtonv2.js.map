{"version":3,"sources":["TrialButtonv2.js"],"names":["cc","Class","extends","require","properties","animationBtn","sp","Skeleton","blockInput","Node","enterTrial","idleTrial","enterReal","idleReal","noAnimReal","onLoad","_super","completeTrialSessionCount","node","on","canSwitchMode","showBlock","onEnableButtons","isOn","active","canClick","start","setAnimation","onPlayTrialButtonClicked","playSoundClick","displayRootNode","runAction","repeatForever","sequence","fadeTo","stopAllActions","opacity","playRealButton","getComponent","Button","interactable","delayTime","callFunc","playAnimTrialButton","addAnimation","onPlayRealButtonClicked","playTrialButton","playAnimRealButton","soundPlayer","playSFXTrialButton"],"mappings":"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","file":"TrialButtonv2.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/trial","sourcesContent":["cc.Class({\n    extends: require('TrialButton'),\n\n    properties: {\n        animationBtn: sp.Skeleton,\n        blockInput: cc.Node,\n        enterTrial: \"Press_ChoiThu\",\n        idleTrial: \"Idle_ChoiThu\",\n        enterReal: \"Press_ChoiThat\",\n        idleReal: \"Idle_ChoiThat\",\n        noAnimReal: \"Idle_ChoiThat_NoAnim\",\n    },\n\n    onLoad() {\n        this._super();\n        this.completeTrialSessionCount = 0;\n        this.node.on(\"CAN_SWITCH_MODE\", this.canSwitchMode, this);\n        this.node.on(\"SHOW_BLOCK_INPUTS\", this.showBlock, this);\n        this.onEnableButtons(false);\n        this.showBlock();\n    },\n\n    showBlock(isOn = false) {\n        if (this.blockInput) this.blockInput.active = isOn;\n    },\n\n    canSwitchMode() {\n        this.node.canClick = true;\n    },\n\n    start() {\n        if (this.animationBtn) {\n            this.animationBtn.setAnimation(0, this.idleTrial, true);\n        }\n    },\n\n    onPlayTrialButtonClicked() {\n        if (!this.node.canClick) return;\n        this.playSoundClick();\n        this._super();\n        if (this.completeTrialSessionCount < 2) {\n            this.displayRootNode.active = true;\n            this.displayRootNode.runAction(cc.repeatForever(cc.sequence(\n                cc.fadeTo(0.8, 150),\n                cc.fadeTo(0.8, 255)\n            )));\n        } else {\n            this.displayRootNode.stopAllActions();\n            this.displayRootNode.opacity = 255;\n        }\n        if (this.playRealButton) {\n            this.playRealButton.getComponent(cc.Button).interactable = false;\n            this.node.runAction(cc.sequence(\n                cc.delayTime(2.0),\n                cc.callFunc(() => {\n                    this.playRealButton.getComponent(cc.Button).interactable = true;\n                })\n            ));\n        }\n\n        this.playAnimTrialButton();\n    },\n\n    playAnimTrialButton() {\n        if (this.animationBtn) {\n            if (this.completeTrialSessionCount < 2) {\n                this.animationBtn.setAnimation(0, this.enterTrial, false);\n                this.animationBtn.addAnimation(0, this.idleReal, true);\n            } else {\n                this.animationBtn.setAnimation(0, this.enterTrial, false);\n                this.animationBtn.addAnimation(0, this.noAnimReal, true);\n            }\n        }\n    },\n\n    onPlayRealButtonClicked() {\n        if (!this.node.canClick) return;\n        this.playSoundClick();\n        this._super();\n        if (this.playTrialButton) {\n            this.playTrialButton.getComponent(cc.Button).interactable = false;\n            this.node.runAction(cc.sequence(\n                cc.delayTime(2.0),\n                cc.callFunc(() => {\n                    this.playTrialButton.getComponent(cc.Button).interactable = true;\n                })\n            ));\n        }\n        this.playAnimRealButton();\n        this.completeTrialSessionCount++;\n    },\n\n    playAnimRealButton() {\n        if (this.animationBtn) {\n            if (this.completeTrialSessionCount < 2) {\n                this.animationBtn.setAnimation(0, this.enterReal, false);\n                this.animationBtn.addAnimation(0, this.idleTrial, true);\n            } else {\n                this.animationBtn.setAnimation(0, this.enterReal, false);\n                this.animationBtn.addAnimation(0, this.idleTrial, false);\n            }\n        }\n    },\n\n    playSoundClick() {\n        if (this.node.soundPlayer && this.node.soundPlayer.playSFXTrialButton) {\n            this.node.soundPlayer.playSFXTrialButton();\n        }\n    }\n});\n"]}