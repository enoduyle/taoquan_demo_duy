{"version":3,"sources":["../../../../../../../assets/cc-common/cc-slotbase-v2/template/physics-reel/assets/cc-common/cc-slotbase-v2/template/physics-reel/SlotReelPhysics.js"],"names":["STATE","cc","Enum","IDLE","FALL_OUT","FALL_OUT_DONE","FALL_IN","EASING","SYMBOL_SCATTER","Class","extends","require","properties","symbolPrefab","Node","onLoad","_super","_easingRatio","specialSymbolNames","_specialSymbol","matrix","init","showNumber","gameConfig","col","isFreeMode","config","symbolList","SYMBOL_NAME_LIST_FREE","SYMBOL_NAME_LIST","totalNumber","showSymbols","hideSymbols","symbolStartShowY","SYMBOL_HEIGHT","symbolStartHideY","i","symbol","instantiate","name","parent","reel","storeCol","changeToSymbol","getRandomSymbolNameWithException","push","y","_getSymbolShowY","_getSymbolHideY","mode","durationFall","index","curentConfig","STATS","_state","_setupMode","_dur","DURATION","_gravity","_getEasingDis","row","_getEasingDur","startSpinningWithDelay","delay","_isStopping","reelDelayStart","REEL_DELAY_START","isFastToResult","_actionFallHire","sequence","delayTime","moveBy","easing","easeQuadraticActionIn","callFunc","length","_stopSpinning","stopAllActions","runAction","stopSpinningWithDelay","callback","callbackStopReel","update","easingY","easingDur","isWinJp","opacity","_actionFallIn","moveTo","x","easeQuadraticActionOut","indexOf","unshift","onReelStop","eventOnReelDown","Event","EventCustom","setUserData","node","dispatchEvent","speed","_hideSymbols","_storeSymbols","slotTable","storeSpecialSymbols","fastStopSpinning","forEach","fadeOutShowSymbols","fadeOut","resetSymbols","reset","bindTable","table","processSymbolOnWinJackpot"],"mappings":";;;;;;AAAA,IAAMA,QAAQC,GAAGC,IAAH,CAAQ;AAClBC,UAAM,CADY;AAElBC,cAAU,CAFQ;AAGlBC,mBAAe,CAHG;AAIlBC,aAAS,CAJS;AAKlBC,YAAQ;AALU,CAAR,CAAd;AAOA,IAAMC,iBAAiB,GAAvB;AACAP,GAAGQ,KAAH,CAAS;AACLC,aAASC,QAAQ,YAAR,CADJ;;AAGLC,gBAAY;AACRC,sBAAcZ,GAAGa;AADT,KAHP;;AAOLC,UAPK,oBAOI;AACL,aAAKC,MAAL;AACA,aAAKC,YAAL,GAAoB,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAApB;AACA,aAAKC,kBAAL,GAA0B,WAA1B;AACA,aAAKC,cAAL,GAAsB,EAAtB;AACA,aAAKC,MAAL,GAAc,EAAd;AACH,KAbI;AAeLC,QAfK,kBAeqF;AAAA,YAArFC,UAAqF,uEAAxE,CAAwE;AAAA,YAArEC,UAAqE,uEAAxD,IAAwD;AAAA,YAAlDC,GAAkD,uEAA5C,CAA4C;AAAA,YAAzCX,YAAyC,uEAA1B,IAA0B;AAAA,YAApBY,UAAoB,uEAAP,KAAO;;AACtF,aAAKD,GAAL,GAAWA,GAAX;AACA;AACA,aAAKE,MAAL,GAAcH,UAAd;AACA,YAAIE,UAAJ,EAAgB;AACZ,iBAAKE,UAAL,GAAkB,KAAKD,MAAL,CAAYE,qBAAZ,CAAkCJ,GAAlC,CAAlB;AACH,SAFD,MAEO;AACH,iBAAKG,UAAL,GAAkB,KAAKD,MAAL,CAAYG,gBAAZ,CAA6BL,GAA7B,CAAlB;AACH;AACD,aAAKC,UAAL,GAAkBA,UAAlB;;AAEA,aAAKH,UAAL,GAAkBA,UAAlB;AACA,aAAKQ,WAAL,GAAmB,KAAKR,UAAL,GAAkB,CAArC;;AAEA,aAAKT,YAAL,GAAoBA,YAApB;AACA,aAAKkB,WAAL,GAAmB,EAAnB;AACA,aAAKC,WAAL,GAAmB,EAAnB;;AAEA,aAAKC,gBAAL,GAAwB,KAAKP,MAAL,CAAYQ,aAApC;AACA,aAAKC,gBAAL,GAAwB,CAAC,KAAKb,UAAL,GAAkB,GAAnB,IAA0B,KAAKI,MAAL,CAAYQ,aAA9D;;AAEA,aAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAI,KAAKN,WAAzB,EAAsC,EAAEM,CAAxC,EAA2C;AACvC,gBAAMC,SAASpC,GAAGqC,WAAH,CAAe,KAAKzB,YAApB,CAAf;AACAwB,mBAAOE,IAAP,GAAc,YAAYH,CAA1B;AACAC,mBAAOG,MAAP,GAAgB,KAAKC,IAArB;AACAJ,mBAAOK,QAAP,GAAkBlB,GAAlB;AACAa,mBAAOM,cAAP,CAAsB,KAAKC,gCAAL,CAAsCpC,cAAtC,CAAtB;AACA,gBAAI4B,KAAKd,UAAT,EAAqB;AACjB,qBAAKS,WAAL,CAAiBc,IAAjB,CAAsBR,MAAtB;AACAA,uBAAOS,CAAP,GAAW,KAAKC,eAAL,CAAqBX,IAAI,KAAKd,UAA9B,CAAX;AACH,aAHD,MAGO;AACH,qBAAKU,WAAL,CAAiBa,IAAjB,CAAsBR,MAAtB;AACAA,uBAAOS,CAAP,GAAW,KAAKE,eAAL,CAAqBZ,CAArB,CAAX;AACH;AACJ,SAlCqF,CAkCpF;AACF,aAAKa,IAAL,GAAY,MAAZ;AACA,aAAKC,YAAL,GAAoB,CAApB;AACA,aAAKC,KAAL,GAAa,CAAb;AACA,aAAKC,YAAL,GAAoB,KAAK1B,MAAL,CAAY2B,KAAZ,CAAkB,KAAKJ,IAAvB,CAApB;AACA,aAAKK,MAAL,GAActD,MAAMG,IAApB;AACA,aAAKoD,UAAL;AACH,KAxDI;AA0DLA,cA1DK,wBA0DQ;AACT,aAAKC,IAAL,GAAY,KAAKJ,YAAL,CAAkBK,QAA9B;AACA,aAAKC,QAAL,GAAgB,KAAKhC,MAAL,CAAYQ,aAAZ,IAA6B,KAAKsB,IAAL,GAAY,KAAKA,IAA9C,CAAhB;AACH,KA7DI;AA+DLG,iBA/DK,yBA+DSC,GA/DT,EA+Dc;AACf,eAAO,KAAK3C,YAAL,CAAkB2C,GAAlB,IAAyB,KAAKlC,MAAL,CAAYQ,aAA5C;AACH,KAjEI;AAkEL2B,iBAlEK,yBAkESD,GAlET,EAkEc;AACf,eAAO,IAAI,KAAKD,aAAL,CAAmBC,GAAnB,CAAJ,YAA8B,KAAKF,QAAnC,EAA+C,CAA/C,IAAmD,CAA1D;AACH,KApEI;AAsELX,mBAtEK,2BAsEWa,GAtEX,EAsEgB;AAAE;AACnB,eAAO,KAAK3B,gBAAL,GAAwB2B,MAAM,KAAKlC,MAAL,CAAYQ,aAAjD;AACH,KAxEI;AAyELc,mBAzEK,2BAyEWY,GAzEX,EAyEgB;AAAE;AACnB,eAAO,KAAKzB,gBAAL,GAAwByB,MAAM,KAAKlC,MAAL,CAAYQ,aAAjD;AACH,KA3EI;AA6EL4B,0BA7EK,kCA6EkBC,KA7ElB,EA6EyB;AAAA;;AAC1B,aAAKT,MAAL,GAActD,MAAMI,QAApB;AACA,aAAK4D,WAAL,GAAmB,KAAnB;AACA,aAAK5C,MAAL,GAAc,EAAd;AACA,aAAKgC,YAAL,GAAoB,KAAK1B,MAAL,CAAY2B,KAAZ,CAAkB,KAAKJ,IAAvB,CAApB;AACA,YAAIgB,iBAAiBF,QAAQ,KAAKX,YAAL,CAAkBc,gBAA/C;AACA,aAAKC,cAAL,GAAsB,KAAtB;AACA,aAAKf,YAAL,GAAoB,KAAK1B,MAAL,CAAY2B,KAAZ,CAAkB,KAAKJ,IAAvB,CAApB;AACA,aAAKM,UAAL;;AAR0B,mCASjBK,GATiB;AAUtB,gBAAIvB,SAAS,MAAKN,WAAL,CAAiB6B,GAAjB,CAAb;AACAvB,mBAAO+B,eAAP,GAAyBnE,GAAGoE,QAAH,CACrBpE,GAAGqE,SAAH,CAAaL,cAAb,CADqB,EAErBhE,GAAGsE,MAAH,CAAU,MAAKf,IAAf,EAAqB,CAArB,EAAwB,CAAE,GAAF,GAAQ,MAAK9B,MAAL,CAAYQ,aAA5C,EAA2DsC,MAA3D,CAAkEvE,GAAGwE,qBAAH,EAAlE,CAFqB,EAGrBxE,GAAGyE,QAAH,CAAY,YAAM;AACd,oBAAGd,QAAQ,MAAK7B,WAAL,CAAiB4C,MAAjB,GAA0B,CAArC,EAAuC;AACnC,0BAAKrB,MAAL,GAActD,MAAMK,aAApB;AACA,wBAAG,MAAKe,MAAL,CAAYuD,MAAZ,KAAuB,MAAKrD,UAA/B,EAA0C;AACtC,8BAAKsD,aAAL;AACH;AACJ;AACJ,aAPD,CAHqB,CAAzB;AAYAvC,mBAAOwC,cAAP;AACAxC,mBAAOyC,SAAP,CAAiBzC,OAAO+B,eAAxB;AAxBsB;;AAS1B,aAAK,IAAIR,MAAM,CAAf,EAAkBA,MAAM,KAAK7B,WAAL,CAAiB4C,MAAzC,EAAiDf,KAAjD,EAAwD;AAAA,kBAA/CA,GAA+C;AAgBvD;AACJ,KAvGI;AAyGLmB,yBAzGK,iCAyGiBhB,KAzGjB,EAyG+C;AAAA,YAAvB3C,MAAuB,uEAAd,EAAc;AAAA,YAAV4D,QAAU;;AAChD,aAAK5D,MAAL,GAAcA,MAAd;AACA,aAAK6D,gBAAL,GAAwBD,WAAWA,QAAX,GAAsB,YAAM,CAAG,CAAvD;AACH,KA5GI;AA8GLE,UA9GK,oBA8GI;AACL,YAAG,KAAKlB,WAAR,EAAqB;AACrB,YAAI,KAAK5C,MAAL,CAAYuD,MAAZ,KAAuB,KAAKrD,UAA5B,CAAuC,cAAvC,IAAyD,KAAKgC,MAAL,KAAgBtD,MAAMK,aAAnF,EAAkG;AAC9F,gBAAI0D,QAAQ,KAAKvC,GAAL,GAAW,KAAK4B,YAAL,CAAkBc,gBAAzC;AACA,iBAAKU,aAAL,CAAmBb,KAAnB;AACH;AACJ,KApHI;AAsHLa,iBAtHK,2BAsHoB;AAAA;;AAAA,YAAXb,KAAW,uEAAH,CAAG;;AACrB,YAAG,KAAKC,WAAL,KAAqB,IAAxB,EAA8B;AAC9B,aAAKA,WAAL,GAAmB,IAAnB;AACA,aAAKV,MAAL,GAActD,MAAMM,OAApB;;AAHqB,qCAIZsD,GAJY;AAKjB,gBAAIvB,SAAS,OAAKL,WAAL,CAAiB4B,GAAjB,CAAb;AACA;AACAvB,mBAAOM,cAAP,CAAsB,OAAKvB,MAAL,CAAYwC,GAAZ,CAAtB;AACA,gBAAIuB,UAAU,OAAKxB,aAAL,CAAmBC,GAAnB,CAAd;AACA,gBAAIwB,YAAY,OAAKvB,aAAL,CAAmBD,GAAnB,CAAhB;AACA,aAACvB,OAAOgD,OAAR,KAAoBhD,OAAOiD,OAAP,GAAiB,GAArC;AACAjD,mBAAOkD,aAAP,GAAuBtF,GAAGoE,QAAH,CACnBpE,GAAGqE,SAAH,CAAaP,QAAQqB,SAArB,CADmB,EAEnBnF,GAAGuF,MAAH,CAAU,OAAKhC,IAAf,EAAqBnB,OAAOoD,CAA5B,EAA+B,OAAK1C,eAAL,CAAqBa,GAArB,CAA/B,EAA0DY,MAA1D,CAAiEvE,GAAGwE,qBAAH,EAAjE,CAFmB,EAGnBxE,GAAGuF,MAAH,CAAUJ,SAAV,EAAqB/C,OAAOoD,CAA5B,EAA+B,OAAK1C,eAAL,CAAqBa,GAArB,IAA4BuB,OAA3D,EAAoEX,MAApE,CAA2EvE,GAAGyF,sBAAH,EAA3E,CAHmB,EAInBzF,GAAGuF,MAAH,CAAUJ,SAAV,EAAqB/C,OAAOoD,CAA5B,EAA+B,OAAK1C,eAAL,CAAqBa,GAArB,CAA/B,EAA0DY,MAA1D,CAAiEvE,GAAGwE,qBAAH,EAAjE,CAJmB,EAKnBxE,GAAGyE,QAAH,CAAY,YAAM;AACd;AACA,oBAAG,OAAKxD,kBAAL,CAAwByE,OAAxB,CAAgCtD,OAAOA,MAAvC,IAAiD,CAAC,CAArD,EAAuD;AACnD,2BAAKlB,cAAL,CAAoByE,OAApB,CAA4BvD,MAA5B;AACH;AACD,oBAAIuB,QAAQ,CAAZ,EAAe;AACX,2BAAKiC,UAAL;AACA,2BAAKZ,gBAAL,IAAyB,OAAKA,gBAAL,EAAzB;AACH;AACD,oBAAGrB,QAAQ,CAAX,EAAa;AACT,wBAAIkC,kBAAkB,IAAI7F,GAAG8F,KAAH,CAASC,WAAb,CAAyB,mBAAzB,EAA8C,IAA9C,CAAtB;AACAF,oCAAgBG,WAAhB,CAA4B,EAACzE,KAAK,OAAKA,GAAX,EAA5B;AACA,2BAAK0E,IAAL,CAAUC,aAAV,CAAwBL,eAAxB;AACH;AACJ,aAdD,CALmB,CAAvB;AAqBAzD,mBAAOwC,cAAP;AACAxC,mBAAOyC,SAAP,CAAiBzC,OAAOkD,aAAxB;AACA,gBAAI,OAAKpB,cAAL,IAAuB9B,OAAOkD,aAAlC,EAAiD;AAC7ClD,uBAAOkD,aAAP,CAAqBa,KAArB,CAA2B,CAA3B;AACH;AApCgB;;AAIrB,aAAK,IAAIxC,MAAM,KAAK5B,WAAL,CAAiB2C,MAAjB,GAA0B,CAAzC,EAA4Cf,OAAO,CAAnD,EAAsDA,KAAtD,EAA6D;AAAA,mBAApDA,GAAoD;AAiC5D;AACJ,KA5JI;AA8JLiC,cA9JK,wBA8JQ;AACT,aAAKvC,MAAL,GAActD,MAAMG,IAApB;AACA,aAAK,IAAIyD,MAAM,CAAf,EAAkBA,MAAM,KAAK7B,WAAL,CAAiB4C,MAAzC,EAAiDf,KAAjD,EAAwD;AACpD,gBAAIvB,UAAS,KAAKN,WAAL,CAAiB6B,GAAjB,CAAb;AACAvB,oBAAOS,CAAP,GAAW,KAAKE,eAAL,CAAqBY,GAArB,CAAX;AACH;AACD;AACA;AACA,YAAIyC,eAAe,KAAKrE,WAAxB;AACA,aAAKA,WAAL,GAAmB,KAAKD,WAAxB;AACA,aAAKA,WAAL,GAAmBsE,YAAnB;AACA,aAAKC,aAAL;AACH,KA1KI;AA2KLA,iBA3KK,2BA2KU;AACX,aAAK,IAAIlE,IAAI,CAAb,EAAgBA,IAAI,KAAKjB,cAAL,CAAoBwD,MAAxC,EAAgDvC,GAAhD,EAAqD;AACjD,gBAAIC,WAAS,KAAKN,WAAL,CAAiBK,CAAjB,CAAb;AACA,gBAAI,KAAKmE,SAAT,EAAoB;AAChB,qBAAKA,SAAL,CAAeC,mBAAf,CAAmCnE,QAAnC,EAA2C,KAAKI,IAAhD;AACH;AACJ;AACJ,KAlLI;AAmLLgE,oBAnLK,8BAmLc;AACf,aAAKtC,cAAL,GAAsB,IAAtB;AACA,aAAKpC,WAAL,CAAiB2E,OAAjB,CAAyB,kBAAU;AAC/BrE,mBAAO+B,eAAP,IAA0B/B,OAAO+B,eAAP,CAAuBgC,KAAvB,CAA6B,CAA7B,CAA1B;AACH,SAFD;AAGA,aAAKpE,WAAL,CAAiB0E,OAAjB,CAAyB,kBAAU;AAC/BrE,mBAAOkD,aAAP,IAAwBlD,OAAOkD,aAAP,CAAqBa,KAArB,CAA2B,CAA3B,CAAxB;AACH,SAFD;AAGH,KA3LI;AA6LLO,sBA7LK,gCA6LgB;AACjB,aAAK5E,WAAL,CAAiB2E,OAAjB,CAAyB,kBAAU;AAC/BrE,mBAAOiD,OAAP,KAAmB,CAAnB,IAAwBjD,OAAOyC,SAAP,CAAiB7E,GAAG2G,OAAH,CAAW,GAAX,CAAjB,CAAxB;AACH,SAFD;AAGH,KAjMI;AAmMLC,gBAnMK,0BAmMU;AACX,aAAK9E,WAAL,CAAiB2E,OAAjB,CAAyB,kBAAU;AAC/BrE,mBAAOiD,OAAP,GAAiB,GAAjB;AACH,SAFD;AAGA,aAAKtD,WAAL,CAAiB0E,OAAjB,CAAyB,kBAAU;AAC/BrE,mBAAOiD,OAAP,GAAiB,GAAjB;AACH,SAFD;AAGH,KA1MI;AA4MLwB,SA5MK,mBA4ME;AACH,aAAK3F,cAAL,GAAsB,EAAtB;AACH,KA9MI;AAgNL4F,aAhNK,qBAgNKC,KAhNL,EAgNY;AACb,aAAKT,SAAL,GAAiBS,KAAjB;AACH,KAlNI;AAmNLC,6BAnNK,uCAmNsB;AACvB,aAAKjF,WAAL,CAAiB0E,OAAjB,CAAyB,kBAAU;AAC/BrE,mBAAOgD,OAAP,GAAiB,IAAjB;AACAhD,mBAAOiD,OAAP,GAAiB,CAAjB;AACH,SAHD;AAIH;AAxNI,CAAT","file":"SlotReelPhysics.js","sourceRoot":"../../../../../../../assets/cc-common/cc-slotbase-v2/template/physics-reel","sourcesContent":["const STATE = cc.Enum({\n    IDLE: 0,\n    FALL_OUT: 1,\n    FALL_OUT_DONE: 2,\n    FALL_IN: 3,\n    EASING: 4,\n});\nconst SYMBOL_SCATTER = 'A';\ncc.Class({\n    extends: require('SlotReelv2'),\n\n    properties: {\n        symbolPrefab: cc.Node\n    },\n\n    onLoad() {\n        this._super();\n        this._easingRatio = [0.25, 0.13, 0.05];\n        this.specialSymbolNames = '2,3,4,A,K';\n        this._specialSymbol = [];\n        this.matrix = [];\n    },\n\n    init(showNumber = 3, gameConfig = null, col = 0, symbolPrefab = null, isFreeMode = false) {\n        this.col = col;\n        // this.config = gameConfig;\n        this.config = gameConfig;\n        if (isFreeMode) {\n            this.symbolList = this.config.SYMBOL_NAME_LIST_FREE[col];\n        } else {\n            this.symbolList = this.config.SYMBOL_NAME_LIST[col];\n        }\n        this.isFreeMode = isFreeMode;\n\n        this.showNumber = showNumber;\n        this.totalNumber = this.showNumber * 2;\n\n        this.symbolPrefab = symbolPrefab;\n        this.showSymbols = [];\n        this.hideSymbols = [];\n\n        this.symbolStartShowY = this.config.SYMBOL_HEIGHT;\n        this.symbolStartHideY = (this.showNumber + 1.5) * this.config.SYMBOL_HEIGHT;\n\n        for (let i = 0; i < this.totalNumber; ++i) {\n            const symbol = cc.instantiate(this.symbolPrefab);\n            symbol.name = \"Symbol_\" + i;\n            symbol.parent = this.reel;\n            symbol.storeCol = col;\n            symbol.changeToSymbol(this.getRandomSymbolNameWithException(SYMBOL_SCATTER));\n            if (i >= showNumber) {\n                this.showSymbols.push(symbol);\n                symbol.y = this._getSymbolShowY(i % this.showNumber);\n            } else {\n                this.hideSymbols.push(symbol);\n                symbol.y = this._getSymbolHideY(i);\n            }\n        } // 0 -> 5; top -> bot\n        this.mode = 'FAST';\n        this.durationFall = 1;\n        this.index = 0;\n        this.curentConfig = this.config.STATS[this.mode];\n        this._state = STATE.IDLE;\n        this._setupMode();\n    },\n\n    _setupMode() {\n        this._dur = this.curentConfig.DURATION;\n        this._gravity = this.config.SYMBOL_HEIGHT / (this._dur * this._dur);\n    },\n\n    _getEasingDis(row) {\n        return this._easingRatio[row] * this.config.SYMBOL_HEIGHT;\n    },\n    _getEasingDur(row) {\n        return 2 * this._getEasingDis(row) / this._gravity ** 1 / 2;\n    },\n\n    _getSymbolShowY(row) { // 0,1,2\n        return this.symbolStartShowY - row * this.config.SYMBOL_HEIGHT;\n    },\n    _getSymbolHideY(row) { // 0,1,2\n        return this.symbolStartHideY - row * this.config.SYMBOL_HEIGHT;\n    },\n\n    startSpinningWithDelay(delay) {\n        this._state = STATE.FALL_OUT;\n        this._isStopping = false;\n        this.matrix = [];\n        this.curentConfig = this.config.STATS[this.mode];\n        let reelDelayStart = delay * this.curentConfig.REEL_DELAY_START;\n        this.isFastToResult = false;\n        this.curentConfig = this.config.STATS[this.mode];\n        this._setupMode();\n        for (let row = 0; row < this.showSymbols.length; row++) {\n            let symbol = this.showSymbols[row];\n            symbol._actionFallHire = cc.sequence(\n                cc.delayTime(reelDelayStart),\n                cc.moveBy(this._dur, 0, - 3.5 * this.config.SYMBOL_HEIGHT).easing(cc.easeQuadraticActionIn()),\n                cc.callFunc(() => {\n                    if(row === this.showSymbols.length - 1){\n                        this._state = STATE.FALL_OUT_DONE;\n                        if(this.matrix.length === this.showNumber){\n                            this._stopSpinning();\n                        }\n                    }\n                })\n            );\n            symbol.stopAllActions();\n            symbol.runAction(symbol._actionFallHire);\n        }\n    },\n\n    stopSpinningWithDelay(delay, matrix = [], callback) {\n        this.matrix = matrix;\n        this.callbackStopReel = callback ? callback : () => { };\n    },\n\n    update() {\n        if(this._isStopping) return;\n        if (this.matrix.length === this.showNumber /* got data */ && this._state === STATE.FALL_OUT_DONE) {\n            let delay = this.col * this.curentConfig.REEL_DELAY_START;\n            this._stopSpinning(delay);\n        }\n    },\n\n    _stopSpinning(delay = 0) {\n        if(this._isStopping === true) return;\n        this._isStopping = true;\n        this._state = STATE.FALL_IN;\n        for (let row = this.hideSymbols.length - 1; row >= 0; row--) {\n            let symbol = this.hideSymbols[row];\n            // symbol.active = true;\n            symbol.changeToSymbol(this.matrix[row]);\n            let easingY = this._getEasingDis(row);\n            let easingDur = this._getEasingDur(row);\n            !symbol.isWinJp && (symbol.opacity = 255);\n            symbol._actionFallIn = cc.sequence(\n                cc.delayTime(delay + easingDur),\n                cc.moveTo(this._dur, symbol.x, this._getSymbolShowY(row)).easing(cc.easeQuadraticActionIn()),\n                cc.moveTo(easingDur, symbol.x, this._getSymbolShowY(row) + easingY).easing(cc.easeQuadraticActionOut()),\n                cc.moveTo(easingDur, symbol.x, this._getSymbolShowY(row)).easing(cc.easeQuadraticActionIn()),\n                cc.callFunc(() => {\n                    // save the symbol need to change parent to on top layer\n                    if(this.specialSymbolNames.indexOf(symbol.symbol) > -1){\n                        this._specialSymbol.unshift(symbol);\n                    }\n                    if (row === 0) {\n                        this.onReelStop();\n                        this.callbackStopReel && this.callbackStopReel();\n                    }\n                    if(row === 2){\n                        let eventOnReelDown = new cc.Event.EventCustom('REEL_TOUCH_GROUND', true);\n                        eventOnReelDown.setUserData({col: this.col});\n                        this.node.dispatchEvent(eventOnReelDown);\n                    }\n                })\n            );\n            symbol.stopAllActions();\n            symbol.runAction(symbol._actionFallIn);\n            if (this.isFastToResult && symbol._actionFallIn) {\n                symbol._actionFallIn.speed(4);\n            }\n        }\n    },\n\n    onReelStop() {\n        this._state = STATE.IDLE;\n        for (let row = 0; row < this.showSymbols.length; row++) {\n            let symbol = this.showSymbols[row];\n            symbol.y = this._getSymbolHideY(row);\n        }\n        // switch 2 arrays: showSymbols with hideSymbols \n        // for next Spin and show payline\n        let _hideSymbols = this.hideSymbols;\n        this.hideSymbols = this.showSymbols;\n        this.showSymbols = _hideSymbols;\n        this._storeSymbols();\n    },\n    _storeSymbols(){\n        for (let i = 0; i < this._specialSymbol.length; i++) {\n            let symbol = this.showSymbols[i];\n            if (this.slotTable) {\n                this.slotTable.storeSpecialSymbols(symbol, this.reel);\n            }\n        }\n    },\n    fastStopSpinning() {\n        this.isFastToResult = true;\n        this.showSymbols.forEach(symbol => {\n            symbol._actionFallHire && symbol._actionFallHire.speed(4);\n        });\n        this.hideSymbols.forEach(symbol => {\n            symbol._actionFallIn && symbol._actionFallIn.speed(4);\n        });\n    },\n\n    fadeOutShowSymbols() {\n        this.showSymbols.forEach(symbol => {\n            symbol.opacity !== 0 && symbol.runAction(cc.fadeOut(0.5));\n        });\n    },\n\n    resetSymbols() {\n        this.showSymbols.forEach(symbol => {\n            symbol.opacity = 255;\n        });\n        this.hideSymbols.forEach(symbol => {\n            symbol.opacity = 255;\n        });\n    },\n\n    reset(){\n        this._specialSymbol = [];\n    },\n\n    bindTable(table) {\n        this.slotTable = table;\n    },\n    processSymbolOnWinJackpot(){\n        this.hideSymbols.forEach(symbol => {\n            symbol.isWinJp = true;\n            symbol.opacity = 0;\n        });\n    }\n});\n"]}