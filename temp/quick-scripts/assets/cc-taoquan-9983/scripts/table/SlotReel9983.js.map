{"version":3,"sources":["SlotReel9983.js"],"names":["cc","Class","extends","require","properties","wildSymbolPrefab","Prefab","onLoad","_super","_symbols","init","showNumber","gameConfig","col","symbolPrefab","isFreeMode","config","symbolList","SYMBOL_NAME_LIST_FREE","SYMBOL_NAME_LIST","showSymbols","totalNumber","TABLE_SYMBOL_BUFFER","TOP","BOT","subSymbolCount","tempMatrix","tableFormat","TABLE_FORMAT_FREE","TABLE_FORMAT","symbolStartY","SYMBOL_HEIGHT","i","symbol","instantiate","name","parent","reel","index","setPosition","symbolName","getRandomSymbolNameWithException","changeToSymbol","length","unshift","setSiblingIndex","push","mode","curentConfig","STATS","reset","wildType","initTable","tableParent","startSpinningWithDelay","delay","removeWildSymbols","stopSpinningWithDelay","matrix","data","callback","isMissWild","realMatrix","multipleValue","nwm","delayIndex","callbackStopReel","reelDelayStop","REEL_DELAY_STOP","isNearWin","subSymbol1","subSym1","subSymbol2","subSym2","fSubSym1","fSubSym2","normalMuitiplier","freeMuitiplier","fwm","director","getScheduler","schedule","setStepToStop","playFishFlying","Number","MAX_SAFE_INTEGER","currentSteps","isFastToResult","timeStop","calculateTimeStop","stop","wildIndex","indexOf","isWinWild","isNearWinWild","fishFlyingData","row","isMultiple","isFakeWild","speedUpFishFlyingEffect","playFishFlyingAnimation","fastStopSpinning","step","MAX_STEP","currentSpeed","steps","unschedule","showResult","circularSymbols","symbolIndex","lastSymbol","nameSymbol","getRandomSymbolName","removeSubSymbol","changeToBlurSymbol","isRealSymbol","symbolValue","addSubSymbol","isTransformWild","changeToFakeSymbol","y","onReelStop","children","forEach","child","addWildSymbols","wildSymbol","addWildSymbol","removeWildSymbol","setWildType","type","exceptionSymbol","Math","floor","random","currentStop","STEP_STOP","totalStep","timer","REEL_EASING_TIME","runStopAnimation","indexNearWin","time","TIME","action3","sequence","moveBy","callFunc","runAction"],"mappings":"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","file":"SlotReel9983.js","sourceRoot":"../../../../../../assets/cc-taoquan-9983/scripts/table","sourcesContent":["cc.Class({\n    extends: require('SlotReelv2'),\n\n    properties: {\n        wildSymbolPrefab: cc.Prefab,\n    },\n\n    onLoad() {\n        this._super();\n        this._symbols = [];\n    },\n\n    init(showNumber, gameConfig, col, symbolPrefab, isFreeMode = false) {\n        this.col = col;\n        this.config = gameConfig;\n        if(isFreeMode) {\n            this.symbolList = this.config.SYMBOL_NAME_LIST_FREE[col];\n        } else {\n            this.symbolList = this.config.SYMBOL_NAME_LIST[col];\n        }\n        this.symbolPrefab = symbolPrefab;\n        this.showNumber = showNumber;\n        this.showSymbols = [];\n        this.totalNumber = this.showNumber + this.config.TABLE_SYMBOL_BUFFER.TOP + this.config.TABLE_SYMBOL_BUFFER.BOT;\n        this.subSymbolCount = 0;\n        this.isFreeMode = isFreeMode;\n        if(isFreeMode){\n            this.tempMatrix = [\n                [2,1,0,-1],\n                [6,5,4,3],\n                [10,9,8,7],\n                [14,13,12,11],\n                [17,16,15,-1]\n            ];\n        } else {\n            this.tempMatrix = [\n                [2,1,0],\n                [5,4,3],\n                [8,7,6],\n                [11,10,9],\n                [14,13,12]\n            ];\n        }\n        \n        const tableFormat = this.isFreeMode ? this.config.TABLE_FORMAT_FREE : this.config.TABLE_FORMAT;\n        this.symbolStartY = - (tableFormat[col]/2 + this.config.TABLE_SYMBOL_BUFFER.BOT - 0.5) * this.config.SYMBOL_HEIGHT;\n        for (let i = 0; i < this.totalNumber; ++i) {\n            const symbol = cc.instantiate(this.symbolPrefab);\n            symbol.name = \"Symbol_\" + i;\n            symbol.parent = this.reel;\n            symbol.index = i;\n            symbol.setPosition(0, this.symbolStartY + i*this.config.SYMBOL_HEIGHT);\n            let symbolName = this.getRandomSymbolNameWithException([\"s1\",\"s2\",\"A\"]);\n            if (this.isFreeMode && symbolName[0] == 'K') {\n                symbolName = 6;\n            }\n            symbol.changeToSymbol(symbolName);\n            if (i >= this.config.TABLE_SYMBOL_BUFFER.BOT && this.showSymbols.length < this.showNumber) {\n                this.showSymbols.unshift(symbol);\n            }\n            symbol.setSiblingIndex(0);\n            this._symbols.push({symbol: symbol, index: i});\n        }\n\n        this.mode = 'FAST';\n        this.curentConfig = this.config.STATS[this.mode];\n        this.index = 0;\n        this.reset();\n\n        this.wildType = \"\";\n    },\n\n    initTable(tableParent) {\n        this.tableParent = tableParent;\n    },\n\n    startSpinningWithDelay(delay) {\n        this.removeWildSymbols();\n        this._super(delay);\n    },\n\n    stopSpinningWithDelay(delay, matrix = [], data = {}, callback, isMissWild) {\n        this.isMissWild = isMissWild;\n        this.realMatrix = data.matrix[this.col];\n        this.multipleValue = data.nwm;\n        this.delayIndex = delay;\n        this.showSymbols = [];\n        this.matrix = matrix;\n        this.callbackStopReel = callback ? callback : () => {};\n        let reelDelayStop = delay * this.curentConfig.REEL_DELAY_STOP;\n        this.isNearWin = false;\n        this.delay = delay;\n        this.subSymbol1 = data.subSym1;\n        this.subSymbol2 = data.subSym2;\n        if(data.fSubSym1){\n            this.subSymbol1 = data.fSubSym1;\n        }\n        if(data.fSubSym2){\n            this.subSymbol2 = data.fSubSym2;\n        }\n        this.normalMuitiplier = data.nwm;\n        this.freeMuitiplier = data.fwm;\n        cc.director.getScheduler().schedule(this.setStepToStop, this, 0, 0, reelDelayStop, false);\n\n        this.matrix.unshift(this.getRandomSymbolNameWithException('A'));\n        if (this.config.TABLE_SYMBOL_BUFFER.BOT > 0) {\n            this.matrix.push(this.getRandomSymbolNameWithException('A'));\n        }\n\n        this.playFishFlying(reelDelayStop, Number.MAX_SAFE_INTEGER);\n        // this.startTime = new Date().getTime();\n    },\n\n    playFishFlying(reelDelayStop, currentSteps, isFastToResult) {\n        const timeStop = this.calculateTimeStop(reelDelayStop, this.stop, currentSteps, isFastToResult);\n        const wildIndex = this.realMatrix.indexOf('K');\n        this.isWinWild = wildIndex >= 0 && this.multipleValue && this.multipleValue > 1;\n        // const isNearWinWild = Math.random() < 0.05 && this.col === 2 && this.isMissWild;\n        const isNearWinWild = false;\n        const fishFlyingData = { \n            timeStop,\n            row: wildIndex, \n            col: this.col, \n            isWinWild: this.isWinWild, \n            isMultiple: this.multipleValue && this.multipleValue > 1, \n            isFakeWild: isNearWinWild,\n            multipleValue: this.multipleValue\n        };\n        if (isFastToResult) {\n            // cc.log(timeStop, 'time stop fast calcualte: ' + this.col);\n            this.tableParent.speedUpFishFlyingEffect(fishFlyingData);\n        } else if (this.tableParent && (this.isWinWild || isNearWinWild) && !this.isFreeMode) {\n            // cc.log(timeStop, 'time stop calcualte: ' + this.col);\n            this.tableParent.playFishFlyingAnimation(fishFlyingData);\n        }\n    },\n\n    fastStopSpinning() {\n        // check step is reset will not do anything.\n        if (this.step === this.MAX_STEP) return;\n        this.currentSpeed = this.currentSpeed/3;\n        if (!this.isFastToResult) {\n            const steps = this.totalNumber + this.showNumber - (this.stop + this.config.TABLE_SYMBOL_BUFFER.BOT);\n            this.playFishFlying(0, steps, true);\n        }\n        this.isFastToResult = true;\n        cc.director.getScheduler().unschedule(this.setStepToStop,this);\n        this.showResult = 1;\n    },\n\n    circularSymbols() {\n        // const lastSymbol = this.reel.children[this.index%(this.totalNumber)];\n        const symbolIndex = this.index % (this.totalNumber);\n        const lastSymbol = this._symbols[symbolIndex].symbol;\n        this.index = symbolIndex;\n        if (!this.showResult) {\n            let nameSymbol = (this.subSymbolCount == 0) ? this.getRandomSymbolName() : this.getRandomSymbolNameWithException([\"s1\",\"s2\"]);\n            if(nameSymbol == 'K') {\n                nameSymbol += this.wildType; \n            }\n            if (lastSymbol.symbol == \"s1\" || lastSymbol.symbol == \"s2\") {\n                this.subSymbolCount -= 1;\n            }\n            if (nameSymbol == \"s1\" || nameSymbol == \"s2\") {\n                this.subSymbolCount += 1;\n            }\n            lastSymbol.removeSubSymbol();\n            lastSymbol.changeToBlurSymbol(nameSymbol);\n        } else if (this.stop < this.totalNumber) {\n            let isRealSymbol = this.stop >= this.config.TABLE_SYMBOL_BUFFER.TOP && this.stop < this.showNumber + this.config.TABLE_SYMBOL_BUFFER.TOP;\n            let symbolValue = this.matrix[this.stop];\n\n            if(symbolValue == 'K') {\n                symbolValue += this.wildType;\n            }\n            this.stop === 0 ? lastSymbol.changeToBlurSymbol(symbolValue) : lastSymbol.changeToSymbol(symbolValue);\n            if (isRealSymbol) {\n                this.showSymbols.unshift(lastSymbol);\n            }\n            //Show Sub Symbol\n            \n            if (this.subSymbol1 && isRealSymbol && this.subSymbol1.indexOf(this.tempMatrix[this.col][this.stop - 1]) >= 0) {\n                lastSymbol.addSubSymbol('s1');\n            } else if (this.subSymbol2 && isRealSymbol && this.subSymbol2.indexOf(this.tempMatrix[this.col][this.stop - 1]) >= 0) {\n                lastSymbol.addSubSymbol('s2');\n            } else {\n                lastSymbol.removeSubSymbol();\n            } \n            lastSymbol.isRealSymbol = isRealSymbol;\n            if (symbolValue[0] === 'K' && isRealSymbol) {\n                lastSymbol.isTransformWild = true;\n                if (!this.isFreeMode && this.multipleValue && this.multipleValue > 1) {\n                    lastSymbol.changeToFakeSymbol(this.getRandomSymbolNameWithException([\"s1\",\"s2\",'A','K']));\n                }\n            }\n            this.step = this.totalNumber + this.showNumber - (this.stop + this.config.TABLE_SYMBOL_BUFFER.BOT);\n            this.stop++;\n        }\n        lastSymbol.y = lastSymbol.y + this.config.SYMBOL_HEIGHT*(this.totalNumber);\n        lastSymbol.setSiblingIndex(0);\n        this.index++;\n    },\n\n    onReelStop() {\n        this.reel.children.forEach((child) => {\n            if (!child.isTransformWild) {\n                child.changeToSymbol(child.symbol);\n            }\n        });\n        // this.endTime = new Date().getTime();\n        // cc.log((this.endTime - this.startTime) / 1000, 'time stop table: ' + this.col);\n    },\n\n    reset() {\n        this._super();\n        this.addWildSymbols();\n    },\n\n    addWildSymbols() {\n        this.reel.children.forEach((child) => {\n            if (child.isTransformWild) {\n                const wildSymbol = cc.instantiate(this.wildSymbolPrefab);\n                child.wildSymbol = wildSymbol;\n                child.addWildSymbol(wildSymbol);\n                child.isTransformWild = false;\n            }\n        });\n    },\n\n    removeWildSymbols() {\n        this.reel.children.forEach((child) => {\n            if (child.wildSymbol) {\n                child.removeWildSymbol(child.wildSymbol);\n                child.wildSymbol = null;\n            }\n        });\n    },\n\n    setWildType(type) {\n        this.wildType = '' + type;\n    },\n\n    getRandomSymbolNameWithException(exceptionSymbol) {\n        let symbol = this.symbolList[Math.floor(Math.random()*this.symbolList.length)];\n        if(symbol == exceptionSymbol || exceptionSymbol.indexOf(symbol) >= 0){\n            symbol = this.getRandomSymbolNameWithException(exceptionSymbol);\n        }\n        return symbol;\n    },\n\n    calculateTimeStop(reelDelayStop = 0, currentStop = 0, currentSteps = 0, isFastToResult) {\n        let step = currentSteps > 100 ? this.curentConfig.STEP_STOP * 2 - this.showNumber : currentSteps;\n        let totalStep = step;\n        let stop = currentStop;\n        let timer = this.currentSpeed + this.currentSpeed*stop/4;\n        let showResult = isFastToResult ? 1 : 0;\n        if (isFastToResult) {\n            totalStep = step > this.totalNumber ? this.totalNumber : step;\n        }\n        for (let index = 0; index < totalStep; index++) {\n            if (showResult) {\n                stop++;\n            }\n            if (step > this.showNumber) {\n                timer += this.currentSpeed + this.currentSpeed*stop/4;\n                step--;\n                if (step < this.totalNumber) {\n                    showResult = 1;\n                }\n            } else if (step == this.showNumber) {\n                timer += this.curentConfig.REEL_EASING_TIME * 2;\n            }\n        }\n        return timer + reelDelayStop;\n    },\n    runStopAnimation(indexNearWin, time) {\n        const timer = time ? time : this.curentConfig.TIME;\n        this.onReelStop();\n        const action3 = cc.sequence(\n            cc.moveBy(timer, 0, -indexNearWin),\n            cc.callFunc(() => {\n                this.callbackStopReel();\n            }),\n            cc.moveBy(timer, 0, indexNearWin),\n            cc.callFunc(() => {\n                this.reset();\n                /// stop schedule when reel is stopped\n                cc.director.getScheduler().unschedule(this.setStepToStop,this);\n                this.currentSpeed = this.curentConfig.TIME;  \n            })\n        );\n        this.reel.runAction(action3);\n    },\n});"]}