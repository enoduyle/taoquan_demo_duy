{"version":3,"sources":["../../../../../../assets/cc-common/cc-slotbase-v2/component/assets/cc-common/cc-slotbase-v2/component/ParticleSystemControl.js"],"names":["cc","Class","extends","Component","editor","executeInEditMode","properties","particles","type","ParticleSystem","default","fadeInTime","fadeOutTime","onLoad","playEffect","i","particle","node","opacity","active","stopAllActions","runAction","sequence","fadeIn","callFunc","resetSystem","length","stopEffect","callback","stopSystem","fadeOut","onDestroy"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,YAAQ;AACJC,2BAAmB;AACnB;AAFI,KAFH;AAMLC,gBAAY;AACRC,mBAAU;AACNC,kBAAMR,GAAGS,cADH;AAENC,qBAAS;AAFH,SADF;AAKRC,oBAAY,CALJ;AAMRC,qBAAa;AANL,KANP;;AAeL;;AAEAC,UAjBK,oBAiBK,CAAE,CAjBP;AAkBLC,cAlBK,wBAkBO;AAAA;;AAAA,mCACAC,CADA;AAEJ,gBAAMC,WAAW,MAAKT,SAAL,CAAeQ,CAAf,CAAjB;AACA,gBAAGC,QAAH,EAAY;AACRA,yBAASC,IAAT,CAAcC,OAAd,GAAwB,CAAxB;AACAF,yBAASC,IAAT,CAAcE,MAAd,GAAuB,IAAvB;AACA,oBAAG,MAAKR,UAAL,GAAgB,CAAnB,EAAqB;AACjBK,6BAASC,IAAT,CAAcG,cAAd;AACAJ,6BAASC,IAAT,CAAcI,SAAd,CACIrB,GAAGsB,QAAH,CACItB,GAAGuB,MAAH,CAAU,MAAKZ,UAAf,CADJ,EAEIX,GAAGwB,QAAH,CAAY,YAAI;AACZR,iCAASS,WAAT;AACH,qBAFD,CAFJ,CADJ;AAQH,iBAVD,MAUK;AACDT,6BAASC,IAAT,CAAcC,OAAd,GAAwB,GAAxB;AACAF,6BAASS,WAAT;AACH;AAEJ;AArBG;;AACR,aAAI,IAAIV,IAAI,CAAZ,EAAeA,IAAG,KAAKR,SAAL,CAAemB,MAAjC,EAAyCX,GAAzC,EAA6C;AAAA,kBAArCA,CAAqC;AAqB5C;AACJ,KAzCI;AA2CLY,cA3CK,wBA2CsB;AAAA;;AAAA,YAAhBC,QAAgB,uEAAL,IAAK;;AAAA,qCACfb,CADe;AAEnB,gBAAMC,WAAW,OAAKT,SAAL,CAAeQ,CAAf,CAAjB;AACA,gBAAGC,QAAH,EAAY;AACRA,yBAASa,UAAT;AACA,oBAAG,OAAKjB,WAAL,GAAiB,CAApB,EAAsB;AAClBI,6BAASC,IAAT,CAAcG,cAAd;AACAJ,6BAASC,IAAT,CAAcI,SAAd,CACIrB,GAAGsB,QAAH,CACItB,GAAG8B,OAAH,CAAW,OAAKlB,WAAhB,CADJ,EAEIZ,GAAGwB,QAAH,CAAY,YAAI;AACZR,iCAASC,IAAT,CAAcE,MAAd,GAAuB,KAAvB;AACAS,oCAAUA,UAAV;AACH,qBAHD,CAFJ,CADJ;AASH,iBAXD,MAWK;AACDZ,6BAASC,IAAT,CAAcC,OAAd,GAAwB,CAAxB;AACAF,6BAASC,IAAT,CAAcE,MAAd,GAAuB,KAAvB;AACAS,gCAAUA,UAAV;AACH;AACJ;AArBkB;;AACvB,aAAI,IAAIb,IAAI,CAAZ,EAAeA,IAAG,KAAKR,SAAL,CAAemB,MAAjC,EAAyCX,GAAzC,EAA6C;AAAA,mBAArCA,CAAqC;AAqB5C;AACJ,KAlEI;AAoELgB,aApEK,uBAoEM;AACP,aAAKxB,SAAL,GAAiB,EAAjB;AACA,aAAKA,SAAL,GAAiB,IAAjB;AACH;AAvEI,CAAT","file":"ParticleSystemControl.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/component","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n    editor: {\n        executeInEditMode: true,\n        // playOnFocus: true,\n    },\n    properties: {\n        particles:{\n            type: cc.ParticleSystem,\n            default: [],\n        },\n        fadeInTime: 0,\n        fadeOutTime: 0,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {},\n    playEffect(){\n        for(let i = 0; i< this.particles.length; i++){\n            const particle = this.particles[i];\n            if(particle){\n                particle.node.opacity = 0;\n                particle.node.active = true;\n                if(this.fadeInTime>0){\n                    particle.node.stopAllActions();\n                    particle.node.runAction(\n                        cc.sequence(\n                            cc.fadeIn(this.fadeInTime),\n                            cc.callFunc(()=>{\n                                particle.resetSystem();\n                            }),\n                        )\n                    );\n                }else{\n                    particle.node.opacity = 255;\n                    particle.resetSystem();\n                }\n                \n            }\n        } \n    },\n\n    stopEffect(callback = null){\n        for(let i = 0; i< this.particles.length; i++){\n            const particle = this.particles[i];\n            if(particle){\n                particle.stopSystem();\n                if(this.fadeOutTime>0){\n                    particle.node.stopAllActions();\n                    particle.node.runAction(\n                        cc.sequence(\n                            cc.fadeOut(this.fadeOutTime),\n                            cc.callFunc(()=>{\n                                particle.node.active = false;\n                                callback&&callback();\n                            }),\n                        )\n                    );\n                }else{\n                    particle.node.opacity = 0;\n                    particle.node.active = false;\n                    callback&&callback();\n                }\n            }\n        } \n    },\n\n    onDestroy(){\n        this.particles = [];\n        this.particles = null;\n    },\n\n});\n"]}