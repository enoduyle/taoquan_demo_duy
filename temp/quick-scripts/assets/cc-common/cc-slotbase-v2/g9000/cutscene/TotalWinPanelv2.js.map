{"version":3,"sources":["TotalWinPanelv2.js"],"names":["cutsceneMode","require","formatMoney","cc","Class","extends","properties","winAmount","Node","closeBtn","titleLabel","onLoad","_super","start","localizeText","node","config","MESSAGE_DIALOG","getComponent","Label","string","YOU_WON","enter","canClose","runAction","sequence","callFunc","gSlotDataStore","playSession","callback","delayTime","Button","interactable","exit","close","stopAllActions","fadeOut","mainDirector","onIngameEvent","emit","active"],"mappings":";;;;;;AAAA,IAAMA,eAAeC,QAAQ,cAAR,CAArB;;eACwBA,QAAQ,OAAR;IAAhBC,uBAAAA;;AACRC,GAAGC,KAAH,CAAS;AACLC,aAASL,YADJ;;AAGLM,gBAAY;AACRC,mBAAWJ,GAAGK,IADN;AAERC,kBAAUN,GAAGK,IAFL;AAGRE,oBAAYP,GAAGK;AAHP,KAHP;;AASLG,UATK,oBASI;AACL,aAAKC,MAAL;AACH,KAXI;AAaLC,SAbK,mBAaG;AACJ,aAAKC,YAAL;AACH,KAfI;AAiBLA,gBAjBK,0BAiBU;AACX,YAAI,KAAKJ,UAAL,IAAmB,KAAKK,IAAL,CAAUC,MAAV,CAAiBC,cAAxC,EAAwD;AACpD,iBAAKP,UAAL,CAAgBQ,YAAhB,CAA6Bf,GAAGgB,KAAhC,EAAuCC,MAAvC,GAAgD,KAAKL,IAAL,CAAUC,MAAV,CAAiBC,cAAjB,CAAgCI,OAAhF;AACH;AACJ,KArBI;AAuBLC,SAvBK,mBAuBG;AAAA;;AACJ,aAAKC,QAAL,GAAgB,KAAhB;AACA,aAAKhB,SAAL,CAAeW,YAAf,CAA4Bf,GAAGgB,KAA/B,EAAsCC,MAAtC,GAA+C,EAA/C;AACA;AACA,aAAKL,IAAL,CAAUS,SAAV,CAAoBrB,GAAGsB,QAAH,CAChBtB,GAAGuB,QAAH,CAAY,YAAM;AAAA,gBACPnB,SADO,GACM,MAAKQ,IAAL,CAAUY,cAAV,CAAyBC,WAD/B,CACPrB,SADO;;AAEd,kBAAKA,SAAL,CAAeW,YAAf,CAA4Bf,GAAGgB,KAA/B,EAAsCC,MAAtC,GAA+ClB,YAAYK,SAAZ,CAA/C;AACA,kBAAKsB,QAAL,IAAe,MAAKA,QAAL,EAAf;AACA,kBAAKA,QAAL,GAAgB,IAAhB;AACH,SALD,CADgB,EAOhB1B,GAAG2B,SAAH,CAAa,GAAb,CAPgB,EAQhB3B,GAAGuB,QAAH,CAAY,YAAM;AACd,kBAAKH,QAAL,GAAgB,IAAhB;AACA,kBAAKd,QAAL,CAAcS,YAAd,CAA2Bf,GAAG4B,MAA9B,EAAsCC,YAAtC,GAAqD,IAArD;AACH,SAHD,CARgB,EAYhB7B,GAAG2B,SAAH,CAAa,GAAb,CAZgB,EAahB3B,GAAGuB,QAAH,CAAY,YAAM;AACd,kBAAKO,IAAL;AACH,SAFD,CAbgB,CAApB;AAiBH,KA5CI;AA8CLC,SA9CK,mBA8CG;AAAA;;AACJ,YAAI,CAAC,KAAKX,QAAV,EAAoB;AACpB,aAAKA,QAAL,GAAgB,KAAhB;AACA,aAAKd,QAAL,CAAcS,YAAd,CAA2Bf,GAAG4B,MAA9B,EAAsCC,YAAtC,GAAqD,KAArD;AACA,aAAKjB,IAAL,CAAUoB,cAAV;AACA,aAAKpB,IAAL,CAAUS,SAAV,CAAoBrB,GAAGsB,QAAH,CAChBtB,GAAGiC,OAAH,CAAW,GAAX,CADgB,EAEhBjC,GAAGuB,QAAH,CAAY,YAAM;AACd;AACA,mBAAKO,IAAL;AACH,SAHD,CAFgB,CAApB;AAOH,KA1DI;AA4DLA,QA5DK,kBA4DE;AACH,aAAKxB,QAAL,CAAcS,YAAd,CAA2Bf,GAAG4B,MAA9B,EAAsCC,YAAtC,GAAqD,KAArD;AACA,aAAKH,QAAL,IAAiB,KAAKA,QAAL,EAAjB;AACA,aAAKA,QAAL,GAAgB,IAAhB;AACA,YAAG,KAAKd,IAAL,CAAUsB,YAAb,EAA0B;AACtB,iBAAKtB,IAAL,CAAUsB,YAAV,CAAuBC,aAAvB,CAAqC,mBAArC;AACH;AACD,aAAKvB,IAAL,CAAUwB,IAAV,CAAe,MAAf;AACA,aAAKxB,IAAL,CAAUyB,MAAV,GAAmB,KAAnB;AACH;AArEI,CAAT","file":"TotalWinPanelv2.js","sourceRoot":"../../../../../../../assets/cc-common/cc-slotbase-v2/g9000/cutscene","sourcesContent":["const cutsceneMode = require('CutsceneMode');\nconst { formatMoney } = require('utils');\ncc.Class({\n    extends: cutsceneMode,\n\n    properties: {\n        winAmount: cc.Node,\n        closeBtn: cc.Node,\n        titleLabel: cc.Node,\n    },\n\n    onLoad() {\n        this._super();\n    },\n\n    start() {\n        this.localizeText();\n    },\n\n    localizeText() {\n        if (this.titleLabel && this.node.config.MESSAGE_DIALOG) {\n            this.titleLabel.getComponent(cc.Label).string = this.node.config.MESSAGE_DIALOG.YOU_WON;\n        }\n    },\n\n    enter() {\n        this.canClose = false;\n        this.winAmount.getComponent(cc.Label).string = '';\n        //Overwrite this when extends\n        this.node.runAction(cc.sequence(\n            cc.callFunc(() => {\n                const {winAmount} = this.node.gSlotDataStore.playSession;\n                this.winAmount.getComponent(cc.Label).string = formatMoney(winAmount);\n                this.callback&&this.callback();\n                this.callback = null;\n            }),\n            cc.delayTime(0.5),\n            cc.callFunc(() => {\n                this.canClose = true;\n                this.closeBtn.getComponent(cc.Button).interactable = true;\n            }),\n            cc.delayTime(3.5),\n            cc.callFunc(() => {\n                this.exit();\n            }),\n        ));\n    },\n\n    close() {\n        if (!this.canClose) return;\n        this.canClose = false;\n        this.closeBtn.getComponent(cc.Button).interactable = false;\n        this.node.stopAllActions();\n        this.node.runAction(cc.sequence(\n            cc.fadeOut(0.5),\n            cc.callFunc(() => {\n                // this.node.soundPlayer.stopWinJackpot();\n                this.exit();\n            })\n        ));\n    },\n\n    exit() {\n        this.closeBtn.getComponent(cc.Button).interactable = false;\n        this.callback && this.callback();\n        this.callback = null;\n        if(this.node.mainDirector){\n            this.node.mainDirector.onIngameEvent(\"ON_CUTSCENE_CLOSE\");\n        }\n        this.node.emit(\"STOP\");\n        this.node.active = false;\n    }\n});\n"]}