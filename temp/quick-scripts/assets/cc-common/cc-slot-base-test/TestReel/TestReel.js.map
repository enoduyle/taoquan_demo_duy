{"version":3,"sources":["TestReel.js"],"names":["cc","Class","extends","require","properties","symbolPrefab","Node","onLoad","window","test","_super","initTest","remainStep","Number","MAX_SAFE_INTEGER","showNumber","gameConfig","col","isFreeMode","config","node","symbolList","SYMBOL_NAME_LIST_FREE","SYMBOL_NAME_LIST","showSymbols","totalNumber","TABLE_SYMBOL_BUFFER","TOP","BOT","symbolStartY","TABLE_FORMAT","SYMBOL_HEIGHT","i","symbol","instantiate","name","parent","reel","setPosition","changeToSymbol","getRandomSymbolName","length","unshift","mode","curentConfig","STATS","index","symbols","children","slice","reset","startSpinningWithDelay","evt","delay","matrix","reverse","scheduleOnce","stopSpinningWithDelay","setMode"],"mappings":"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","file":"TestReel.js","sourceRoot":"../../../../../../assets/cc-common/cc-slot-base-test/TestReel","sourcesContent":["cc.Class({\n    extends: require('SlotReelv2'),\n    properties: {\n        symbolPrefab: cc.Node\n    },\n    onLoad() {\n        window.test = this;\n        this._super();\n        this.initTest();\n        this.remainStep = Number.MAX_SAFE_INTEGER;\n    },\n    initTest(showNumber = 3, gameConfig = null, col = 0, isFreeMode = false) {\n        this.col = col;\n        this.config = gameConfig || this.node.config;\n        if (isFreeMode) {\n            this.symbolList = this.config.SYMBOL_NAME_LIST_FREE[col];\n        } else {\n            this.symbolList = this.config.SYMBOL_NAME_LIST[col];\n        }\n        // this.symbolPrefab = symbolPrefab;\n        this.showNumber = showNumber;\n        this.showSymbols = [];\n        this.totalNumber = this.showNumber + this.config.TABLE_SYMBOL_BUFFER.TOP + this.config.TABLE_SYMBOL_BUFFER.BOT;\n        this.isFreeMode = isFreeMode;\n        this.symbolStartY = - (this.config.TABLE_FORMAT[col] / 2 + this.config.TABLE_SYMBOL_BUFFER.BOT - 0.5) * this.config.SYMBOL_HEIGHT;\n        for (let i = 0; i < this.totalNumber; ++i) {\n            const symbol = cc.instantiate(this.symbolPrefab);\n            symbol.name = \"Symbol_\" + i;\n            symbol.parent = this.reel;\n            symbol.setPosition(0, this.symbolStartY + i * this.config.SYMBOL_HEIGHT);\n            symbol.changeToSymbol(this.getRandomSymbolName());\n            if (i >= this.config.TABLE_SYMBOL_BUFFER.BOT && this.showSymbols.length < this.showNumber) {\n                this.showSymbols.unshift(symbol);\n            }\n        }\n        this.mode = 'FAST';\n        this.curentConfig = this.config.STATS[this.mode];\n        this.index = 0;\n        this.symbols = this.reel.children.slice();\n        this.reset();\n    },\n    startSpinningWithDelay(evt, delay = 0) {\n        let matrix = [\"2\", \"3\", \"4\"].reverse();\n        this._super(delay);\n        this.scheduleOnce(() => {\n            this.stopSpinningWithDelay(\n                0,\n                matrix, // fake data result\n                function () {}\n            );\n        },.2); // time to get response from server: about 200ms\n    },\n    setMode(evt, mode) {\n        this.mode = mode;\n    },\n});"]}