{"version":3,"sources":["../../../../../../assets/cc-common/cc-share-v1/common/assets/cc-common/cc-share-v1/common/gameCommonUtils.js"],"names":["lodash","require","setDeviceOrientation","updateUtilConfig","gameCommonUtils","getUrlParam","name","cc","sys","isNative","url","URL","window","location","searchParams","get","addUrlParam","key","value","set","history","pushState","checkConditionCloseGameIframe","loadConfigAsync","getConfig","LOGIN_IFRAME","returnUrl","handleBackLobbyNativeClient","vjsb","closeCreatorGame","isCallCloseCreator","middleware","MiddlewareManager","os","OS_ANDROID","destroyInstance","globalNetwork","triggerUserLogout","CC_CMD","CMD_HOME","CMD_TEST","log","js2cMessage","JSON","stringify","cmd","data","handleCloseGameIframe","LOBBY_SCENE_NAME","IS_PRODUCTION","isBackLobbyClient","director","preloadScene","loadScene","trim","close","href","reload","handleFlowOutGame","handleBackLogin","LOGIN_SCENE_NAME","nodePersist","getScene","getChildByName","game","removePersistRootNode","getMessageSlot","mess","i18n","getBetValueWithGame","gameId","listBet","betValue","localStorage","getItem","isEmpty","newObj","setItem","parse","isArray","includes","isExist","Object","keys","map","betId","setBetValueWithGame","getKeyWithGame","betLinesValue","setKeyWithGame","optimizeScrollView","listView","view","parent","viewRect","rect","width","y","height","i","children","length","node","intersects","getBoundingBox","opacity","module","exports"],"mappings":"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","file":"gameCommonUtils.js","sourceRoot":"../../../../../../assets/cc-common/cc-share-v1/common","sourcesContent":["/* global closeCreatorGame */\n\nconst lodash = require('lodash');\nconst {setDeviceOrientation, updateUtilConfig} = require('utils');\n\nfunction gameCommonUtils() {\n\n    const getUrlParam = (name) => {\n        if (cc.sys.isNative) return null;\n        const url = new URL(window.location);\n        return url.searchParams.get(name);\n    };\n\n    const addUrlParam= (key, value) => {\n        if (cc.sys.isNative) return null;\n        const url = new URL(window.location);\n        url.searchParams.set(key, value);\n        window.history.pushState({}, '', url);\n    };\n\n    const checkConditionCloseGameIframe  = () => {\n        const loadConfigAsync = require('loadConfigAsync');\n        const {LOGIN_IFRAME} = loadConfigAsync.getConfig();\n        if  (!LOGIN_IFRAME) {\n            return true;\n        }\n        const returnUrl = getUrlParam('ru');\n        return (returnUrl && LOGIN_IFRAME);\n    };\n\n    const handleBackLobbyNativeClient = () => {\n        if (cc.sys.isNative) {\n            let vjsb = window['vjsb'];\n            if (typeof(closeCreatorGame) === 'function') {\n                if (!cc.isCallCloseCreator) {\n                    closeCreatorGame();\n                    //@ts-ignore\n                    if (middleware && middleware.MiddlewareManager && cc.sys.os === cc.sys.OS_ANDROID) {\n                        middleware.MiddlewareManager.destroyInstance();\n                    }\n                }\n                cc.isCallCloseCreator = true;\n                return true;\n            } else if (vjsb) {\n                let globalNetwork = require('globalNetwork');\n                globalNetwork.triggerUserLogout();\n                const CC_CMD = {\n                    CMD_HOME: 1,\n                    CMD_TEST: 2\n                };\n                cc.log('on home -- ' + vjsb.js2cMessage);\n                vjsb.js2cMessage(JSON.stringify({\n                    cmd: CC_CMD.CMD_HOME,\n                    data: {}\n                }));\n                return true;\n            }\n        }\n        return false;\n    };\n\n    const handleCloseGameIframe = () => {\n        const loadConfigAsync = require('loadConfigAsync');\n        const {LOBBY_SCENE_NAME, LOGIN_IFRAME, IS_PRODUCTION} = loadConfigAsync.getConfig();\n\n        const isBackLobbyClient = handleBackLobbyNativeClient();\n        if (isBackLobbyClient) return;\n\n        if  (!LOGIN_IFRAME) {\n            if (!IS_PRODUCTION) {\n                setDeviceOrientation(false);\n            }\n            updateUtilConfig('CURRENCY_CONFIG', null);\n            cc.director.preloadScene(LOBBY_SCENE_NAME, () => {\n                cc.director.loadScene(LOBBY_SCENE_NAME);\n            });\n            return;\n        }\n\n        const returnUrl = getUrlParam('ru');\n        if (returnUrl && LOGIN_IFRAME) {\n            if (returnUrl.trim() === 'close') {\n                window.close();\n            } else {\n                window.location.href = returnUrl;\n            }\n        } else {\n            location.reload();\n            // window.close();\n        }\n    };\n\n    const handleFlowOutGame = () => {\n        const loadConfigAsync = require('loadConfigAsync');\n        const {LOBBY_SCENE_NAME, LOGIN_IFRAME, IS_PRODUCTION} = loadConfigAsync.getConfig();\n\n        const isBackLobbyClient = handleBackLobbyNativeClient();\n        if (isBackLobbyClient) return;\n\n        if (LOGIN_IFRAME) {\n            if (window && window.location) {\n                window.location.reload();\n            }\n        } else {\n            if (!IS_PRODUCTION) {\n                setDeviceOrientation(false);\n            }\n            cc.director.preloadScene(LOBBY_SCENE_NAME, () => {\n                cc.director.loadScene(LOBBY_SCENE_NAME);\n            });\n        }\n    };\n    const handleBackLogin = () => {\n        const loadConfigAsync = require('loadConfigAsync');\n        const {LOGIN_IFRAME, LOBBY_SCENE_NAME, IS_PRODUCTION, LOGIN_SCENE_NAME} = loadConfigAsync.getConfig();\n        \n        const isBackLobbyClient = handleBackLobbyNativeClient();\n        if (isBackLobbyClient) return;\n        \n        if (LOGIN_IFRAME) {\n            if (window && window.location) {\n                window.location.reload();\n            }\n        } else {\n            if (IS_PRODUCTION) {\n                cc.director.preloadScene(LOBBY_SCENE_NAME, () => {\n                    cc.director.loadScene(LOBBY_SCENE_NAME);\n                });\n            } else {\n                const nodePersist = cc.director.getScene().getChildByName('OverlayPersistent');\n                if (nodePersist) {\n                    cc.game.removePersistRootNode(nodePersist);\n                }\n                setDeviceOrientation(false);\n                cc.director.preloadScene(LOGIN_SCENE_NAME, () => {\n                    cc.director.loadScene(LOGIN_SCENE_NAME);\n                });\n            }\n        }\n    };\n    const getMessageSlot = (mess = {}) => {\n        const i18n = require('LanguageData');\n        return i18n.getMessageSlot(mess) || {};\n    };\n    const getBetValueWithGame = (gameId, listBet = []) => {\n        if (!gameId) return '';\n\n        let betValue = cc.sys.localStorage.getItem('betValueWithGame');\n        if (lodash.isEmpty(betValue)) {\n            const newObj = {};\n            newObj[gameId] = '';\n            cc.sys.localStorage.setItem('betValueWithGame', JSON.stringify(newObj));\n        } else {\n            betValue = JSON.parse(betValue);\n            if (lodash.isEmpty(listBet)) {\n                return betValue[gameId];\n            } else {\n                if (lodash.isArray(listBet) && listBet.includes(betValue[gameId])) {\n                    return betValue[gameId];\n                } else {\n                    let isExist = false;\n                    Object.keys(listBet).map((betId) => {\n                        if (listBet[betId] === betValue[gameId]) {\n                            isExist = true;\n                        }\n                    });\n                    if (isExist) {\n                        return betValue[gameId];\n                    }\n                }\n            }\n        }\n        return '';\n    };\n\n    const setBetValueWithGame = (gameId, betId)  => {\n        let betValue = cc.sys.localStorage.getItem('betValueWithGame');\n        if (lodash.isEmpty(betValue)) {\n            const newObj = {};\n            newObj[gameId] = betId;\n            cc.sys.localStorage.setItem('betValueWithGame', JSON.stringify(newObj));\n        } else {\n            betValue = JSON.parse(betValue);\n            betValue[gameId] = betId;\n            cc.sys.localStorage.setItem('betValueWithGame', JSON.stringify(betValue));\n        }\n    };\n\n    const getKeyWithGame = (gameId, key, value = '') => {\n        if (!gameId || !key) return '';\n\n        let betLinesValue = cc.sys.localStorage.getItem(key);\n        if (lodash.isEmpty(betLinesValue)) {\n            const newObj = {};\n            newObj[gameId] = value;\n            cc.sys.localStorage.setItem(key, JSON.stringify(newObj));\n        } else {\n            betLinesValue = JSON.parse(betLinesValue);\n            return betLinesValue[gameId] ? betLinesValue[gameId] : value;\n        }\n        return value;\n    };\n\n    const setKeyWithGame = (gameId, key, value = '')  => {\n        if (!gameId || !key) return '';\n\n        let betLinesValue = cc.sys.localStorage.getItem(key);\n        if (lodash.isEmpty(betLinesValue)) {\n            const newObj = {};\n            newObj[gameId] = value;\n            cc.sys.localStorage.setItem(key, JSON.stringify(newObj));\n        } else {\n            betLinesValue = JSON.parse(betLinesValue);\n            betLinesValue[gameId] = value;\n            cc.sys.localStorage.setItem(key, JSON.stringify(betLinesValue));\n        }\n    };\n\n    const optimizeScrollView = (listView) => {\n        let view = listView.parent;\n        let viewRect = cc.rect(- view.width / 2, - listView.y - view.height, view.width, view.height);\n        for (let i = 0; i < listView.children.length; i++) {\n            const node = listView.children[i];\n            if (viewRect.intersects(node.getBoundingBox())) {\n                node.opacity = 255;\n            }\n            else {\n                node.opacity = 0;\n            }\n        }\n    };\n\n    return {\n        checkConditionCloseGameIframe,\n        handleCloseGameIframe,\n        setBetValueWithGame,\n        getBetValueWithGame,\n        handleBackLogin,\n        handleFlowOutGame,\n        getMessageSlot,\n        getUrlParam,\n        optimizeScrollView,\n        getKeyWithGame,\n        setKeyWithGame,\n        addUrlParam\n    };\n}\n\nmodule.exports = new gameCommonUtils();\n"]}