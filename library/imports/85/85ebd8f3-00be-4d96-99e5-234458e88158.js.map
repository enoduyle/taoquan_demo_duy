{"version":3,"sources":["../../../../../../../assets/cc-common/cc-slotbase-v2/slotGame/BetHistory/assets/cc-common/cc-slotbase-v2/slotGame/BetHistory/BetCellHistory4LBase.js"],"names":["require","formatMoney","MODE_POS","cc","Class","extends","properties","modePos","dotBonusJp","Node","dotTopUp","dotFree","updateData","data","detailBtn","active","listMode","totalBonusWinAmount","totalJpWinAmount","push","selectedOption","length","arrPos","pos","forEach","it","index","x","y","playSessionId","sessionId","session","getComponent","Label","string","substring","time","formatTimeStamp","parseInt","totalbet","Number","totalBetAmount","winAmount","totalWinAmount","node","config","PAY_LINE_ALLWAYS","betLines","totalLineCount","bettingLines","match","dataDetail"],"mappings":"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","file":"BetCellHistory4LBase.js","sourceRoot":"../../../../../../../assets/cc-common/cc-slotbase-v2/slotGame/BetHistory","sourcesContent":["const { formatMoney } = require('utils');\nconst { MODE_POS } = require('CustomType');\n\ncc.Class({\n    extends: require(\"BetCellHistory\"),\n\n    properties: {\n        modePos : [MODE_POS],\n        dotBonusJp: cc.Node,\n        dotTopUp: cc.Node,\n        dotFree: cc.Node,\n    },\n\n    updateData(data) {\n        this.detailBtn.active = false;\n\n        if (!data) return;\n        this.listMode = [];\n        this.dotBonusJp.active = false;\n        this.dotFree.active = false;\n        this.dotTopUp.active = false;\n\n        const {totalBonusWinAmount, totalJpWinAmount} = data;\n        if ((totalBonusWinAmount && totalBonusWinAmount > 0) \n            || (totalJpWinAmount && totalJpWinAmount > 0)) {\n            this.dotBonusJp.active = true;\n            this.listMode.push(this.dotBonusJp);\n        }\n\n        const {selectedOption} = data;\n        if (selectedOption && selectedOption > 0) {\n            if (selectedOption == 2) {\n                this.dotTopUp.active = true;\n                this.listMode.push(this.dotTopUp);\n            } else if (selectedOption == 1) {\n                this.dotFree.active = true;\n                this.listMode.push(this.dotFree);\n            }\n        }\n       \n        if (this.listMode.length > 0){\n            let arrPos = this.modePos[this.listMode.length-1].pos;\n            this.listMode.forEach((it, index)=>{\n                it.x = arrPos[index].x;\n                it.y = arrPos[index].y;\n            });\n        }\n        \n        this.playSessionId = data.sessionId;\n        this.session.getComponent(cc.Label).string = \"#\" + data.sessionId.substring(data.sessionId.length-8, data.sessionId.length);\n        this.time.getComponent(cc.Label).string = this.formatTimeStamp(parseInt(data.time));\n        this.totalbet.getComponent(cc.Label).string = formatMoney(Number(data.totalBetAmount));\n        this.winAmount.getComponent(cc.Label).string = formatMoney(data.totalWinAmount);\n        if (this.node.config.PAY_LINE_ALLWAYS)\n            this.betLines.getComponent(cc.Label).string = this.totalLineCount;\n        else\n        {\n            this.betLines.getComponent(cc.Label).string = (data.bettingLines.match(/,/g) || []).length + 1;\n        }\n        this.detailBtn.active = true;\n\n        this.dataDetail = data;\n    },\n});\n"]}