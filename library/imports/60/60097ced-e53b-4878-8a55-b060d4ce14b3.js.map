{"version":3,"sources":["../../../../../../assets/cc-common/cc-slotbase-v2/component/assets/cc-common/cc-slotbase-v2/component/SparkleFX.js"],"names":["cc","Class","extends","Component","properties","delayTimeMin","delayTimeMax","durationMin","durationMax","repeatForever","start","resetEffect","playEffect","delay","Math","random","duration","angle","_action","sequence","delayTime","spawn","scaleTo","easing","easeBackOut","fadeIn","rotateTo","fadeOut","callFunc","node","runAction","scale","opacity","stopEffect","target","stopAction","onDestroy"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,sBAAc,GADN;AAERC,sBAAc,CAFN;AAGRC,qBAAa,GAHL;AAIRC,qBAAa,CAJL;AAKRC,uBAAe;AALP,KAHP;;AAWL;;AAEA;;AAEAC,SAfK,mBAeI;AACL,aAAKC,WAAL;AACH,KAjBI;AAmBLC,cAnBK,wBAmBO;AAAA;;AACR,YAAIC,QAAQC,KAAKC,MAAL,MAAe,KAAKT,YAAL,GAAkB,KAAKD,YAAtC,IAAsD,KAAKA,YAAvE;AACA,YAAIW,WAAWF,KAAKC,MAAL,MAAe,KAAKP,WAAL,GAAiB,KAAKD,WAArC,IAAoD,KAAKA,WAAxE;AACA,YAAIU,QAAQH,KAAKC,MAAL,KAAc,GAAd,GAAoB,GAAhC;AACA,aAAKG,OAAL,GAAelB,GAAGmB,QAAH,CACXnB,GAAGoB,SAAH,CAAaP,KAAb,CADW,EAEXb,GAAGqB,KAAH,CACIrB,GAAGsB,OAAH,CAAWN,WAAS,CAApB,EAAuB,CAAvB,EAAyB,CAAzB,EAA4BO,MAA5B,CAAmCvB,GAAGwB,WAAH,EAAnC,CADJ,EAEIxB,GAAGyB,MAAH,CAAUT,WAAS,CAAnB,CAFJ,EAGIhB,GAAG0B,QAAH,CAAYV,WAAS,CAArB,EAAwBC,QAAM,CAA9B,CAHJ,CAFW,EAOXjB,GAAG0B,QAAH,CAAYV,QAAZ,EAAsBC,KAAtB,CAPW,EAQXjB,GAAGoB,SAAH,CAAaP,KAAb,CARW,EASXb,GAAGqB,KAAH,CACIrB,GAAGsB,OAAH,CAAWN,WAAS,CAApB,EAAuB,CAAvB,EAAyB,CAAzB,EAA4BO,MAA5B,CAAmCvB,GAAGwB,WAAH,EAAnC,CADJ,EAEIxB,GAAG2B,OAAH,CAAWX,WAAS,CAApB,CAFJ,CATW,EAaXhB,GAAG4B,QAAH,CAAY,YAAI;AACZ,kBAAKjB,WAAL;AACA,gBAAG,MAAKF,aAAR,EAAsB;AAClB,sBAAKG,UAAL;AACH;AACJ,SALD,CAbW,CAAf;;AAqBA,aAAKiB,IAAL,CAAUC,SAAV,CAAoB,KAAKZ,OAAzB;AACH,KA7CI;AA+CLP,eA/CK,yBA+CQ;AACT,aAAKkB,IAAL,CAAUE,KAAV,GAAkB,CAAlB;AACA,aAAKF,IAAL,CAAUZ,KAAV,GAAkB,CAAlB;AACA,aAAKY,IAAL,CAAUG,OAAV,GAAoB,CAApB;AACH,KAnDI;AAqDLC,cArDK,wBAqDO;AACR,YAAG,KAAKf,OAAL,IAAgB,KAAKA,OAAL,CAAagB,MAAb,IAAqB,IAAxC,EAA6C;AACzC,iBAAKL,IAAL,CAAUM,UAAV,CAAqB,KAAKjB,OAA1B;AACA,iBAAKA,OAAL,GAAe,IAAf;AACH;AACD,aAAKP,WAAL;AACH,KA3DI;AA6DLyB,aA7DK,uBA6DM;AACP,aAAKH,UAAL;AACH;;AAED;;AAjEK,CAAT","file":"SparkleFX.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/component","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        delayTimeMin: 0.5,\n        delayTimeMax: 2,\n        durationMin: 0.5,\n        durationMax: 2,\n        repeatForever: true,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n        this.resetEffect();\n    },\n\n    playEffect(){\n        let delay = Math.random()*(this.delayTimeMax-this.delayTimeMin) + this.delayTimeMin;\n        let duration = Math.random()*(this.durationMax-this.durationMin) + this.durationMin;\n        let angle = Math.random()*360 - 180;\n        this._action = cc.sequence(\n            cc.delayTime(delay),\n            cc.spawn(\n                cc.scaleTo(duration/2, 1,1).easing(cc.easeBackOut()),\n                cc.fadeIn(duration/2),\n                cc.rotateTo(duration/2, angle/2),\n            ),\n            cc.rotateTo(duration, angle),\n            cc.delayTime(delay),\n            cc.spawn(\n                cc.scaleTo(duration/2, 0,0).easing(cc.easeBackOut()),\n                cc.fadeOut(duration/2),\n            ),\n            cc.callFunc(()=>{\n                this.resetEffect();\n                if(this.repeatForever){\n                    this.playEffect();\n                }\n            }),\n        );\n\n        this.node.runAction(this._action);\n    },\n\n    resetEffect(){\n        this.node.scale = 0;\n        this.node.angle = 0;\n        this.node.opacity = 0;\n    },\n\n    stopEffect(){\n        if(this._action && this._action.target!=null){\n            this.node.stopAction(this._action);\n            this._action = null;\n        }\n        this.resetEffect();\n    },\n\n    onDestroy(){\n        this.stopEffect();\n    }\n\n    // update (dt) {},\n});\n"]}