{"version":3,"sources":["MiniBaseWriter.js"],"names":["cc","Class","extends","Component","onLoad","node","writer","makeScriptMiniGameStart","listScript","push","command","makeScriptMiniGameClick","itemId","currentPick","data","openCell","makeScriptResultReceive","makeScriptShowResult","gSlotDataStore","playSession","winAmount","bonusPlayRemain","bonusGameMatrix","currentBetData","slotBetDataStore","symV","lastEvent","index","value","modeTurbo","name","content"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,UAFK,oBAEI;AACL,aAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH,KAJI;AAMLC,2BANK,qCAMqB;AACtB,YAAMC,aAAa,EAAnB;;AAEAA,mBAAWC,IAAX,CAAgB;AACZC,qBAAS;AADG,SAAhB;AAGA,eAAOF,UAAP;AACH,KAbI;AAeLG,2BAfK,qCAeqB;AACtB,YAAIC,SAAS,KAAKP,IAAL,CAAUQ,WAAvB;AACA,eAAO,CACH,EAACH,SAAS,0BAAV,EAAsCI,MAAM,EAACC,UAAUH,MAAX,EAA5C,EADG,CAAP;AAGH,KApBI;AAsBLI,2BAtBK,qCAsBqB;AACtB,eAAO,CACH,EAACN,SAAS,aAAV,EADG,CAAP;AAGH,KA1BI;AA4BLO,wBA5BK,kCA4BkB;AACnB,YAAMT,aAAa,EAAnB;AADmB,oCAEmC,KAAKH,IAAL,CAAUa,cAAV,CAAyBC,WAF5D;AAAA,YAEZC,SAFY,yBAEZA,SAFY;AAAA,YAEDC,eAFC,yBAEDA,eAFC;AAAA,YAEgBC,eAFhB,yBAEgBA,eAFhB;AAAA,YAGZC,cAHY,GAGM,KAAKlB,IAAL,CAAUa,cAAV,CAAyBM,gBAAzB,CAA0CV,IAHhD,CAGZS,cAHY;AAAA,YAIZE,IAJY,GAIJ,KAAKpB,IAAL,CAAUa,cAAV,CAAyBQ,SAJrB,CAIZD,IAJY;;;AAMnB,YAAIb,SAAS,KAAKP,IAAL,CAAUQ,WAAvB;AACAL,mBAAWC,IAAX,CAAgB;AACZC,qBAAS,iBADG;AAEZI,kBAAM,EAACa,OAAOf,MAAR,EAAgBgB,OAAOH,IAAvB;AAFM,SAAhB;;AAKA,YAAIL,aAAaA,YAAY,CAA7B,EAAgC;AAC5BZ,uBAAWC,IAAX,CAAgB;AACZC,yBAAS,sBADG;AAEZI,sBAAM,EAACM,oBAAD;AAFM,aAAhB;AAIH;;AAED,YAAIC,eAAJ,EAAqB;AACjBb,uBAAWC,IAAX,CAAgB;AACZC,yBAAS;AADG,aAAhB;AAGA,mBAAOF,UAAP;AACH,SALD,MAKO;AACHA,uBAAWC,IAAX,CAAgB;AACZC,yBAAS,eADG;AAEZI,sBAAMQ;AAFM,aAAhB;AAIA,gBAAG,CAAC,KAAKjB,IAAL,CAAUa,cAAV,CAAyBW,SAA7B,EAAwC;AACpCrB,2BAAWC,IAAX,CAAgB;AACZC,6BAAS,eADG;AAEZI,0BAAM;AACFgB,8BAAM,WADJ;AAEFC,iCAAS;AACLX,gDADK;AAELG;AAFK;AAFP;AAFM,iBAAhB;AAUH,aAXD,MAWO;AACHf,2BAAWC,IAAX,CAAgB;AACZC,6BAAS,eADG;AAEZI,0BAAM;AACFgB,8BAAM,eADJ;AAEFC,iCAAS;AAFP;AAFM,iBAAhB;AAOH;AACDvB,uBAAWC,IAAX,CAAgB;AACZC,yBAAS;AADG,aAAhB;AAGA,mBAAOF,UAAP;AACH;AACJ;AAlFI,CAAT","file":"MiniBaseWriter.js","sourceRoot":"../../../../../../../assets/cc-common/cc-slotbase-v2/g9000/template-minigame","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n    onLoad() {\n        this.node.writer = this;\n    },\n\n    makeScriptMiniGameStart() {\n        const listScript = [];\n\n        listScript.push({\n            command: \"_miniGameStart\",\n        });\n        return listScript;\n    },\n\n    makeScriptMiniGameClick() {\n        let itemId = this.node.currentPick;\n        return [\n            {command: \"_sendRequestPlayMiniGame\", data: {openCell: itemId}},\n        ];\n    },\n\n    makeScriptResultReceive() {\n        return [\n            {command: \"_showResult\"},\n        ];\n    },\n\n    makeScriptShowResult() {\n        const listScript = [];\n        const {winAmount, bonusPlayRemain, bonusGameMatrix} = this.node.gSlotDataStore.playSession;\n        const {currentBetData} = this.node.gSlotDataStore.slotBetDataStore.data;\n        const {symV} = this.node.gSlotDataStore.lastEvent;\n\n        let itemId = this.node.currentPick;\n        listScript.push({\n            command: \"_openPickedItem\",\n            data: {index: itemId, value: symV}\n        });\n\n        if (winAmount && winAmount > 0) {\n            listScript.push({\n                command: \"_updateWinningAmount\",\n                data: {winAmount}\n            });\n        }\n\n        if (bonusPlayRemain) {\n            listScript.push({\n                command: \"_miniGameRestart\"\n            });\n            return listScript;\n        } else {\n            listScript.push({\n                command: \"_openAllItems\",\n                data: bonusGameMatrix\n            });\n            if(!this.node.gSlotDataStore.modeTurbo) {\n                listScript.push({\n                    command: \"_showCutscene\",\n                    data: {\n                        name: \"WinEffect\",\n                        content: {\n                            winAmount,\n                            currentBetData\n                        }\n                    }\n                }); \n            } else {\n                listScript.push({\n                    command: \"_showCutscene\",\n                    data: {\n                        name: \"TotalWinPanel\",\n                        content: {}\n                    }\n                });\n            }\n            listScript.push({\n                command: \"_gameExit\",\n            });\n            return listScript;\n        }\n    }\n});"]}