{"version":3,"sources":["WinEffect9983.js"],"names":["require","formatMoney","WIN_ANIM","PARTICLE_CONFIG","spawn","interval","minSpeed","maxSpeed","cc","Class","extends","properties","winAnim","Node","winAmount","overlayNode","fastParticle","ParticleSystem","winInfo","phaoHoaLeft","phaoHoaRight","phaoHoaParticle","_coinValue","coinValue","visible","get","set","value","_updateCoinWin","coinParticle3D","onLoad","_super","soundPlayer","node","rateMega","rateSuper","duration","typeWin","isShowFastEffect","isShowNormalEffect","getComponent","Label","string","currentBetData","_changeTitleWin","update","quickShow","winValue","Button","interactable","stopAllActions","tweenCoin","stop","tween","to","easing","call","hideFn","bind","start","enter","config3DParticle","type","conf","setSpawnRate","setItemSpeed","setSpawnInterval","show","data","content","modeTurbo","gSlotDataStore","showFastEffectWin","showEffectWin","fullDisplay","callback","opacity","active","runAction","sequence","delayTime","fadeIn","resetSystem","_fastEffectAction","stopAction","callFunc","stopSystem","exit","sp","Skeleton","setSkin","setSlotsToSetupPose","setAnimation","emit","_tweenLabel","scale","union","repeatForever","delay","_tweenCoin","mainDirector","currentGameMode","currentSlotDirector","director","buttons","superValue","megaValue","spine","resetEffectWin","clearTrack","_hideAction","target","fadeOut","onDisable"],"mappings":"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","file":"WinEffect9983.js","sourceRoot":"../../../../../../assets/cc-taoquan-9983/scripts/cutScene","sourcesContent":["const {formatMoney} = require('utils');\n\nconst WIN_ANIM = {\n    0: 'thanglon',\n    1: 'thangcuclon',\n    2: 'thangsieulon'\n};\nconst PARTICLE_CONFIG = {\n    0: {spawn: 4, interval: 0.25, minSpeed: 300, maxSpeed: 750},\n    1: {spawn: 6, interval: 0.25, minSpeed: 400, maxSpeed: 750},\n    2: {spawn: 8, interval: 0.2, minSpeed: 400, maxSpeed: 800},\n};\ncc.Class({\n    extends: require('CutsceneMode'),\n\n    properties: {\n        winAnim: cc.Node,\n        winAmount: cc.Node,\n        overlayNode: cc.Node,\n        fastParticle: cc.ParticleSystem,\n        winInfo: cc.Node,\n        phaoHoaLeft: cc.Node,\n        phaoHoaRight: cc.Node,\n        phaoHoaParticle: cc.Node,\n        _coinValue: 0,\n        coinValue: {\n            visible: false,\n            get: function () {\n                return this._coinValue;\n            },\n            set: function (value) {\n                this._coinValue = value;\n                this._updateCoinWin();\n            }\n        },\n        coinParticle3D: cc.Node,\n    },\n\n\n    onLoad() {\n        this._super();\n        this.soundPlayer = (this.node.soundPlayer) ? this.node.soundPlayer : this.node;\n        this.rateMega = 30;\n        this.rateSuper = 50;\n        this.duration = 9;\n        this.typeWin = 0;\n        this.isShowFastEffect = false;\n        this.isShowNormalEffect = false;\n    },\n\n    _updateCoinWin() {\n        this.winAmount.getComponent(cc.Label).string = formatMoney(this.coinValue);\n        if (this.currentBetData) {\n            if (this.coinValue >= this.currentBetData * this.rateSuper && this.typeWin === 1) {\n                this._changeTitleWin(2);\n            } else if (this.coinValue >= this.currentBetData * this.rateMega && this.typeWin === 0) {\n                this._changeTitleWin(1);\n            }\n        }\n    },\n\n    update() {\n        // if (!this.isUpdating) return;\n        this.winAmount.getComponent(cc.Label).string = formatMoney(this.coinValue);\n        // if (this.currentValue >= this.superWinAmount && this.currentTitle == 1) {\n        //     this.changeTitle(2);\n        // } else if (this.currentValue >= this.megaWinAmount  && this.currentTitle == 0) {\n        //     this.changeTitle(1);\n        // }\n    },\n\n    quickShow() {\n        if (this.coinValue === this.winValue) {\n            return;\n        }\n        this.overlayNode.getComponent(cc.Button).interactable = false;\n\n        this.node.stopAllActions();\n        this.tweenCoin.stop();\n        this.tweenCoin = cc.tween(this)\n            .to(0.8, {coinValue: this.winValue}, {easing: \"quadOut\"})\n            .call(this.hideFn.bind(this))\n            .start();\n    },\n\n    enter() {\n\n    },\n\n    config3DParticle(type){\n        let conf = PARTICLE_CONFIG[type];\n        this.coinParticle3D.setSpawnRate(conf.spawn);\n        this.coinParticle3D.setItemSpeed(conf.minSpeed, conf.maxSpeed);\n        this.coinParticle3D.setSpawnInterval(conf.interval);\n    },\n\n    show() {\n        this._super();\n        this.overlayNode.getComponent(cc.Button).interactable = true;\n        let data = this.content;\n        this.currentBetData = data.currentBetData;\n        this.winValue = data.winAmount;\n        const {modeTurbo} = this.node.gSlotDataStore;\n        modeTurbo ? this.showFastEffectWin() : this.showEffectWin();\n        this.node.fullDisplay = !modeTurbo;\n    },\n\n    showFastEffectWin() {  // turbo\n        if (this.isShowFastEffect) {\n            this.callback && this.callback();\n            this.callback = null;\n            return;\n        }\n        this.isShowFastEffect = true;\n        this.winInfo.opacity = 0;\n        if (this.overlayNode) {\n            this.overlayNode.active = false;\n        }\n        this.fastParticle.node.opacity = 0;\n        this.fastParticle.node.runAction(cc.sequence(\n            cc.delayTime(0.1),\n            cc.fadeIn(0.1),\n        ));\n        this.fastParticle.resetSystem();\n        this.callback && this.callback();\n        this.callback = null;\n        if( this._fastEffectAction){\n            this.node.stopAction(this._fastEffectAction);\n        }\n        this._fastEffectAction = cc.sequence(\n            cc.delayTime(1),\n            cc.callFunc(()=>{\n                this.fastParticle.stopSystem();\n            }),\n            cc.delayTime(2),\n            cc.callFunc(()=>{\n                this.isShowFastEffect = false;\n                this.isShowNormalEffect = false;\n                this.exit();\n            }),\n        );\n        this.node.runAction(this._fastEffectAction);\n    },\n\n    showEffectWin() {\n        this.isShowNormalEffect = true;\n        if(this.overlayNode){\n            this.overlayNode.active = true;\n        }\n        this.fastParticle.node.opacity = 0;\n        this.winInfo.opacity = 255;\n        this.winAnim.getComponent(sp.Skeleton).setSkin(WIN_ANIM[0]);\n        this.winAnim.getComponent(sp.Skeleton).setSlotsToSetupPose();\n        this.winAnim.getComponent(sp.Skeleton).setAnimation(0, 'animation', true);\n\n        this.soundPlayer.node.emit(\"STOP_ALL_AUDIO\");\n        this.soundPlayer.node.emit(\"PLAY_WIN_LOOP\");\n\n        this._tweenLabel && this._tweenLabel.stop();\n        this._tweenLabel = cc.tween(this.winAmount)\n            .to(0.3, {scale: 1.1}, {easing: \"sineInOut\"})\n            .to(0.3, {scale: 1}, {easing: \"sineInOut\"})\n            .union()\n            .repeatForever()\n            .start();\n        this.phaoHoaLeft.active = true;\n        this.phaoHoaRight.active = true;\n        this.phaoHoaLeft.getComponent(sp.Skeleton).setAnimation(0, 'animation', true);\n        this.phaoHoaRight.getComponent(sp.Skeleton).setAnimation(0, 'animation', true);\n        this.phaoHoaParticle.getComponent(cc.ParticleSystem).resetSystem();\n        cc.tween(this.node)\n            .delay(2)\n            .call(() => {\n                this.overlayNode.getComponent(cc.Button).interactable = true;\n            })\n            .start();\n        this._tweenCoin(this.winValue);\n\n        if (this.node.mainDirector.currentGameMode) {\n            const currentSlotDirector = this.node.mainDirector.currentGameMode.director;\n            if(currentSlotDirector){\n                currentSlotDirector.buttons.emit(\"ENABLE_SPIN_KEY\", false);\n            }\n        }\n    },\n\n    /**\n     * @effect\n     **/\n    _tweenCoin(winAmount) {\n        let superValue = this.rateSuper * this.currentBetData;\n        let megaValue = this.rateMega * this.currentBetData;\n        if (winAmount >= superValue) {\n            // thang cuc lon\n            this.tweenCoin = cc.tween(this)\n                .to(this.duration / 3, {coinValue: megaValue}, {easing: \"sineInOut\"})\n                .to(this.duration / 3, {coinValue: superValue}, {easing: \"sineInOut\"})\n                .to(this.duration / 3, {coinValue: winAmount}, {easing: \"sineInOut\"})\n                .call(() => {\n                    this.hideFn();\n                });\n        } else if (winAmount >= megaValue) {\n            // thang rat lon\n            this.tweenCoin = cc.tween(this)\n                .to(this.duration / 2, {coinValue: megaValue}, {easing: \"sineInOut\"})\n                .to(this.duration / 2, {coinValue: winAmount}, {easing: \"sineInOut\"})\n                .call(() => {\n                    this.hideFn();\n                });\n        } else {\n            // thang lon\n            this.tweenCoin = cc.tween(this)\n                .to(this.duration, {coinValue: winAmount}, {easing: \"sineInOut\"})\n                .call(() => {\n                    this.hideFn();\n                });\n        }\n\n        this.tweenCoin.start();\n    },\n    _changeTitleWin(type) {\n        this.typeWin = type;\n        let spine = this.winAnim.getComponent(sp.Skeleton);\n        // spine.clearTrack(0);\n        spine.setSkin(WIN_ANIM[type]);\n        spine.setSlotsToSetupPose();\n        // spine.setAnimation(0, 'animation', true);\n        this.config3DParticle(type);\n        this.soundPlayer.node.emit(\"PLAY_TEXT_CHANGE\");\n\n        if (this.typeWin === 1) {\n            // this.soundPlayer.playSoundBigWinMega();\n        } else if (this.typeWin === 2) {\n            // this.soundPlayer.playSoundBigWinFortune();\n        }\n    },\n \n    resetEffectWin() {\n        // let overlay = this.node.getChildByName('overlay');\n        this.config3DParticle(0);\n        this.coinParticle3D.exit();\n        this.config3DParticle(0);\n\n        this.coinValue = 0;\n        this.typeWin = 0;\n        this.winAmount.getComponent(cc.Label).string = \"\";\n        this.winAnim.getComponent(sp.Skeleton).clearTrack(0);\n\n        this.phaoHoaParticle.getComponent(cc.ParticleSystem).stopSystem();\n        //this.phaoHoaParticle.active = false;\n        this.phaoHoaLeft.active = false;\n        this.phaoHoaRight.active = false;\n       \n\n\n        if(this._hideAction!=null && this._hideAction.target!=null){\n            this.node.stopAction(this._hideAction);\n            this._hideAction = null;\n        }\n    },\n\n    hideFn() {\n        this.soundPlayer.node.emit(\"STOP_WIN_LOOP\");\n        this.soundPlayer.node.emit(\"PLAY_WIN_END\");\n        this._hideAction = cc.sequence(\n            cc.delayTime(1.5),\n            cc.fadeOut(0.5),\n            cc.callFunc(() => {\n                this.soundPlayer.node.emit(\"PLAY_SOUND_BACKGROUND\");\n                this.resetEffectWin();\n                this.isShowFastEffect = false;\n                this.isShowNormalEffect = false;\n\n                if (this.node.mainDirector.currentGameMode) {\n                    const currentSlotDirector = this.node.mainDirector.currentGameMode.director;\n                    if(currentSlotDirector){\n                        currentSlotDirector.buttons.emit(\"ENABLE_SPIN_KEY\", true);\n                    }\n                }\n                this.exit();\n            }),\n        );\n        this.node.runAction(this._hideAction);\n    },\n\n    onDisable() {\n        this.node.stopAllActions();\n        if (this.tweenCoin) {\n            this.tweenCoin.stop();\n        }\n        this._tweenLabel && this._tweenLabel.stop();\n        this._tweenLabel = null;\n    },\n});\n"]}