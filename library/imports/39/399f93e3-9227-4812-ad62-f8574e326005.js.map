{"version":3,"sources":["../../../../../../assets/cc-common/cc-slotbase-v2/component/assets/cc-common/cc-slotbase-v2/component/TouchBlocker.js"],"names":["cc","Class","extends","Component","properties","touchDelay","block","Node","onLoad","active","canvas","find","buttons","getComponentsInChildren","Button","currentTarget","forEach","bt","node","on","onTouchStart","onTouchEnd","checkActive","_unlockFunc","scheduleOnce","unschedule"],"mappings":";;;;;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAY,GADJ;AAERC,eAAON,GAAGO;AAFF,KAHP;;AAQL;;AAEAC,UAVK,oBAUK;AAAA;;AACN,aAAKF,KAAL,CAAWG,MAAX,GAAoB,KAApB;AACA,YAAIC,SAASV,GAAGW,IAAH,CAAQ,QAAR,CAAb;AACA,YAAIC,UAAUF,OAAOG,uBAAP,CAA+Bb,GAAGc,MAAlC,CAAd;AACA,aAAKC,aAAL,GAAqB,IAArB;AACAH,gBAAQI,OAAR,CAAgB,cAAM;AAClBC,eAAGC,IAAH,CAAQC,EAAR,CAAW,YAAX,EAAyB,YAAI;AACzB,sBAAKJ,aAAL,GAAqBE,GAAGC,IAAxB;AACA,sBAAKE,YAAL;AACH,aAHD;AAIAH,eAAGC,IAAH,CAAQC,EAAR,CAAW,UAAX,EAAuB,YAAI;AACvB,sBAAKE,UAAL;AACH,aAFD;AAGAJ,eAAGC,IAAH,CAAQC,EAAR,CAAW,aAAX,EAA0B,YAAI;AAC1B,sBAAKE,UAAL;AACH,aAFD;AAGH,SAXD;AAYH,KA3BI;AA6BLD,gBA7BK,0BA8BL;AAAA;;AACI,aAAKd,KAAL,CAAWG,MAAX,GAAoB,IAApB;AACA,aAAKa,WAAL,GAAmB,IAAnB;AACA,aAAKC,WAAL,GAAkB,YAAM;AACpB,mBAAKjB,KAAL,CAAWG,MAAX,GAAoB,KAApB;AACA,mBAAKa,WAAL,GAAmB,KAAnB;AACA,mBAAKC,WAAL,GAAmB,IAAnB;AACH,SAJD;AAKA,aAAKC,YAAL,CAAkB,KAAKD,WAAvB,EAAoC,KAAKlB,UAAzC;AACH,KAvCI;AAyCLgB,cAzCK,wBA0CL;AACI,YAAG,KAAKE,WAAR,EAAoB;AAChB,iBAAKE,UAAL,CAAgB,KAAKF,WAArB;AACA,iBAAKA,WAAL;AACH;AAEJ;AAhDI,CAAT","file":"TouchBlocker.js","sourceRoot":"../../../../../../assets/cc-common/cc-slotbase-v2/component","sourcesContent":["\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        touchDelay: 0.5,\n        block: cc.Node\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.block.active = false;\n        let canvas = cc.find('Canvas');\n        let buttons = canvas.getComponentsInChildren(cc.Button);\n        this.currentTarget = null;\n        buttons.forEach(bt => {\n            bt.node.on('touchstart', ()=>{\n                this.currentTarget = bt.node;\n                this.onTouchStart();\n            });\n            bt.node.on('touchend', ()=>{\n                this.onTouchEnd();\n            });\n            bt.node.on('touchcancel', ()=>{\n                this.onTouchEnd();\n            });\n        });\n    },\n\n    onTouchStart()\n    {\n        this.block.active = true;\n        this.checkActive = true;\n        this._unlockFunc= () => {\n            this.block.active = false;\n            this.checkActive = false;\n            this._unlockFunc = null;\n        };\n        this.scheduleOnce(this._unlockFunc, this.touchDelay);\n    },\n\n    onTouchEnd()\n    {   \n        if(this._unlockFunc){\n            this.unschedule(this._unlockFunc);\n            this._unlockFunc();\n        }\n        \n    },\n\n});\n"]}