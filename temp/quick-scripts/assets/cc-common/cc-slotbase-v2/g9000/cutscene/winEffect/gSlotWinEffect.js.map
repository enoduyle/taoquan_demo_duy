{"version":3,"sources":["gSlotWinEffect.js"],"names":["require","tweenObject","tweenLooping","typeOfWinEffArr","cc","Class","extends","Component","properties","BG","Node","textHolder","parttern","coinHolder","coinHolderFront","lightHolder","winAmount","lightingParticleBottom","ParticleSystem","particle3DEffect","particle3DSpeed","particleNode","type","default","particleElements","SpriteFrame","prefabData","Prefab","spriteData","onLoad","node","gSlotWinEffect","config","reformatAssets","coinSprite","winAssets","formatAssets","formatSpriteAssets","asset","object","count","i","length","_name","sprite","name","includes","useCoinSprite","particleTotal","min","max","particleGravityY","particleSpeed","particleSpeedVar","particleStartPosY","maxCoin","coinSpeed","coinPosY","lightSpeed","lightPositionArr","dx","dy","sc","currentPer","lastPer","winLevel","init","id","resetTitleHolder","setUpLighting","setUpGroupCoin","setUpParticleEff","opacity","dur","from","to","scale","scaleX","setWinEff","onUpdateSpeed","string","showFn","enterFrame","per","finalWin","isStartEff","update","coinSP","lightSP","setGroupCoinSpeed","setLightingSpeed","updateParticleSpeed","posY","y","hideFn","callback","easing","easeSineIn","runAction","sequence","delayTime","callFunc","exit","stopParticleEff","easeSineOut","active","particleNodeItem","initParticleItem","resetSystem","particleHolder","index","left","getChildByName","right","particleArr","totalElements","total","particleItem","instantiate","parent","spriteFrameID","Math","spriteFrameCountID","floor","random","totalSpriteFrame","getComponent","spriteFrame","randomShowParticle","setParticleSpeed","scheduleOnce","particleSystem","sp","j","children","item","gravity","speed","speedVar","isRemove","stopParticleItem","stopSystem","itemNode","destroy","winName","Sprite","changeTitle","title","resetTitle","intiSC","easeBackIn","easeBackOut","stopAllActions","scaleY","titleHolder","resetGroupHolder","groupHolder","lightPrefab","lightItem","initLighting","paramItem","randomRotaSP","randomScaleSP","x","initRotaSP","rotaSP","initSC","scaleSP","angle","n","coinGroupPrefab","posID","isRight","coinItem","initGroupCoin","padd_x","padd_y","start_y","stageWidth","paddingX","paddingY","anchorX","anchorY","maxOpacity","c","color","Color","updateData","reset","resetValue"],"mappings":"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","file":"gSlotWinEffect.js","sourceRoot":"../../../../../../../../assets/cc-common/cc-slotbase-v2/g9000/cutscene/winEffect","sourcesContent":["\n\nconst { tweenObject, tweenLooping } = require('globalAnimationLibrary');\n\nconst typeOfWinEffArr = [\"big\", \"mega\", \"super\"];\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        BG: cc.Node,\n        textHolder: cc.Node,\n        parttern: cc.Node,\n        coinHolder: cc.Node,\n        coinHolderFront: cc.Node,\n        lightHolder: cc.Node,\n        winAmount: cc.Node,\n        lightingParticleBottom: cc.ParticleSystem,\n        particle3DEffect: false,\n        particle3DSpeed: 10,\n\n        particleNode: {\n            type: cc.Node,\n            default: []\n        },\n\n        particleElements: {\n            type: cc.SpriteFrame,\n            default: []\n        },\n\n        prefabData: {\n            type: cc.Prefab,\n            default: []\n        },\n        spriteData: {\n            type: cc.SpriteFrame,\n            default: []\n        },\n    },\n\n    onLoad() {\n        this.node.gSlotWinEffect = this;\n        this.config();\n    },\n\n\n    reformatAssets(coinSprite) {\n        this.winAssets = {\n            prefabData: {},\n            spriteData: {},\n            particleNode: {},\n            particleElements: {}\n        };\n\n        this.winAssets.prefabData = this.formatAssets(this.prefabData);\n        this.winAssets.spriteData = this.formatAssets(this.spriteData);\n        this.winAssets.particleNode = this.formatAssets(this.particleNode);\n        this.winAssets.particleElements = this.formatSpriteAssets(coinSprite);\n    },\n\n    formatAssets(asset) {\n        let object = {};\n        let count = 0;\n        for (let i = 0; i < asset.length; i++) {\n            if (asset[i] != null) {\n                count++;\n                object[asset[i]._name] = asset[i];\n                object[i] = asset[i];\n            }\n        }\n\n        object[\"total\"] = count;\n        return object;\n    },\n\n    formatSpriteAssets(asset) {\n        let object = {};\n        let count = 0;\n        for (const sprite in asset) {\n            if (asset[sprite].name.includes('coin2')) {\n                count++;\n                object[asset[sprite].name] = asset[sprite];\n            }\n        }\n        object[\"total\"] = count;\n        if (count > 0) {\n            this.useCoinSprite = true;\n        }\n        return count > 0 ? object : this.formatAssets(this.particleElements);\n    },\n\n    config() {\n        //cofig particle\n        this.particleTotal = { min: 1, max: 6 };\n        this.particleGravityY = { min: -500, max: -2500 };\n        this.particleSpeed = { min: 20, max: 50 };\n        this.particleSpeedVar = { min: 30, max: 100 };\n        this.particleStartPosY = 200;\n\n        //cofig coin\n        this.maxCoin = 8;\n        this.coinSpeed = { min: .005, max: .01 };\n        this.coinPosY = { min: -540, max: -240 };\n\n        //cofig light\n        this.lightSpeed = { min: .1, max: .3 };\n        this.lightPositionArr = [\n            { dx: 600, dy: -110, sc: .7 },\n            { dx: 0, dy: -130, sc: 1.2 },\n            { dx: -600, dy: -110, sc: .7 }\n        ];\n\n        this.currentPer = 0;\n        this.lastPer = 0;\n        this.winLevel = null;\n    },\n\n    // use this for initialization\n    init(id, spriteData) {\n        //config for win effect;\n        this.config();\n        this.useCoinSprite = false;\n        //reformat assets.\n        this.reformatAssets(spriteData);\n        ///\n\n        this.resetTitleHolder(this.textHolder);\n\n        this.setUpLighting(this.lightHolder, this.lightPositionArr, this.winAssets.prefabData[\"WinningLighting\"]);\n        this.setUpGroupCoin(this.coinHolder, this.maxCoin, this.winAssets.prefabData[\"WinningGroupCoin\"]);\n        this.setUpGroupCoin(this.coinHolderFront, this.maxCoin, this.winAssets.prefabData[\"WinningGroupCoin\"]);\n        this.setUpParticleEff();\n        this.winAssets.particleNode[\"ParticleHolderBottom\"].opacity = .5;\n        this.winAssets.particleNode[\"ParticleHolderFront\"].opacity = .3;\n\n        //looping animation\n        tweenLooping(this.parttern, { dur: .5, opacity: { from: 255 * .5, to: 255 } });\n        tweenLooping(this.textHolder, { dur: .3, scale: { from: this.textHolder.scaleX, to: this.textHolder.scaleX + 0.05 } });\n\n        this.setWinEff(id);\n        this.onUpdateSpeed();\n\n        this.winAmount.string = '';\n\n        this.showFn();\n\n    },\n\n    enterFrame(per, finalWin) {\n        if (per > 1) per = 1;\n        if (per < 0) per = 0;\n\n        if(this.winLevel == null){\n            this.winLevel = 1;\n            switch (finalWin) {\n                case 'big':\n                    this.winLevel = .5;\n                    break;\n                case 'mega':\n                    this.winLevel = .7;\n                    break;\n            }\n        }\n\n        this.lastPer = per * this.winLevel;\n    },\n\n    onUpdateSpeed() {\n        this.isStartEff = true;\n    },\n\n    update(){\n        if(this.isStartEff){\n            if (!this || !this.coinSpeed) {\n                this.isStartEff = false;\n                return;\n            }\n            this.currentPer += (this.lastPer - this.currentPer) / 5;\n\n            const coinSP = this.coinSpeed.min + (this.coinSpeed.max - this.coinSpeed.min) * this.currentPer;\n            const lightSP = this.lightSpeed.min + (this.lightSpeed.max - this.lightSpeed.min) * this.currentPer;\n\n            this.setGroupCoinSpeed(this.coinHolder, coinSP);\n            this.setGroupCoinSpeed(this.coinHolderFront, coinSP);\n            this.setLightingSpeed(this.lightHolder, lightSP);\n\n            this.updateParticleSpeed(this.currentPer);\n\n            const posY = this.coinPosY.min + (this.coinPosY.max - this.coinPosY.min) * this.currentPer;\n            this.coinHolder.y = posY;\n            this.coinHolderFront.y = posY;\n            this.lightHolder.y = posY;\n        }\n    },\n\n    hideFn(callback) {\n        const easing = cc.easeSineIn();\n        const dur = 1;\n        this.node.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(() => {\n            tweenObject(this.node, {\n                dur: dur, opacity: 0, easing: easing, callback: () => {\n                    this.exit();\n                    callback();\n                }\n            });\n\n            this.stopParticleEff();\n        })));\n    },\n\n    showFn() {\n        const easing = cc.easeSineOut();\n        const dur = .5;\n\n        this.node.active = true;\n        this.node.opacity = 0;\n        tweenObject(this.node, { dur: dur, opacity: 255, easing: easing});\n    },\n\n    setUpParticleEff() {\n        for (let i = 0; i < this.particleNode.length; i++){\n            const particleNodeItem = this.particleNode[i];\n            this.initParticleItem(particleNodeItem, i);\n        }\n        //\n        this.lightingParticleBottom.resetSystem();\n    },\n\n    initParticleItem(particleHolder, index) {\n        const left = particleHolder.getChildByName(\"left\");\n        const right = particleHolder.getChildByName(\"right\");\n        const particleArr = [left, right];\n        const totalElements = this.winAssets.particleElements.total;\n\n        particleHolder.count = 0;\n        for (let i = 0; i < particleArr.length; i++) {\n            const particleItem = cc.instantiate(this.winAssets.prefabData[\"WinningParticle\"]);\n            particleItem.parent = particleArr[i];\n\n            let spriteFrameID = Math.min(index * 2 + i, totalElements);\n            if (this.particle3DEffect) {\n                particleItem.count = 0;\n                particleItem.spriteFrameCountID = Math.floor(Math.random() * totalElements);\n                particleItem.totalSpriteFrame = totalElements;\n                spriteFrameID = particleItem.spriteFrameCountID;\n            }\n            particleItem.getComponent(cc.ParticleSystem).spriteFrame = this.winAssets.particleElements[this.useCoinSprite ? `coin${200 + spriteFrameID}` : spriteFrameID];\n            particleItem.y = this.particleStartPosY;\n            particleItem.active = false;\n            this.randomShowParticle(particleItem);\n        }\n\n        //\n        this.setParticleSpeed(particleHolder, 0);\n\n    },\n\n    randomShowParticle(particleItem) {\n        this.scheduleOnce( ()=> {\n            const particleSystem = particleItem.getComponent(cc.ParticleSystem);\n            particleSystem.resetSystem();\n            particleItem.active = true;\n        }, Math.random() * 3);\n    },\n\n    setParticleSpeed(particleHolder, sp) {\n        const left = particleHolder.getChildByName(\"left\");\n        const right = particleHolder.getChildByName(\"right\");\n        const particleArr = [left, right];\n\n        for (let i = 0; i < particleArr.length; i++) {\n            const particleItem = particleArr[i];\n            for (var j = 0; j < particleItem.children.length; j++) {\n                const particleNode = particleItem.children[j];\n                if (particleNode) {\n                    const item = particleNode.getComponent(cc.ParticleSystem);\n\n                    // item.totalParticles = Math.floor(this.particleTotal.min + (this.particleTotal.max - this.particleTotal.min)*sp);\n                    item.gravity.y = this.particleGravityY.min + (this.particleGravityY.max - this.particleGravityY.min)*sp;\n                    item.speed = this.particleSpeed.min + (this.particleSpeed.max - this.particleSpeed.min)*sp;\n                    item.speedVar = this.particleSpeedVar.min + (this.particleSpeedVar.max - this.particleSpeedVar.min) * sp;\n\n                    //3d particle effect.\n                    if (this.particle3DEffect) {\n                        particleNode.count++;\n                        if (particleNode.count >= this.particle3DSpeed) {\n                            particleNode.count = 0;\n                            if (particleNode.spriteFrameCountID >= particleNode.totalSpriteFrame) {\n                                particleNode.spriteFrameCountID = 0;\n                            }\n                            item.spriteFrame = this.winAssets.particleElements[this.useCoinSprite ? `coin${200 + particleNode.spriteFrameCountID}` : particleNode.spriteFrameCountID];\n                            particleNode.spriteFrameCountID++;\n                        }\n                    }\n                }\n            }\n        }\n    },\n\n    stopParticleEff(isRemove = false) {\n        for (let i = 0; i < this.particleNode.length; i++){\n            const particleNodeItem = this.particleNode[i];\n            this.stopParticleItem(particleNodeItem, isRemove);\n        }\n        //\n        this.lightingParticleBottom.stopSystem();\n    },\n\n    stopParticleItem(particleHolder, isRemove) {\n        const left = particleHolder.getChildByName(\"left\");\n        const right = particleHolder.getChildByName(\"right\");\n        const particleArr = [left, right];\n        for (let i = 0; i < particleArr.length; i++) {\n            const particleItem = particleArr[i];\n            for (var j = 0; j < particleItem.children.length; j++) {\n                const itemNode = particleItem.children[j];\n                const item = itemNode.getComponent(cc.ParticleSystem);\n                if(!isRemove) item.stopSystem();\n                else {\n                    itemNode.destroy();\n                }\n            }\n        }\n    },\n\n    updateParticleSpeed(sp) {\n        if (!this.particleNode || !this.particleNode.length) return;\n\n        for (let i = 0; i < this.particleNode.length; i++) {\n            const particleNodeItem = this.particleNode[i];\n            this.setParticleSpeed(particleNodeItem, sp);\n        }\n    },\n\n    setWinEff(id) {\n        var winName = typeOfWinEffArr[id];\n        this.BG.getComponent(cc.Sprite).spriteFrame = this.winAssets.spriteData[\"winning-bg-\" + winName];\n        this.parttern.getComponent(cc.Sprite).spriteFrame = this.winAssets.spriteData[\"winning-parttern-\" + winName];\n        this.changeTitle(this.textHolder, winName);\n    },\n\n    changeTitle(textHolder, name) {\n        const title = textHolder.getChildByName(\"title\");\n        this.resetTitle(title);\n        const intiSC = title.scaleX;\n        tweenObject(title, {dur: .5, scale: intiSC * 1.5, opacity: 0, easing: cc.easeBackIn(), callback: () => {\n            title.getComponent(cc.Sprite).spriteFrame = this.winAssets.spriteData[\"winning-title-\" + name];\n            tweenObject(title, {dur: .5, scale: intiSC, opacity: 255, easing: cc.easeBackOut(), callback: () => {\n\n            }});\n        }});\n    },\n\n    resetTitle(title) {\n        title.stopAllActions();\n        title.scaleX = 1;\n        title.scaleY = 1;\n    },\n    resetTitleHolder(titleHolder) {\n        titleHolder.stopAllActions();\n        titleHolder.scaleX = 1;\n        titleHolder.scaleY = 1;\n    },\n\n    resetGroupHolder(groupHolder) {\n        for (var i = 0; i < groupHolder.children.length; i++) {\n            groupHolder.children[i].destroy();\n        }\n    },\n\n    setUpLighting(lightHolder, lightPositionArr, lightPrefab) {\n        this.resetGroupHolder(lightHolder);\n        lightHolder.y = this.lightHolder.min;\n        //\n        for (var i = 0; i < lightPositionArr.length; i++) {\n            const lightItem = cc.instantiate(lightPrefab);\n            this.initLighting(lightItem, lightPositionArr[i]);\n            lightItem.parent = lightHolder;\n        }\n    },\n\n    initLighting(lightItem, paramItem) {\n        const randomRotaSP = .5;\n        const randomScaleSP = 1;\n\n        lightItem.x = paramItem.dx;\n        lightItem.y = paramItem.dy;\n        lightItem.initRotaSP = Math.random() * randomRotaSP + randomRotaSP;\n        lightItem.rotaSP = lightItem.initRotaSP;\n\n        lightItem.initSC = Math.random() * randomScaleSP + paramItem.sc;\n        lightItem.scaleX = lightItem.scaleY = lightItem.initSC;\n        lightItem.scaleSP = lightItem.initSC;\n    },\n\n    setLightingSpeed(lightHolder, sp) {\n        if (!lightHolder || !lightHolder.children || !lightHolder.children.length) return;\n\n        for (var i = 0; i < lightHolder.children.length; i++) {\n            const lightItem = lightHolder.children[i];\n            lightItem.angle += sp;\n            lightItem.scaleX = lightItem.scaleY = lightItem.initSC + (Math.random() - Math.random()) * sp;\n        }\n    },\n\n    setUpGroupCoin(coinHolder, n, coinGroupPrefab) {\n\n        this.resetGroupHolder(coinHolder);\n        coinHolder.y = this.coinPosY.min;\n        //\n        let posID = 0;\n        let isRight = false;\n        for (var i = 0; i < n; i++) {\n            const coinItem = cc.instantiate(coinGroupPrefab);\n\n            //reset position ID and swtich to right side.\n            if (!isRight && i >= n / 2) {\n                isRight = true;\n                posID = 0;\n            }\n\n            this.initGroupCoin(coinItem, posID, n, isRight);\n            coinItem.parent = coinHolder;\n\n            posID++;\n        }\n    },\n\n    initGroupCoin(coinItem, posID, total, isRight) {\n        const padd_x = -250;\n        const padd_y =  300;\n        const start_y = -50;\n\n        const stageWidth = 1920;\n        const sc = 1 + posID/1.5;\n        const paddingX = padd_x * posID;\n        const paddingY = start_y - posID * padd_y;\n\n        coinItem.anchorX = (Math.random() - Math.random()) * .05 + .5;\n        coinItem.anchorY = (Math.random() - Math.random()) * .05 + .5;\n\n        coinItem.x = isRight ? stageWidth + paddingX : -paddingX;\n        coinItem.y = paddingY;\n        coinItem.isRight = isRight;\n        coinItem.scaleX = Math.random() > .5 ? sc : sc * -1;\n        coinItem.scaleY = Math.random() > .5 ? sc : sc * -1;\n\n        coinItem.maxOpacity = 125*(1-posID/(total/2-1));\n\n    },\n\n    setGroupCoinSpeed(coinHolder, sp) {\n        if (!coinHolder || !coinHolder.children || !coinHolder.children.length) return;\n\n        for (var i = 0; i < coinHolder.children.length; i++) {\n            const coinItem = coinHolder.children[i];\n            coinItem.angle += coinItem.isRight ? sp : -sp;\n            const c = coinItem.maxOpacity*this.lastPer;\n            if (coinItem.getChildByName(\"coin\"))\n                coinItem.getChildByName(\"coin\").color = new cc.Color(255-c,255-c,255-c,255);\n        }\n    },\n\n    updateData() {\n\n    },\n    reset() {\n\n    },\n\n    exit() {\n        this.isStartEff = false;\n        this.node.active = false;\n        this.resetGroupHolder(this.coinHolder);\n        this.resetGroupHolder(this.coinHolderFront);\n        this.resetGroupHolder(this.lightHolder);\n        this.stopParticleEff(true);\n        this.winAmount.resetValue();\n        this.parttern.stopAllActions();\n        this.changeTitle(this.textHolder, typeOfWinEffArr[0]);\n        this.textHolder.stopAllActions();\n        this.resetTitleHolder(this.textHolder);\n        this.resetTitle(this.textHolder.getChildByName(\"title\"));\n        this.textHolder.getChildByName(\"title\").getComponent(cc.Sprite).spriteFrame = this.winAssets.spriteData[\"winning-title-\" + typeOfWinEffArr[0]];\n    }\n});\n"]}