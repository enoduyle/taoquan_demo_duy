{"version":3,"sources":["DynamicLoadingSprites.js"],"names":["require","convertAssetArrayToObject","cc","Class","extends","Component","properties","symbolIds","defaultUrl","blurSymbolPrefix","onLoad","listIds","split","staticSymbolUrls","map","value","blurSymbolUrls","updatedSprites","updatedBlurs","getStaticSymbols","getBlurSymbols","loader","load","errors","resources","i","length","texture","getContent","Texture2D","spriteFrame","SpriteFrame","name","push","node","assets","emit","blurAssets"],"mappings":"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","file":"DynamicLoadingSprites.js","sourceRoot":"../../../../../../assets/cc-common/cc-slot-base-test/dynamicLoadingAssets","sourcesContent":["/* global cc */\n\nconst {convertAssetArrayToObject} = require('utils');\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        symbolIds: '2,3,4,5,6,7,8,9,10,K,K1,K2,K3,J,Q,JP,A,R',\n        defaultUrl: 'https://static.ktek.io/animTool/sprites/',\n        blurSymbolPrefix: ''\n    },\n\n    onLoad() {\n        this.listIds = this.symbolIds.split(',');\n        this.staticSymbolUrls = this.listIds.map(value => `${this.defaultUrl}${value}.png`) || [];\n        this.blurSymbolUrls = this.listIds.map(value => `${this.defaultUrl}blur${value}.png`) || [];\n        this.updatedSprites = [];\n        this.updatedBlurs = [];\n\n        this.getStaticSymbols();\n        this.getBlurSymbols();\n    },\n\n    getStaticSymbols() {\n        cc.loader.load(this.staticSymbolUrls, (errors, resources) => {\n            if (errors) {\n                for (let i = 0; i < errors.length; i++) {\n                    // cc.log('Error url [' + errors[i] + ']: ' + result.getError(errors[i]));\n                }\n            }\n            for (let i = 0; i < this.staticSymbolUrls.length; i++) {\n                let texture = resources.getContent(this.staticSymbolUrls[i]);\n                if (texture instanceof cc.Texture2D) {\n                    let spriteFrame = new cc.SpriteFrame(texture);\n                    spriteFrame.name = this.listIds[i];\n                    this.updatedSprites.push(spriteFrame);\n                }\n            }\n            this.node.assets = convertAssetArrayToObject(this.updatedSprites);\n            this.node.emit('REPLACE_SYMBOL_ASSETS', this.node.assets);\n        });\n    },\n\n    getBlurSymbols() {\n        cc.loader.load(this.blurSymbolUrls, (errors, resources) => {\n            if (errors) {\n                for (let i = 0; i < errors.length; i++) {\n                    // cc.log('Error url [' + errors[i] + ']: ' + results.getError(errors[i]));\n                }\n            }\n            for (let i = 0; i < this.blurSymbolUrls.length; i++) {\n                let texture = resources.getContent(this.blurSymbolUrls[i]);\n                if (texture instanceof cc.Texture2D) {\n                    let spriteFrame = new cc.SpriteFrame(texture);\n                    spriteFrame.name = `${this.blurSymbolPrefix}${this.listIds[i]}`;\n                    this.updatedBlurs.push(spriteFrame);\n                }\n            }\n            this.node.blurAssets = convertAssetArrayToObject(this.updatedBlurs);\n            this.node.emit('REPLACE_SYMBOL_BLUR_ASSETS', this.node.blurAssets);\n        });\n    }\n});\n"]}